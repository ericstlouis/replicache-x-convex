"use strict";exports.id=529,exports.ids=[529],exports.modules={661:(e,t,r)=>{r.d(t,{JtS:()=>d,NWY:()=>p,NhS:()=>l,XHJ:()=>g,kLh:()=>c,nQG:()=>o});var n=r(1789);function i(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var s=["color"],o=(0,n.forwardRef)(function(e,t){var r=e.color,o=i(e,s);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),(0,n.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),a=["color"],l=(0,n.forwardRef)(function(e,t){var r=e.color,s=i(e,a);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,n.createElement)("path",{d:"M7.49991 0.877045C3.84222 0.877045 0.877075 3.84219 0.877075 7.49988C0.877075 11.1575 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1576 0.877045 7.49991 0.877045ZM1.82708 7.49988C1.82708 4.36686 4.36689 1.82704 7.49991 1.82704C10.6329 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6329 13.1727 7.49991 13.1727C4.36689 13.1727 1.82708 10.6329 1.82708 7.49988ZM10.1589 5.53774C10.3178 5.31191 10.2636 5.00001 10.0378 4.84109C9.81194 4.68217 9.50004 4.73642 9.34112 4.96225L6.51977 8.97154L5.35681 7.78706C5.16334 7.59002 4.84677 7.58711 4.64973 7.78058C4.45268 7.97404 4.44978 8.29061 4.64325 8.48765L6.22658 10.1003C6.33054 10.2062 6.47617 10.2604 6.62407 10.2483C6.77197 10.2363 6.90686 10.1591 6.99226 10.0377L10.1589 5.53774Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),u=["color"],c=(0,n.forwardRef)(function(e,t){var r=e.color,s=i(e,u);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,n.createElement)("path",{d:"M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89997 1.49998 8.89997C1.72089 8.89997 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.98184L8.24618 0.941586C8.03275 0.917676 7.90692 1.1655 8.02936 1.34194C8.17013 1.54479 8.29981 1.75592 8.41754 1.97445C8.91878 2.90485 9.20322 3.96932 9.20322 5.10022C9.20322 8.37201 6.82247 11.0878 3.69887 11.6097C3.45736 11.65 3.20988 11.6772 2.96008 11.6906C2.74563 11.702 2.62729 11.9535 2.77721 12.1072C2.84551 12.1773 2.91535 12.2458 2.98667 12.3128L3.05883 12.3795L3.31883 12.6045L3.50684 12.7532L3.62796 12.8433L3.81491 12.9742L3.99079 13.089C4.11175 13.1651 4.23536 13.2375 4.36157 13.3059L4.62496 13.4412L4.88553 13.5607L5.18837 13.6828L5.43169 13.7686C5.56564 13.8128 5.70149 13.8529 5.83857 13.8885C5.94262 13.9155 6.04767 13.9401 6.15405 13.9622C6.27993 13.9883 6.40713 14.0109 6.53544 14.0298L6.85241 14.0685L7.11934 14.0892C7.24637 14.0965 7.37436 14.1002 7.50322 14.1002C11.1483 14.1002 14.1032 11.1453 14.1032 7.50023C14.1032 7.25044 14.0893 7.00389 14.0623 6.76131L14.0255 6.48407C13.991 6.26083 13.9453 6.04129 13.8891 5.82642C13.8213 5.56709 13.7382 5.31398 13.6409 5.06881L13.5279 4.80132L13.4507 4.63542L13.3766 4.48666C13.2178 4.17773 13.0353 3.88295 12.8312 3.60423L12.6782 3.40352L12.4793 3.16432L12.3157 2.98361L12.1961 2.85951L12.0355 2.70246L11.8134 2.50184L11.4925 2.24191L11.2483 2.06498L10.9562 1.87446L10.6346 1.68894L10.3073 1.52378L10.1938 1.47176L9.95488 1.3706L9.67791 1.2669L9.42566 1.1846L9.10075 1.09489L8.83599 1.03486L8.54406 0.98184ZM10.4032 5.30023C10.4032 4.27588 10.2002 3.29829 9.83244 2.40604C11.7623 3.28995 13.1032 5.23862 13.1032 7.50023C13.1032 10.593 10.596 13.1002 7.50322 13.1002C6.63646 13.1002 5.81597 12.9036 5.08355 12.5522C6.5419 12.0941 7.81081 11.2082 8.74322 10.0416C8.87963 10.2284 9.10028 10.3497 9.34928 10.3497C9.76349 10.3497 10.0993 10.0139 10.0993 9.59971C10.0993 9.24256 9.84965 8.94373 9.51535 8.86816C9.57741 8.75165 9.63653 8.63334 9.6926 8.51332C9.88358 8.63163 10.1088 8.69993 10.35 8.69993C11.0403 8.69993 11.6 8.14028 11.6 7.44993C11.6 6.75976 11.0406 6.20024 10.3505 6.19993C10.3853 5.90487 10.4032 5.60464 10.4032 5.30023Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),h=["color"],d=(0,n.forwardRef)(function(e,t){var r=e.color,s=i(e,h);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,n.createElement)("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),f=["color"],p=(0,n.forwardRef)(function(e,t){var r=e.color,s=i(e,f);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,n.createElement)("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))}),m=["color"],g=(0,n.forwardRef)(function(e,t){var r=e.color,s=i(e,m);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,n.createElement)("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))})},7474:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(1789),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:c,...h},d)=>(0,n.createElement)("svg",{ref:d,...i,width:o,height:o,stroke:r,strokeWidth:l?24*Number(a)/Number(o):a,className:["lucide",`lucide-${s(e)}`,u].join(" "),...h},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},7637:(e,t,r)=>{r.d(t,{Z:()=>n});/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7474).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7045:(e,t,r)=>{r.d(t,{Z:()=>n});/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7474).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3769:(e,t,r)=>{r.d(t,{Z:()=>n});/**
 * @license lucide-react v0.334.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(7474).Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},181:(e,t,r)=>{/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(1789);"function"==typeof Object.is&&Object.is,n.useState,n.useEffect,n.useLayoutEffect,n.useDebugValue,t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:function(e,t){return t()}},7174:(e,t,r)=>{/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(1789),i=r(2147),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var f=o(e,(h=u(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?t:(o=e,a=r)}var o,a,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]))[0],h[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),c(f),f}},2147:(e,t,r)=>{e.exports=r(181)},2382:(e,t,r)=>{e.exports=r(7174)},6436:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RSC_HEADER:function(){return r},ACTION:function(){return n},NEXT_ROUTER_STATE_TREE:function(){return i},NEXT_ROUTER_PREFETCH_HEADER:function(){return s},NEXT_URL:function(){return o},RSC_CONTENT_TYPE_HEADER:function(){return a},RSC_VARY_HEADER:function(){return l},FLIGHT_PARAMETERS:function(){return u},NEXT_RSC_UNION_QUERY:function(){return c},NEXT_DID_POSTPONE_HEADER:function(){return h}});let r="RSC",n="Next-Action",i="Next-Router-State-Tree",s="Next-Router-Prefetch",o="Next-Url",a="text/x-component",l=r+", "+i+", "+s+", "+o,u=[[r],[i],[s]],c="_rsc",h="x-nextjs-postponed";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4337:e=>{(()=>{"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},s=t.split(n),o=(r||{}).decode||e,a=0;a<s.length;a++){var l=s[a],u=l.indexOf("=");if(!(u<0)){var c=l.substr(0,u).trim(),h=l.substr(++u,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==i[c]&&(i[c]=function(e,t){try{return t(e)}catch(t){return e}}(h,o))}}return i},t.serialize=function(e,t,n){var s=n||{},o=s.encode||r;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var a=o(t);if(a&&!i.test(a))throw TypeError("argument val is invalid");var l=e+"="+a;if(null!=s.maxAge){var u=s.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(s.domain){if(!i.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!i.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},7743:(e,t)=>{function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var i="",s=r+1;s<e.length;){var o=e.charCodeAt(s);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||95===o){i+=e[s++];continue}break}if(!i)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:i}),r=s;continue}if("("===n){var a=1,l="",s=r+1;if("?"===e[s])throw TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;){if("\\"===e[s]){l+=e[s++]+e[s++];continue}if(")"===e[s]){if(0==--a){s++;break}}else if("("===e[s]&&(a++,"?"!==e[s+1]))throw TypeError("Capturing groups are not allowed at "+s);l+=e[s++]}if(a)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=s;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,o="[^"+s(t.delimiter||"/#?")+"]+?",a=[],l=0,u=0,c="",h=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},d=function(e){var t=h(e);if(void 0!==t)return t;var n=r[u];throw TypeError("Unexpected "+n.type+" at "+n.index+", expected "+e)},f=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};u<r.length;){var p=h("CHAR"),m=h("NAME"),g=h("PATTERN");if(m||g){var v=p||"";-1===i.indexOf(v)&&(c+=v,v=""),c&&(a.push(c),c=""),a.push({name:m||l++,prefix:v,suffix:"",pattern:g||o,modifier:h("MODIFIER")||""});continue}var y=p||h("ESCAPED_CHAR");if(y){c+=y;continue}if(c&&(a.push(c),c=""),h("OPEN")){var v=f(),w=h("NAME")||"",b=h("PATTERN")||"",_=f();d("CLOSE"),a.push({name:w||(b?l++:""),pattern:w&&!b?o:b,prefix:v,suffix:_,modifier:h("MODIFIER")||""});continue}d("END")}return a}function n(e,t){void 0===t&&(t={});var r=o(t),n=t.encode,i=void 0===n?function(e){return e}:n,s=t.validate,a=void 0===s||s,l=e.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",r)});return function(t){for(var r="",n=0;n<e.length;n++){var s=e[n];if("string"==typeof s){r+=s;continue}var o=t?t[s.name]:void 0,u="?"===s.modifier||"*"===s.modifier,c="*"===s.modifier||"+"===s.modifier;if(Array.isArray(o)){if(!c)throw TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===o.length){if(u)continue;throw TypeError('Expected "'+s.name+'" to not be empty')}for(var h=0;h<o.length;h++){var d=i(o[h],s);if(a&&!l[n].test(d))throw TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');r+=s.prefix+d+s.suffix}continue}if("string"==typeof o||"number"==typeof o){var d=i(String(o),s);if(a&&!l[n].test(d))throw TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+d+'"');r+=s.prefix+d+s.suffix;continue}if(!u){var f=c?"an array":"a string";throw TypeError('Expected "'+s.name+'" to be '+f)}}return r}}function i(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var s=n[0],o=n.index,a=Object.create(null),l=1;l<n.length;l++)!function(e){if(void 0!==n[e]){var r=t[e-1];"*"===r.modifier||"+"===r.modifier?a[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return i(e,r)}):a[r.name]=i(n[e],r)}}(l);return{path:s,index:o,params:a}}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function o(e){return e&&e.sensitive?"":"i"}function a(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,a=r.start,l=r.end,u=r.encode,c=void 0===u?function(e){return e}:u,h="["+s(r.endsWith||"")+"]|$",d="["+s(r.delimiter||"/#?")+"]",f=void 0===a||a?"^":"",p=0;p<e.length;p++){var m=e[p];if("string"==typeof m)f+=s(c(m));else{var g=s(c(m.prefix)),v=s(c(m.suffix));if(m.pattern){if(t&&t.push(m),g||v){if("+"===m.modifier||"*"===m.modifier){var y="*"===m.modifier?"?":"";f+="(?:"+g+"((?:"+m.pattern+")(?:"+v+g+"(?:"+m.pattern+"))*)"+v+")"+y}else f+="(?:"+g+"("+m.pattern+")"+v+")"+m.modifier}else f+="("+m.pattern+")"+m.modifier}else f+="(?:"+g+v+")"+m.modifier}}if(void 0===l||l)i||(f+=d+"?"),f+=r.endsWith?"(?="+h+")":"$";else{var w=e[e.length-1],b="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;i||(f+="(?:"+d+"(?="+h+"))?"),b||(f+="(?="+d+"|"+h+")")}return new RegExp(f,o(r))}function l(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?RegExp("(?:"+e.map(function(e){return l(e,t,n).source}).join("|")+")",o(n)):a(r(e,n),t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=r,t.compile=function(e,t){return n(r(e,t),t)},t.tokensToFunction=n,t.match=function(e,t){var r=[];return i(l(e,r,t),r,t)},t.regexpToFunction=i,t.tokensToRegexp=a,t.pathToRegexp=l},818:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fillMetadataSegment:function(){return h},normalizeMetadataRoute:function(){return d}});let n=r(7470),i=function(e){return e&&e.__esModule?e:{default:e}}(r(8987)),s=r(7353),o=r(4881),a=r(6488),l=r(6055),u=r(4555);function c(e){let t="";return(e.includes("(")&&e.includes(")")||e.includes("@"))&&(t=(0,a.djb2Hash)(e).toString(36).slice(0,6)),t}function h(e,t,r){let n=(0,l.normalizeAppPath)(e),a=(0,o.getNamedRouteRegex)(n,!1),h=(0,s.interpolateDynamicPath)(n,t,a),d=c(e),f=d?`-${d}`:"",{name:p,ext:m}=i.default.parse(r);return(0,u.normalizePathSep)(i.default.join(h,`${p}${f}${m}`))}function d(e){if(!(0,n.isMetadataRoute)(e))return e;let t=e,r="";if("/robots"===e?t+=".txt":"/manifest"===e?t+=".webmanifest":e.endsWith("/sitemap")?t+=".xml":r=c(e.slice(0,-(i.default.basename(e).length+1))),!t.endsWith("/route")){let{dir:s,name:o,ext:a}=i.default.parse(t),l=(0,n.isStaticMetadataRoute)(e);t=i.default.posix.join(s,`${o}${r?`-${r}`:""}${a}`,l?"":"[[...__metadata_id__]]","route")}return t}},7470:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{STATIC_METADATA_IMAGES:function(){return i},isMetadataRouteFile:function(){return a},isStaticMetadataRouteFile:function(){return l},isStaticMetadataRoute:function(){return u},isMetadataRoute:function(){return c}});let n=r(4555),i={icon:{filename:"icon",extensions:["ico","jpg","jpeg","png","svg"]},apple:{filename:"apple-icon",extensions:["jpg","jpeg","png"]},favicon:{filename:"favicon",extensions:["ico"]},openGraph:{filename:"opengraph-image",extensions:["jpg","jpeg","png","gif"]},twitter:{filename:"twitter-image",extensions:["jpg","jpeg","png","gif"]}},s=["js","jsx","ts","tsx"],o=e=>`(?:${e.join("|")})`;function a(e,t,r){let s=[RegExp(`^[\\\\/]robots${r?`\\.${o(t.concat("txt"))}$`:""}`),RegExp(`^[\\\\/]manifest${r?`\\.${o(t.concat("webmanifest","json"))}$`:""}`),RegExp("^[\\\\/]favicon\\.ico$"),RegExp(`[\\\\/]sitemap${r?`\\.${o(t.concat("xml"))}$`:""}`),RegExp(`[\\\\/]${i.icon.filename}\\d?${r?`\\.${o(t.concat(i.icon.extensions))}$`:""}`),RegExp(`[\\\\/]${i.apple.filename}\\d?${r?`\\.${o(t.concat(i.apple.extensions))}$`:""}`),RegExp(`[\\\\/]${i.openGraph.filename}\\d?${r?`\\.${o(t.concat(i.openGraph.extensions))}$`:""}`),RegExp(`[\\\\/]${i.twitter.filename}\\d?${r?`\\.${o(t.concat(i.twitter.extensions))}$`:""}`)],a=(0,n.normalizePathSep)(e);return s.some(e=>e.test(a))}function l(e){return a(e,[],!0)}function u(e){return"/robots"===e||"/manifest"===e||l(e)}function c(e){let t=e.replace(/^\/?app\//,"").replace(/\/route$/,"");return"/"!==t[0]&&(t="/"+t),!t.endsWith("/page")&&a(t,s,!1)}},55:(e,t,r)=>{function n(e){return function(){let{cookie:t}=e;if(!t)return{};let{parse:n}=r(4337);return n(Array.isArray(t)?t.join("; "):t)}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getCookieParser",{enumerable:!0,get:function(){return n}})},676:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},isInterceptionRouteAppPath:function(){return s},extractInterceptionRouteInformation:function(){return o}});let n=r(6055),i=["(..)(..)","(.)","(..)","(...)"];function s(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function o(e){let t,r,s;for(let n of e.split("/"))if(r=i.find(e=>n.startsWith(e))){[t,s]=e.split(r,2);break}if(!t||!r||!s)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":s="/"===t?`/${s}`:t+"/"+s;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);s=t.split("/").slice(0,-1).concat(s).join("/");break;case"(...)":s="/"+s;break;case"(..)(..)":let o=t.split("/");if(o.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);s=o.slice(0,-2).concat(s).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:s}}},7353:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeVercelUrl:function(){return d},interpolateDynamicPath:function(){return f},normalizeDynamicRouteParams:function(){return p},getUtils:function(){return m}});let n=r(7310),i=r(1065),s=r(3608),o=r(4881),a=r(1584),l=r(2450),u=r(5423),c=r(6055),h=r(5440);function d(e,t,r,i,s){if(i&&t&&s){let t=(0,n.parse)(e.url,!0);for(let e of(delete t.search,Object.keys(t.query)))(e!==h.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(h.NEXT_QUERY_PARAM_PREFIX)||(r||Object.keys(s.groups)).includes(e))&&delete t.query[e];e.url=(0,n.format)(t)}}function f(e,t,r){if(!r)return e;for(let n of Object.keys(r.groups)){let{optional:i,repeat:s}=r.groups[n],o=`[${s?"...":""}${n}]`;i&&(o=`[${o}]`);let a=e.indexOf(o);if(a>-1){let r;let i=t[n];r=Array.isArray(i)?i.map(e=>e&&encodeURIComponent(e)).join("/"):i?encodeURIComponent(i):"",e=e.slice(0,a)+r+e.slice(a+o.length)}}return e}function p(e,t,r,n){let i=!0;return r?{params:e=Object.keys(r.groups).reduce((s,o)=>{let a=e[o];"string"==typeof a&&(a=(0,c.normalizeRscURL)(a)),Array.isArray(a)&&(a=a.map(e=>("string"==typeof e&&(e=(0,c.normalizeRscURL)(e)),e)));let l=n[o],u=r.groups[o].optional;return((Array.isArray(l)?l.some(e=>Array.isArray(a)?a.some(t=>t.includes(e)):null==a?void 0:a.includes(e)):null==a?void 0:a.includes(l))||void 0===a&&!(u&&t))&&(i=!1),u&&(!a||Array.isArray(a)&&1===a.length&&("index"===a[0]||a[0]===`[[...${o}]]`))&&(a=void 0,delete e[o]),a&&"string"==typeof a&&r.groups[o].repeat&&(a=a.split("/")),a&&(s[o]=a),s},{}),hasValidParams:i}:{params:e,hasValidParams:!1}}function m({page:e,i18n:t,basePath:r,rewrites:n,pageIsDynamic:c,trailingSlash:m,caseSensitive:g}){let v,y,w;return c&&(v=(0,o.getNamedRouteRegex)(e,!1),w=(y=(0,a.getRouteMatcher)(v))(e)),{handleRewrites:function(o,a){let h={},d=a.pathname,f=n=>{let u=(0,s.getPathMatch)(n.source+(m?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!g})(a.pathname);if((n.has||n.missing)&&u){let e=(0,l.matchHas)(o,a.query,n.has,n.missing);e?Object.assign(u,e):u=!1}if(u){let{parsedDestination:s,destQuery:o}=(0,l.prepareDestination)({appendParamsToQuery:!0,destination:n.destination,params:u,query:a.query});if(s.protocol)return!0;if(Object.assign(h,o,u),Object.assign(a.query,s.query),delete s.query,Object.assign(a,s),d=a.pathname,r&&(d=d.replace(RegExp(`^${r}`),"")||"/"),t){let e=(0,i.normalizeLocalePath)(d,t.locales);d=e.pathname,a.query.nextInternalLocale=e.detectedLocale||u.nextInternalLocale}if(d===e)return!0;if(c&&y){let e=y(d);if(e)return a.query={...a.query,...e},!0}}return!1};for(let e of n.beforeFiles||[])f(e);if(d!==e){let t=!1;for(let e of n.afterFiles||[])if(t=f(e))break;if(!t&&!(()=>{let t=(0,u.removeTrailingSlash)(d||"");return t===(0,u.removeTrailingSlash)(e)||(null==y?void 0:y(t))})()){for(let e of n.fallback||[])if(t=f(e))break}}return h},defaultRouteRegex:v,dynamicRouteMatcher:y,defaultRouteMatches:w,getParamsFromRouteMatches:function(e,r,n){return(0,a.getRouteMatcher)(function(){let{groups:e,routeKeys:i}=v;return{re:{exec:s=>{let o=Object.fromEntries(new URLSearchParams(s)),a=t&&n&&o["1"]===n;for(let e of Object.keys(o)){let t=o[e];e!==h.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(h.NEXT_QUERY_PARAM_PREFIX)&&(o[e.substring(h.NEXT_QUERY_PARAM_PREFIX.length)]=t,delete o[e])}let l=Object.keys(i||{}),u=e=>{if(t){let i=Array.isArray(e),s=i?e[0]:e;if("string"==typeof s&&t.locales.some(e=>e.toLowerCase()===s.toLowerCase()&&(n=e,r.locale=n,!0)))return i&&e.splice(0,1),!i||0===e.length}return!1};return l.every(e=>o[e])?l.reduce((t,r)=>{let n=null==i?void 0:i[r];return n&&!u(o[r])&&(t[e[n].pos]=o[r]),t},{}):Object.keys(o).reduce((e,t)=>{if(!u(o[t])){let r=t;return a&&(r=parseInt(t,10)-1+""),Object.assign(e,{[r]:o[t]})}return e},{})}},groups:e}}())(e.headers["x-now-route-matches"])},normalizeDynamicRouteParams:(e,t)=>p(e,t,v,w),normalizeVercelUrl:(e,t,r)=>d(e,t,r,c,v),interpolateDynamicPath:(e,t)=>f(e,t,v)}}},1901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return i}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function i(e){return r.test(e)?e.replace(n,"\\$&"):e}},6488:(e,t)=>{function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)&4294967295;return t>>>0}function n(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return n}})},1065:(e,t)=>{function r(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return r}})},8987:(e,t,r)=>{let n;n=r(1017),e.exports=n},4583:(e,t)=>{function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},4555:(e,t)=>{function r(e){return e.replace(/\\/g,"/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathSep",{enumerable:!0,get:function(){return r}})},6055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return s},normalizeRscURL:function(){return o}});let n=r(4583),i=r(2451);function s(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function o(e){return e.replace(/\.rsc($|\?)/,"$1")}},193:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseRelativeUrl",{enumerable:!0,get:function(){return i}}),r(459);let n=r(5216);function i(e,t){let r=new URL("http://n"),i=t?new URL(t,r):e.startsWith(".")?new URL("http://n"):r,{pathname:s,searchParams:o,search:a,hash:l,href:u,origin:c}=new URL(e,i);if(c!==r.origin)throw Error("invariant: invalid relative URL, router received "+e);return{pathname:s,query:(0,n.searchParamsToUrlQuery)(o),search:a,hash:l,href:u.slice(r.origin.length)}}},9972:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return s}});let n=r(5216),i=r(193);function s(e){if(e.startsWith("/"))return(0,i.parseRelativeUrl)(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:(0,n.searchParamsToUrlQuery)(t.searchParams),search:t.search}}},3608:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPathMatch",{enumerable:!0,get:function(){return i}});let n=r(7743);function i(e,t){let r=[],i=(0,n.pathToRegexp)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),s=(0,n.regexpToFunction)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(i.source),i.flags):i,r);return(e,n)=>{if("string"!=typeof e)return!1;let i=s(e);if(!i)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete i.params[e.name];return{...n,...i.params}}}},2450:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{matchHas:function(){return c},compileNonPath:function(){return h},prepareDestination:function(){return d}});let n=r(7743),i=r(1901),s=r(9972),o=r(676),a=r(6436),l=r(55);function u(e){return e.replace(/__ESC_COLON_/gi,":")}function c(e,t,r,n){void 0===r&&(r=[]),void 0===n&&(n=[]);let i={},s=r=>{let n;let s=r.key;switch(r.type){case"header":s=s.toLowerCase(),n=e.headers[s];break;case"cookie":n="cookies"in e?e.cookies[r.key]:(0,l.getCookieParser)(e.headers)()[r.key];break;case"query":n=t[s];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};n=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!r.value&&n)return i[function(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}(s)]=n,!0;if(n){let e=RegExp("^"+r.value+"$"),t=Array.isArray(n)?n.slice(-1)[0].match(e):n.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{i[e]=t.groups[e]}):"host"===r.type&&t[0]&&(i.host=t[0])),!0}return!1};return!!r.every(e=>s(e))&&!n.some(e=>s(e))&&i}function h(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,n.compile)("/"+e,{validate:!1})(t).slice(1)}function d(e){let t;let r=Object.assign({},e.query);delete r.__nextLocale,delete r.__nextDefaultLocale,delete r.__nextDataReq,delete r.__nextInferredLocaleFromDefault,delete r[a.NEXT_RSC_UNION_QUERY];let l=e.destination;for(let t of Object.keys({...e.params,...r}))l=l.replace(RegExp(":"+(0,i.escapeStringRegexp)(t),"g"),"__ESC_COLON_"+t);let c=(0,s.parseUrl)(l),d=c.query,f=u(""+c.pathname+(c.hash||"")),p=u(c.hostname||""),m=[],g=[];(0,n.pathToRegexp)(f,m),(0,n.pathToRegexp)(p,g);let v=[];m.forEach(e=>v.push(e.name)),g.forEach(e=>v.push(e.name));let y=(0,n.compile)(f,{validate:!1}),w=(0,n.compile)(p,{validate:!1});for(let[t,r]of Object.entries(d))Array.isArray(r)?d[t]=r.map(t=>h(u(t),e.params)):"string"==typeof r&&(d[t]=h(u(r),e.params));let b=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!b.some(e=>v.includes(e)))for(let t of b)t in d||(d[t]=e.params[t]);if((0,o.isInterceptionRouteAppPath)(f))for(let t of f.split("/")){let r=o.INTERCEPTION_ROUTE_MARKERS.find(e=>t.startsWith(e));if(r){e.params["0"]=r;break}}try{let[r,n]=(t=y(e.params)).split("#",2);c.hostname=w(e.params),c.pathname=r,c.hash=(n?"#":"")+(n||""),delete c.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match");throw e}return c.query={...r,...c.query},{newUrl:t,destQuery:d,parsedDestination:c}}},5216:(e,t)=>{function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function n(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,i]=e;Array.isArray(i)?i.forEach(e=>t.append(r,n(e))):t.set(r,n(i))}),t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return i},assign:function(){return s}})},5423:(e,t)=>{function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},1584:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return i}});let n=r(459);function i(e){let{re:t,groups:r}=e;return e=>{let i=t.exec(e);if(!i)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw new n.DecodeError("failed to decode param")}},o={};return Object.keys(r).forEach(e=>{let t=r[e],n=i[t.pos];void 0!==n&&(o[e]=~n.indexOf("/")?n.split("/").map(e=>s(e)):t.repeat?[s(n)]:s(n))}),o}}},4881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRouteRegex:function(){return l},getNamedRouteRegex:function(){return h},getNamedMiddlewareRegex:function(){return d}});let n=r(676),i=r(1901),s=r(5423);function o(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function a(e){let t=(0,s.removeTrailingSlash)(e).slice(1).split("/"),r={},a=1;return{parameterizedRoute:t.map(e=>{let t=n.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),s=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&s){let{key:e,optional:n,repeat:l}=o(s[1]);return r[e]={pos:a++,repeat:l,optional:n},"/"+(0,i.escapeStringRegexp)(t)+"([^/]+?)"}if(!s)return"/"+(0,i.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:n}=o(s[1]);return r[e]={pos:a++,repeat:t,optional:n},t?n?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function l(e){let{parameterizedRoute:t,groups:r}=a(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function u(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:s,keyPrefix:a}=e,{key:l,optional:u,repeat:c}=o(n),h=l.replace(/\W/g,"");a&&(h=""+a+h);let d=!1;(0===h.length||h.length>30)&&(d=!0),isNaN(parseInt(h.slice(0,1)))||(d=!0),d&&(h=r()),a?s[h]=""+a+l:s[h]=l;let f=t?(0,i.escapeStringRegexp)(t):"";return c?u?"(?:/"+f+"(?<"+h+">.+?))?":"/"+f+"(?<"+h+">.+?)":"/"+f+"(?<"+h+">[^/]+?)"}function c(e,t){let r;let o=(0,s.removeTrailingSlash)(e).slice(1).split("/"),a=(r=0,()=>{let e="",t=++r;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),l={};return{namedParameterizedRoute:o.map(e=>{let r=n.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),s=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&s){let[r]=e.split(s[0]);return u({getSafeRouteKey:a,interceptionMarker:r,segment:s[1],routeKeys:l,keyPrefix:t?"nxtI":void 0})}return s?u({getSafeRouteKey:a,segment:s[1],routeKeys:l,keyPrefix:t?"nxtP":void 0}):"/"+(0,i.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function h(e,t){let r=c(e,t);return{...l(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function d(e,t){let{parameterizedRoute:r}=a(e),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:i}=c(e,!1);return{namedRegex:"^"+i+(n?"(?:(/.*)?)":"")+"$"}}},2451:(e,t)=>{function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isGroupSegment:function(){return r},PAGE_SEGMENT_KEY:function(){return n},DEFAULT_SEGMENT_KEY:function(){return i}});let n="__PAGE__",i="__DEFAULT__"},459:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{WEB_VITALS:function(){return r},execOnce:function(){return n},isAbsoluteUrl:function(){return s},getLocationOrigin:function(){return o},getURL:function(){return a},getDisplayName:function(){return l},isResSent:function(){return u},normalizeRepeatedSlashes:function(){return c},loadGetInitialProps:function(){return h},SP:function(){return d},ST:function(){return f},DecodeError:function(){return p},NormalizeError:function(){return m},PageNotFoundError:function(){return g},MissingStaticPage:function(){return v},MiddlewareNotFoundError:function(){return y},stringifyError:function(){return w}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return r||(r=!0,t=e(...i)),t}}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function o(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function a(){let{href:e}=window.location,t=o();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.');return n}let d="undefined"!=typeof performance,f=d&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class v extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},2296:(e,t,r)=>{r.d(t,{Z:()=>n});function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},4441:(e,t,r)=>{r.d(t,{M:()=>n});function n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}},328:(e,t,r)=>{r.d(t,{F:()=>i,e:()=>s});var n=r(1789);function i(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function s(...e){return(0,n.useCallback)(i(...e),e)}},4089:(e,t,r)=>{r.d(t,{b:()=>i});var n=r(1789);function i(e,t=[]){let r=[],i=()=>{let t=r.map(e=>(0,n.createContext)(e));return function(r){let i=(null==r?void 0:r[e])||t;return(0,n.useMemo)(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return i.scopeName=e,[function(t,i){let s=(0,n.createContext)(i),o=r.length;function a(t){let{scope:r,children:i,...a}=t,l=(null==r?void 0:r[e][o])||s,u=(0,n.useMemo)(()=>a,Object.values(a));return(0,n.createElement)(l.Provider,{value:u},i)}return r=[...r,i],a.displayName=t+"Provider",[a,function(r,a){let l=(null==a?void 0:a[e][o])||s,u=(0,n.useContext)(l);if(u)return u;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return(0,n.useMemo)(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}(i,...t)]}},5029:(e,t,r)=>{r.d(t,{gm:()=>s});var n=r(1789);let i=(0,n.createContext)(void 0);function s(e){let t=(0,n.useContext)(i);return e||t||"ltr"}},9179:(e,t,r)=>{let n;r.d(t,{oC:()=>no,VY:()=>nr,ZA:()=>nn,ck:()=>ns,wU:()=>nu,__:()=>ni,Uv:()=>nt,Ee:()=>na,Rk:()=>nl,fC:()=>r6,Z0:()=>nc,Tr:()=>nh,tu:()=>nf,fF:()=>nd,xz:()=>ne});var i,s=r(2296),o=r(1789),a=r.t(o,2),l=r(4441),u=r(328),c=r(4089),h=r(5902);function d({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,i]=function({defaultProp:e,onChange:t}){let r=(0,o.useState)(e),[n]=r,i=(0,o.useRef)(n),s=(0,h.W)(t);return(0,o.useEffect)(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}({defaultProp:t,onChange:r}),s=void 0!==e,a=s?e:n,l=(0,h.W)(r);return[a,(0,o.useCallback)(t=>{if(s){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else i(t)},[s,e,i,l])]}var f=r(4968),p=r(1965);function m(e){let t=e+"CollectionProvider",[r,n]=(0,c.b)(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e+"CollectionSlot",l=o.forwardRef((e,t)=>{let{scope:r,children:n}=e,i=s(a,r),l=(0,u.e)(t,i.collectionRef);return o.createElement(p.g7,{ref:l},n)}),h=e+"CollectionItemSlot",d="data-radix-collection-item";return[{Provider:e=>{let{scope:t,children:r}=e,n=o.useRef(null),s=o.useRef(new Map).current;return o.createElement(i,{scope:t,itemMap:s,collectionRef:n},r)},Slot:l,ItemSlot:o.forwardRef((e,t)=>{let{scope:r,children:n,...i}=e,a=o.useRef(null),l=(0,u.e)(t,a),c=s(h,r);return o.useEffect(()=>(c.itemMap.set(a,{ref:a,...i}),()=>void c.itemMap.delete(a))),o.createElement(p.g7,{[d]:"",ref:l},n)})},function(t){let r=s(e+"CollectionConsumer",t);return o.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},n]}var g=r(5029);let v="dismissableLayer.update",y=(0,o.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),w=(0,o.forwardRef)((e,t)=>{var r;let{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:p,onDismiss:m,...g}=e,w=(0,o.useContext)(y),[E,x]=(0,o.useState)(null),S=null!==(r=null==E?void 0:E.ownerDocument)&&void 0!==r?r:null==globalThis?void 0:globalThis.document,[,k]=(0,o.useState)({}),C=(0,u.e)(t,e=>x(e)),R=Array.from(w.layers),[I]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),T=R.indexOf(I),M=E?R.indexOf(E):-1,O=w.layersWithOutsidePointerEventsDisabled.size>0,P=M>=T,D=function(e,t=null==globalThis?void 0:globalThis.document){let r=(0,h.W)(e),n=(0,o.useRef)(!1),i=(0,o.useRef)(()=>{});return(0,o.useEffect)(()=>{let e=e=>{if(e.target&&!n.current){let n={originalEvent:e};function s(){_("dismissableLayer.pointerDownOutside",r,n,{discrete:!0})}"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=s,t.addEventListener("click",i.current,{once:!0})):s()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...w.branches].some(e=>e.contains(t));!P||r||(null==c||c(e),null==p||p(e),e.defaultPrevented||null==m||m())},S),A=function(e,t=null==globalThis?void 0:globalThis.document){let r=(0,h.W)(e),n=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{let e=e=>{e.target&&!n.current&&_("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;[...w.branches].some(e=>e.contains(t))||(null==d||d(e),null==p||p(e),e.defaultPrevented||null==m||m())},S);return function(e,t=null==globalThis?void 0:globalThis.document){let r=(0,h.W)(e);(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[r,t])}(e=>{M!==w.layers.size-1||(null==a||a(e),!e.defaultPrevented&&m&&(e.preventDefault(),m()))},S),(0,o.useEffect)(()=>{if(E)return i&&(0===w.layersWithOutsidePointerEventsDisabled.size&&(n=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(E)),w.layers.add(E),b(),()=>{i&&1===w.layersWithOutsidePointerEventsDisabled.size&&(S.body.style.pointerEvents=n)}},[E,S,i,w]),(0,o.useEffect)(()=>()=>{E&&(w.layers.delete(E),w.layersWithOutsidePointerEventsDisabled.delete(E),b())},[E,w]),(0,o.useEffect)(()=>{let e=()=>k({});return document.addEventListener(v,e),()=>document.removeEventListener(v,e)},[]),(0,o.createElement)(f.WV.div,(0,s.Z)({},g,{ref:C,style:{pointerEvents:O?P?"auto":"none":void 0,...e.style},onFocusCapture:(0,l.M)(e.onFocusCapture,A.onFocusCapture),onBlurCapture:(0,l.M)(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:(0,l.M)(e.onPointerDownCapture,D.onPointerDownCapture)}))});function b(){let e=new CustomEvent(v);document.dispatchEvent(e)}function _(e,t,r,{discrete:n}){let i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?(0,f.jH)(i,s):i.dispatchEvent(s)}let E=0;function x(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}let S="focusScope.autoFocusOnMount",k="focusScope.autoFocusOnUnmount",C={bubbles:!1,cancelable:!0},R=(0,o.forwardRef)((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=e,[c,d]=(0,o.useState)(null),p=(0,h.W)(i),m=(0,h.W)(a),g=(0,o.useRef)(null),v=(0,u.e)(t,e=>d(e)),y=(0,o.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,o.useEffect)(()=>{if(n){function e(e){if(y.paused||!c)return;let t=e.target;c.contains(t)?g.current=t:M(g.current,{select:!0})}function t(e){if(y.paused||!c)return;let t=e.relatedTarget;null===t||c.contains(t)||M(g.current,{select:!0})}document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&M(c)});return c&&r.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,c,y.paused]),(0,o.useEffect)(()=>{if(c){O.add(y);let e=document.activeElement;if(!c.contains(e)){let t=new CustomEvent(S,C);c.addEventListener(S,p),c.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(M(n,{select:t}),document.activeElement!==r)return}(I(c).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&M(c))}return()=>{c.removeEventListener(S,p),setTimeout(()=>{let t=new CustomEvent(k,C);c.addEventListener(k,m),c.dispatchEvent(t),t.defaultPrevented||M(null!=e?e:document.body,{select:!0}),c.removeEventListener(k,m),O.remove(y)},0)}}},[c,p,m,y]);let w=(0,o.useCallback)(e=>{if(!r&&!n||y.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let t=e.currentTarget,[n,s]=function(e){let t=I(e);return[T(t,e),T(t.reverse(),e)]}(t);n&&s?e.shiftKey||i!==s?e.shiftKey&&i===n&&(e.preventDefault(),r&&M(s,{select:!0})):(e.preventDefault(),r&&M(n,{select:!0})):i===t&&e.preventDefault()}},[r,n,y.paused]);return(0,o.createElement)(f.WV.div,(0,s.Z)({tabIndex:-1},l,{ref:v,onKeyDown:w}))});function I(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function T(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function M(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}let O=function(){let e=[];return{add(t){let r=e[0];t!==r&&(null==r||r.pause()),(e=P(e,t)).unshift(t)},remove(t){var r;null===(r=(e=P(e,t))[0])||void 0===r||r.resume()}}}();function P(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var D=r(4252);let A=a["useId".toString()]||(()=>void 0),L=0;function N(e){let[t,r]=o.useState(A());return(0,D.b)(()=>{e||r(e=>null!=e?e:String(L++))},[e]),e||(t?`radix-${t}`:"")}let $=["top","right","bottom","left"],j=Math.min,H=Math.max,q=Math.round,V=Math.floor,F=e=>({x:e,y:e}),U={left:"right",right:"left",bottom:"top",top:"bottom"},W={start:"end",end:"start"};function B(e,t){return"function"==typeof e?e(t):e}function z(e){return e.split("-")[0]}function G(e){return e.split("-")[1]}function Z(e){return"x"===e?"y":"x"}function Q(e){return"y"===e?"height":"width"}function K(e){return["top","bottom"].includes(z(e))?"y":"x"}function X(e){return e.replace(/start|end/g,e=>W[e])}function J(e){return e.replace(/left|right|bottom|top/g,e=>U[e])}function Y(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function ee(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function et(e,t,r){let n,{reference:i,floating:s}=e,o=K(t),a=Z(K(t)),l=Q(a),u=z(t),c="y"===o,h=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,f=i[l]/2-s[l]/2;switch(u){case"top":n={x:h,y:i.y-s.height};break;case"bottom":n={x:h,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:d};break;case"left":n={x:i.x-s.width,y:d};break;default:n={x:i.x,y:i.y}}switch(G(t)){case"start":n[a]-=f*(r&&c?-1:1);break;case"end":n[a]+=f*(r&&c?-1:1)}return n}let er=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(t)),u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:h}=et(u,n,l),d=n,f={},p=0;for(let r=0;r<a.length;r++){let{name:s,fn:m}=a[r],{x:g,y:v,data:y,reset:w}=await m({x:c,y:h,initialPlacement:n,placement:d,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});c=null!=g?g:c,h=null!=v?v:h,f={...f,[s]:{...f[s],...y}},w&&p<=50&&(p++,"object"==typeof w&&(w.placement&&(d=w.placement),w.rects&&(u=!0===w.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:h}=et(u,d,l)),r=-1)}return{x:c,y:h,placement:d,strategy:i,middlewareData:f}};async function en(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=B(t,e),p=Y(f),m=a[d?"floating"===h?"reference":"floating":h],g=ee(await s.getClippingRect({element:null==(r=await (null==s.isElement?void 0:s.isElement(m)))||r?m:m.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v="floating"===h?{...o.floating,x:n,y:i}:o.reference,y=await (null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),w=await (null==s.isElement?void 0:s.isElement(y))&&await (null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},b=ee(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-b.top+p.top)/w.y,bottom:(b.bottom-g.bottom+p.bottom)/w.y,left:(g.left-b.left+p.left)/w.x,right:(b.right-g.right+p.right)/w.x}}function ei(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function es(e){return $.some(t=>e[t]>=0)}async function eo(e,t){let{placement:r,platform:n,elements:i}=e,s=await (null==n.isRTL?void 0:n.isRTL(i.floating)),o=z(r),a=G(r),l="y"===K(r),u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,h=B(t,e),{mainAxis:d,crossAxis:f,alignmentAxis:p}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),l?{x:f*c,y:d*u}:{x:d*u,y:f*c}}function ea(e){return ec(e)?(e.nodeName||"").toLowerCase():"#document"}function el(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eu(e){var t;return null==(t=(ec(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function ec(e){return e instanceof Node||e instanceof el(e).Node}function eh(e){return e instanceof Element||e instanceof el(e).Element}function ed(e){return e instanceof HTMLElement||e instanceof el(e).HTMLElement}function ef(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof el(e).ShadowRoot)}function ep(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=ey(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function em(e){let t=eg(),r=ey(e);return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function eg(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function ev(e){return["html","body","#document"].includes(ea(e))}function ey(e){return el(e).getComputedStyle(e)}function ew(e){return eh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function eb(e){if("html"===ea(e))return e;let t=e.assignedSlot||e.parentNode||ef(e)&&e.host||eu(e);return ef(t)?t.host:t}function e_(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=function e(t){let r=eb(t);return ev(r)?t.ownerDocument?t.ownerDocument.body:t.body:ed(r)&&ep(r)?r:e(r)}(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),o=el(i);return s?t.concat(o,o.visualViewport||[],ep(i)?i:[],o.frameElement&&r?e_(o.frameElement):[]):t.concat(i,e_(i,[],r))}function eE(e){let t=ey(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=ed(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=q(r)!==s||q(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function ex(e){return eh(e)?e:e.contextElement}function eS(e){let t=ex(e);if(!ed(t))return F(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:s}=eE(t),o=(s?q(r.width):r.width)/n,a=(s?q(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}let ek=F(0);function eC(e){let t=el(e);return eg()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ek}function eR(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let s=e.getBoundingClientRect(),o=ex(e),a=F(1);t&&(n?eh(n)&&(a=eS(n)):a=eS(e));let l=(void 0===(i=r)&&(i=!1),n&&(!i||n===el(o))&&i)?eC(o):F(0),u=(s.left+l.x)/a.x,c=(s.top+l.y)/a.y,h=s.width/a.x,d=s.height/a.y;if(o){let e=el(o),t=n&&eh(n)?el(n):n,r=e,i=r.frameElement;for(;i&&n&&t!==r;){let e=eS(i),t=i.getBoundingClientRect(),n=ey(i),s=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;u*=e.x,c*=e.y,h*=e.x,d*=e.y,u+=s,c+=o,i=(r=el(i)).frameElement}}return ee({width:h,height:d,x:u,y:c})}let eI=[":popover-open",":modal"];function eT(e){return eI.some(t=>{try{return e.matches(t)}catch(e){return!1}})}function eM(e){return eR(eu(e)).left+ew(e).scrollLeft}function eO(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=el(e),n=eu(e),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;let e=eg();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,r);else if("document"===t)n=function(e){let t=eu(e),r=ew(e),n=e.ownerDocument.body,i=H(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=H(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),o=-r.scrollLeft+eM(e),a=-r.scrollTop;return"rtl"===ey(n).direction&&(o+=H(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}(eu(e));else if(eh(t))n=function(e,t){let r=eR(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=ed(e)?eS(e):F(1),o=e.clientWidth*s.x;return{width:o,height:e.clientHeight*s.y,x:i*s.x,y:n*s.y}}(t,r);else{let r=eC(e);n={...t,x:t.x-r.x,y:t.y-r.y}}return ee(n)}function eP(e,t){return ed(e)&&"fixed"!==ey(e).position?t?t(e):e.offsetParent:null}function eD(e,t){let r=el(e);if(!ed(e)||eT(e))return r;let n=eP(e,t);for(;n&&["table","td","th"].includes(ea(n))&&"static"===ey(n).position;)n=eP(n,t);return n&&("html"===ea(n)||"body"===ea(n)&&"static"===ey(n).position&&!em(n))?r:n||function(e){let t=eb(e);for(;ed(t)&&!ev(t);){if(em(t))return t;t=eb(t)}return null}(e)||r}let eA=async function(e){let t=this.getOffsetParent||eD,r=this.getDimensions;return{reference:function(e,t,r){let n=ed(t),i=eu(t),s="fixed"===r,o=eR(e,!0,s,t),a={scrollLeft:0,scrollTop:0},l=F(0);if(n||!n&&!s){if(("body"!==ea(t)||ep(i))&&(a=ew(t)),n){let e=eR(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=eM(i))}return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await r(e.floating)}}},eL={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,s="fixed"===i,o=eu(n),a=!!t&&eT(t.floating);if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},u=F(1),c=F(0),h=ed(n);if((h||!h&&!s)&&(("body"!==ea(n)||ep(o))&&(l=ew(n)),ed(n))){let e=eR(n);u=eS(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x,y:r.y*u.y-l.scrollTop*u.y+c.y}},getDocumentElement:eu,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,s=[..."clippingAncestors"===r?function(e,t){let r=t.get(e);if(r)return r;let n=e_(e,[],!1).filter(e=>eh(e)&&"body"!==ea(e)),i=null,s="fixed"===ey(e).position,o=s?eb(e):e;for(;eh(o)&&!ev(o);){let t=ey(o),r=em(o);r||"fixed"!==t.position||(i=null),(s?!r&&!i:!r&&"static"===t.position&&!!i&&["absolute","fixed"].includes(i.position)||ep(o)&&!r&&function e(t,r){let n=eb(t);return!(n===r||!eh(n)||ev(n))&&("fixed"===ey(n).position||e(n,r))}(e,o))?n=n.filter(e=>e!==o):i=t,o=eb(o)}return t.set(e,n),n}(t,this._c):[].concat(r),n],o=s[0],a=s.reduce((e,r)=>{let n=eO(t,r,i);return e.top=H(n.top,e.top),e.right=j(n.right,e.right),e.bottom=j(n.bottom,e.bottom),e.left=H(n.left,e.left),e},eO(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:eD,getElementRects:eA,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=eE(e);return{width:t,height:r}},getScale:eS,isElement:eh,isRTL:function(e){return"rtl"===ey(e).direction}},eN=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=B(e,t)||{};if(null==u)return{};let h=Y(c),d={x:r,y:n},f=Z(K(i)),p=Q(f),m=await o.getDimensions(u),g="y"===f,v=g?"clientHeight":"clientWidth",y=s.reference[p]+s.reference[f]-d[f]-s.floating[p],w=d[f]-s.reference[f],b=await (null==o.getOffsetParent?void 0:o.getOffsetParent(u)),_=b?b[v]:0;_&&await (null==o.isElement?void 0:o.isElement(b))||(_=a.floating[v]||s.floating[p]);let E=_/2-m[p]/2-1,x=j(h[g?"top":"left"],E),S=j(h[g?"bottom":"right"],E),k=_-m[p]-S,C=_/2-m[p]/2+(y/2-w/2),R=H(x,j(C,k)),I=!l.arrow&&null!=G(i)&&C!==R&&s.reference[p]/2-(C<x?x:S)-m[p]/2<0,T=I?C<x?C-x:C-k:0;return{[f]:d[f]+T,data:{[f]:R,centerOffset:C-R-T,...I&&{alignmentOffset:T}},reset:I}}}),e$=(e,t,r)=>{let n=new Map,i={platform:eL,...r},s={...i.platform,_c:n};return er(e,t,{...i,platform:s})};var ej=r(8867);let eH=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:n}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?eN({element:r.current,padding:n}).fn(t):{}:r?eN({element:r,padding:n}).fn(t):{}}});var eq="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;function eV(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!eV(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!eV(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function eF(e,t){return Math.round(1*t)/1}function eU(e){let t=o.useRef(e);return eq(()=>{t.current=e}),t}let eW=(0,o.forwardRef)((e,t)=>{let{children:r,width:n=10,height:i=5,...a}=e;return(0,o.createElement)(f.WV.svg,(0,s.Z)({},a,{ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?r:(0,o.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),eB="Popper",[ez,eG]=(0,c.b)(eB),[eZ,eQ]=ez(eB),eK=(0,o.forwardRef)((e,t)=>{let{__scopePopper:r,virtualRef:n,...i}=e,a=eQ("PopperAnchor",r),l=(0,o.useRef)(null),c=(0,u.e)(t,l);return(0,o.useEffect)(()=>{a.onAnchorChange((null==n?void 0:n.current)||l.current)}),n?null:(0,o.createElement)(f.WV.div,(0,s.Z)({},i,{ref:c}))}),eX="PopperContent",[eJ,eY]=ez(eX),e0=(0,o.forwardRef)((e,t)=>{var r,n,i,a,l,c,d,p;let{__scopePopper:m,side:g="bottom",sideOffset:v=0,align:y="center",alignOffset:w=0,arrowPadding:b=0,avoidCollisions:_=!0,collisionBoundary:E=[],collisionPadding:x=0,sticky:S="partial",hideWhenDetached:k=!1,updatePositionStrategy:C="optimized",onPlaced:R,...I}=e,T=eQ(eX,m),[M,O]=(0,o.useState)(null),P=(0,u.e)(t,e=>O(e)),[A,L]=(0,o.useState)(null),N=function(e){let[t,r]=(0,o.useState)(void 0);return(0,D.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(A),$=null!==(r=null==N?void 0:N.width)&&void 0!==r?r:0,q=null!==(n=null==N?void 0:N.height)&&void 0!==n?n:0,F="number"==typeof x?x:{top:0,right:0,bottom:0,left:0,...x},U=Array.isArray(E)?E:[E],W=U.length>0,Y={padding:F,boundary:U.filter(e9),altBoundary:W},{refs:ee,floatingStyles:et,placement:er,isPositioned:ea,middlewareData:el}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:u,open:c}=e,[h,d]=o.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=o.useState(n);eV(f,n)||p(n);let[m,g]=o.useState(null),[v,y]=o.useState(null),w=o.useCallback(e=>{e!==x.current&&(x.current=e,g(e))},[]),b=o.useCallback(e=>{e!==S.current&&(S.current=e,y(e))},[]),_=s||m,E=a||v,x=o.useRef(null),S=o.useRef(null),k=o.useRef(h),C=null!=u,R=eU(u),I=eU(i),T=o.useCallback(()=>{if(!x.current||!S.current)return;let e={placement:t,strategy:r,middleware:f};I.current&&(e.platform=I.current),e$(x.current,S.current,e).then(e=>{let t={...e,isPositioned:!0};M.current&&!eV(k.current,t)&&(k.current=t,ej.flushSync(()=>{d(t)}))})},[f,t,r,I]);eq(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);let M=o.useRef(!1);eq(()=>(M.current=!0,()=>{M.current=!1}),[]),eq(()=>{if(_&&(x.current=_),E&&(S.current=E),_&&E){if(R.current)return R.current(_,E,T);T()}},[_,E,T,R,C]);let O=o.useMemo(()=>({reference:x,floating:S,setReference:w,setFloating:b}),[w,b]),P=o.useMemo(()=>({reference:_,floating:E}),[_,E]),D=o.useMemo(()=>{let e={position:r,left:0,top:0};if(!P.floating)return e;let t=eF(P.floating,h.x),n=eF(P.floating,h.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...(P.floating,!1)}:{position:r,left:t,top:n}},[r,l,P.floating,h.x,h.y]);return o.useMemo(()=>({...h,update:T,refs:O,elements:P,floatingStyles:D}),[h,T,O,P,D])}({strategy:"fixed",placement:g+("center"!==y?"-"+y:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:u=!1}=n,c=ex(e),h=s||o?[...c?e_(c):[],...e_(t)]:[];h.forEach(e=>{s&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)});let d=c&&l?function(e,t){let r,n=null,i=eu(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();let{left:u,top:c,width:h,height:d}=e.getBoundingClientRect();if(a||t(),!h||!d)return;let f=V(c),p=V(i.clientWidth-(u+h)),m={rootMargin:-f+"px "+-p+"px "+-V(i.clientHeight-(c+d))+"px "+-V(u)+"px",threshold:H(0,j(1,l))||1},g=!0;function v(e){let t=e[0].intersectionRatio;if(t!==l){if(!g)return o();t?o(!1,t):r=setTimeout(()=>{o(!1,1e-7)},100)}g=!1}try{n=new IntersectionObserver(v,{...m,root:i.ownerDocument})}catch(e){n=new IntersectionObserver(v,m)}n.observe(e)}(!0),s}(c,r):null,f=-1,p=null;a&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),c&&!u&&p.observe(c),p.observe(t));let m=u?eR(e):null;return u&&function t(){let n=eR(e);m&&(n.x!==m.x||n.y!==m.y||n.width!==m.width||n.height!==m.height)&&r(),m=n,i=requestAnimationFrame(t)}(),r(),()=>{var e;h.forEach(e=>{s&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)}),null==d||d(),null==(e=p)||e.disconnect(),p=null,u&&cancelAnimationFrame(i)}})(...e,{animationFrame:"always"===C}),elements:{reference:T.anchor},middleware:[function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:i,y:s,placement:o,middlewareData:a}=t,l=await eo(t,e);return o===(null==(r=a.offset)?void 0:r.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}}({mainAxis:v+q,alignmentAxis:w}),_&&function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=B(e,t),u={x:r,y:n},c=await en(t,l),h=K(z(i)),d=Z(h),f=u[d],p=u[h];if(s){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",r=f+c[e],n=f-c[t];f=H(r,j(f,n))}if(o){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=p+c[e],n=p-c[t];p=H(r,j(p,n))}let m=a.fn({...t,[d]:f,[h]:p});return{...m,data:{x:m.x-r,y:m.y-n}}}}}({mainAxis:!0,crossAxis:!1,limiter:"partial"===S?function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=B(e,t),c={x:r,y:n},h=K(i),d=Z(h),f=c[d],p=c[h],m=B(a,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===d?"height":"width",t=s.reference[d]-s.floating[e]+g.mainAxis,r=s.reference[d]+s.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(u){var v,y;let e="y"===d?"width":"height",t=["top","left"].includes(z(i)),r=s.reference[h]-s.floating[e]+(t&&(null==(v=o.offset)?void 0:v[h])||0)+(t?0:g.crossAxis),n=s.reference[h]+s.reference[e]+(t?0:(null==(y=o.offset)?void 0:y[h])||0)-(t?g.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[d]:f,[h]:p}}}}():void 0,...Y}),_&&function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n,i,s,o;let{placement:a,middlewareData:l,rects:u,initialPlacement:c,platform:h,elements:d}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=B(e,t);if(null!=(r=l.arrow)&&r.alignmentOffset)return{};let b=z(a),_=z(c)===c,E=await (null==h.isRTL?void 0:h.isRTL(d.floating)),x=m||(_||!y?[J(c)]:function(e){let t=J(e);return[X(e),t,X(t)]}(c));m||"none"===v||x.push(...function(e,t,r,n){let i=G(e),s=function(e,t,r){let n=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":if(r)return t?i:n;return t?n:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(z(e),"start"===r,n);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(X)))),s}(c,y,v,E));let S=[c,...x],k=await en(t,w),C=[],R=(null==(n=l.flip)?void 0:n.overflows)||[];if(f&&C.push(k[b]),p){let e=function(e,t,r){void 0===r&&(r=!1);let n=G(e),i=Z(K(e)),s=Q(i),o="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=J(o)),[o,J(o)]}(a,u,E);C.push(k[e[0]],k[e[1]])}if(R=[...R,{placement:a,overflows:C}],!C.every(e=>e<=0)){let e=((null==(i=l.flip)?void 0:i.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:R},reset:{placement:t}};let r=null==(s=R.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:s.placement;if(!r)switch(g){case"bestFit":{let e=null==(o=R.map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(r=e);break}case"initialPlacement":r=c}if(a!==r)return{reset:{placement:r}}}return{}}}}({...Y}),function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){let r,n;let{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...u}=B(e,t),c=await en(t,u),h=z(i),d=G(i),f="y"===K(i),{width:p,height:m}=s.floating;"top"===h||"bottom"===h?(r=h,n=d===(await (null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(n=h,r="end"===d?"top":"bottom");let g=m-c[r],v=p-c[n],y=!t.middlewareData.shift,w=g,b=v;if(f){let e=p-c.left-c.right;b=d||y?j(v,e):e}else{let e=m-c.top-c.bottom;w=d||y?j(g,e):e}if(y&&!d){let e=H(c.left,0),t=H(c.right,0),r=H(c.top,0),n=H(c.bottom,0);f?b=p-2*(0!==e||0!==t?e+t:H(c.left,c.right)):w=m-2*(0!==r||0!==n?r+n:H(c.top,c.bottom))}await l({...t,availableWidth:b,availableHeight:w});let _=await o.getDimensions(a.floating);return p!==_.width||m!==_.height?{reset:{rects:!0}}:{}}}}({...Y,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:s}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${n}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}}),A&&eH({element:A,padding:b}),e8({arrowWidth:$,arrowHeight:q}),k&&function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:n="referenceHidden",...i}=B(e,t);switch(n){case"referenceHidden":{let e=ei(await en(t,{...i,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:es(e)}}}case"escaped":{let e=ei(await en(t,{...i,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:es(e)}}}default:return{}}}}}({strategy:"referenceHidden",...Y})]}),[ec,eh]=e4(er),ed=(0,h.W)(R);(0,D.b)(()=>{ea&&(null==ed||ed())},[ea,ed]);let ef=null===(i=el.arrow)||void 0===i?void 0:i.x,ep=null===(a=el.arrow)||void 0===a?void 0:a.y,em=(null===(l=el.arrow)||void 0===l?void 0:l.centerOffset)!==0,[eg,ev]=(0,o.useState)();return(0,D.b)(()=>{M&&ev(window.getComputedStyle(M).zIndex)},[M]),(0,o.createElement)("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...et,transform:ea?et.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eg,"--radix-popper-transform-origin":[null===(c=el.transformOrigin)||void 0===c?void 0:c.x,null===(d=el.transformOrigin)||void 0===d?void 0:d.y].join(" ")},dir:e.dir},(0,o.createElement)(eJ,{scope:m,placedSide:ec,onArrowChange:L,arrowX:ef,arrowY:ep,shouldHideArrow:em},(0,o.createElement)(f.WV.div,(0,s.Z)({"data-side":ec,"data-align":eh},I,{ref:P,style:{...I.style,animation:ea?void 0:"none",opacity:null!==(p=el.hide)&&void 0!==p&&p.referenceHidden?0:void 0}}))))}),e1={top:"bottom",right:"left",bottom:"top",left:"right"},e2=(0,o.forwardRef)(function(e,t){let{__scopePopper:r,...n}=e,i=eY("PopperArrow",r),a=e1[i.placedSide];return(0,o.createElement)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},(0,o.createElement)(eW,(0,s.Z)({},n,{ref:t,style:{...n.style,display:"block"}})))});function e9(e){return null!==e}let e8=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i,s,o;let{placement:a,rects:l,middlewareData:u}=t,c=(null===(r=u.arrow)||void 0===r?void 0:r.centerOffset)!==0,h=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[f,p]=e4(a),m={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(n=null===(i=u.arrow)||void 0===i?void 0:i.x)&&void 0!==n?n:0)+h/2,v=(null!==(s=null===(o=u.arrow)||void 0===o?void 0:o.y)&&void 0!==s?s:0)+d/2,y="",w="";return"bottom"===f?(y=c?m:`${g}px`,w=`${-d}px`):"top"===f?(y=c?m:`${g}px`,w=`${l.floating.height+d}px`):"right"===f?(y=`${-d}px`,w=c?m:`${v}px`):"left"===f&&(y=`${l.floating.width+d}px`,w=c?m:`${v}px`),{data:{x:y,y:w}}}});function e4(e){let[t,r="center"]=e.split("-");return[t,r]}let e5=e=>{let{__scopePopper:t,children:r}=e,[n,i]=(0,o.useState)(null);return(0,o.createElement)(eZ,{scope:t,anchor:n,onAnchorChange:i},r)},e3=(0,o.forwardRef)((e,t)=>{var r;let{container:n=null==globalThis?void 0:null===(r=globalThis.document)||void 0===r?void 0:r.body,...i}=e;return n?ej.createPortal((0,o.createElement)(f.WV.div,(0,s.Z)({},i,{ref:t})),n):null});var e7=r(8845);let e6="rovingFocusGroup.onEntryFocus",te={bubbles:!1,cancelable:!0},tt="RovingFocusGroup",[tr,tn,ti]=m(tt),[ts,to]=(0,c.b)(tt,[ti]),[ta,tl]=ts(tt),tu=(0,o.forwardRef)((e,t)=>(0,o.createElement)(tr.Provider,{scope:e.__scopeRovingFocusGroup},(0,o.createElement)(tr.Slot,{scope:e.__scopeRovingFocusGroup},(0,o.createElement)(tc,(0,s.Z)({},e,{ref:t}))))),tc=(0,o.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:m,onEntryFocus:v,...y}=e,w=(0,o.useRef)(null),b=(0,u.e)(t,w),_=(0,g.gm)(a),[E=null,x]=d({prop:c,defaultProp:p,onChange:m}),[S,k]=(0,o.useState)(!1),C=(0,h.W)(v),R=tn(r),I=(0,o.useRef)(!1),[T,M]=(0,o.useState)(0);return(0,o.useEffect)(()=>{let e=w.current;if(e)return e.addEventListener(e6,C),()=>e.removeEventListener(e6,C)},[C]),(0,o.createElement)(ta,{scope:r,orientation:n,dir:_,loop:i,currentTabStopId:E,onItemFocus:(0,o.useCallback)(e=>x(e),[x]),onItemShiftTab:(0,o.useCallback)(()=>k(!0),[]),onFocusableItemAdd:(0,o.useCallback)(()=>M(e=>e+1),[]),onFocusableItemRemove:(0,o.useCallback)(()=>M(e=>e-1),[])},(0,o.createElement)(f.WV.div,(0,s.Z)({tabIndex:S||0===T?-1:0,"data-orientation":n},y,{ref:b,style:{outline:"none",...e.style},onMouseDown:(0,l.M)(e.onMouseDown,()=>{I.current=!0}),onFocus:(0,l.M)(e.onFocus,e=>{let t=!I.current;if(e.target===e.currentTarget&&t&&!S){let t=new CustomEvent(e6,te);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=R().filter(e=>e.focusable);tf([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current))}}I.current=!1}),onBlur:(0,l.M)(e.onBlur,()=>k(!1))})))}),th=(0,o.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,...u}=e,c=N(),h=a||c,d=tl("RovingFocusGroupItem",r),p=d.currentTabStopId===h,m=tn(r),{onFocusableItemAdd:g,onFocusableItemRemove:v}=d;return(0,o.useEffect)(()=>{if(n)return g(),()=>v()},[n,g,v]),(0,o.createElement)(tr.ItemSlot,{scope:r,id:h,focusable:n,active:i},(0,o.createElement)(f.WV.span,(0,s.Z)({tabIndex:p?0:-1,"data-orientation":d.orientation},u,{ref:t,onMouseDown:(0,l.M)(e.onMouseDown,e=>{n?d.onItemFocus(h):e.preventDefault()}),onFocus:(0,l.M)(e.onFocus,()=>d.onItemFocus(h)),onKeyDown:(0,l.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){d.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let i=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(i))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(i)))return td[i]}(e,d.orientation,d.dir);if(void 0!==t){e.preventDefault();let r=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=d.loop?function(e,t){return e.map((r,n)=>e[(t+n)%e.length])}(r,n+1):r.slice(n+1)}setTimeout(()=>tf(r))}})})))}),td={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tf(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}var tp=new WeakMap,tm=new WeakMap,tg={},tv=0,ty=function(e){return e&&(e.host||ty(e.parentNode))},tw=function(e,t,r,n){var i=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=ty(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});tg[r]||(tg[r]=new WeakMap);var s=tg[r],o=[],a=new Set,l=new Set(i),u=function(e){!e||a.has(e)||(a.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(a.has(e))c(e);else{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(tp.get(e)||0)+1,u=(s.get(e)||0)+1;tp.set(e,l),s.set(e,u),o.push(e),1===l&&i&&tm.set(e,!0),1===u&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}})};return c(t),a.clear(),tv++,function(){o.forEach(function(e){var t=tp.get(e)-1,i=s.get(e)-1;tp.set(e,t),s.set(e,i),t||(tm.has(e)||e.removeAttribute(n),tm.delete(e)),i||e.removeAttribute(r)}),--tv||(tp=new WeakMap,tp=new WeakMap,tm=new WeakMap,tg={})}},tb=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n,i=Array.from(Array.isArray(e)?e:[e]),s=t||(n=e,"undefined"==typeof document?null:(Array.isArray(n)?n[0]:n).ownerDocument.body);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live]"))),tw(i,s,r,"aria-hidden")):function(){return null}},t_=function(){return(t_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function tE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var tx="right-scroll-bar-position",tS="width-before-scroll-bar";function tk(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var tC=new WeakMap;function tR(e){return e}var tI=function(e){void 0===e&&(e={});var t,r,n,i=(void 0===t&&(t=tR),r=[],n=!1,{read:function(){if(n)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:null},useMedium:function(e){var i=t(e,n);return r.push(i),function(){r=r.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var i=r;r=[],i.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),r={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),r}}}});return i.options=t_({async:!0,ssr:!1},e),i}(),tT=function(){},tM=o.forwardRef(function(e,t){var r,n,i,s,a=o.useRef(null),l=o.useState({onScrollCapture:tT,onWheelCapture:tT,onTouchMoveCapture:tT}),u=l[0],c=l[1],h=e.forwardProps,d=e.children,f=e.className,p=e.removeScrollBar,m=e.enabled,g=e.shards,v=e.sideCar,y=e.noIsolation,w=e.inert,b=e.allowPinchZoom,_=e.as,E=tE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=(r=[a,t],n=function(e){return r.forEach(function(t){return tk(t,e)})},(i=(0,o.useState)(function(){return{value:null,callback:n,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=n,s=i.facade,o.useLayoutEffect(function(){var e=tC.get(s);if(e){var t=new Set(e),n=new Set(r),i=s.current;t.forEach(function(e){n.has(e)||tk(e,null)}),n.forEach(function(e){t.has(e)||tk(e,i)})}tC.set(s,r)},[r]),s),S=t_(t_({},E),u);return o.createElement(o.Fragment,null,m&&o.createElement(v,{sideCar:tI,removeScrollBar:p,shards:g,noIsolation:y,inert:w,setCallbacks:c,allowPinchZoom:!!b,lockRef:a}),h?o.cloneElement(o.Children.only(d),t_(t_({},S),{ref:x})):o.createElement(void 0===_?"div":_,t_({},S,{className:f,ref:x}),d))});tM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},tM.classNames={fullWidth:tS,zeroRight:tx};var tO=function(e){var t=e.sideCar,r=tE(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return o.createElement(n,t_({},r))};tO.isSideCarExport=!0;var tP=function(){var e=0,t=null;return{add:function(n){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=i||r.nc;return t&&e.setAttribute("nonce",t),e}())){var s,o;(s=t).styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n)),o=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(o)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tD=function(){var e=tP();return function(t,r){o.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},tA=function(){var e=tD();return function(t){return e(t.styles,t.dynamic),null}},tL={left:0,top:0,right:0,gap:0},tN=tA(),t$="data-scroll-locked",tj=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(a,"px ").concat(n,";\n  }\n  body[").concat(t$,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(tx," {\n    right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(tS," {\n    margin-right: ").concat(a,"px ").concat(n,";\n  }\n  \n  .").concat(tx," .").concat(tx," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(tS," .").concat(tS," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(t$,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},tH=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n,s=o.useMemo(function(){return tL},[i]);return o.useEffect(function(){return document.body.setAttribute(t$,""),function(){document.body.removeAttribute(t$)}},[]),o.createElement(tN,{styles:tj(s,!t,i,r?"":"!important")})},tq=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===r[t])},tV=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),tF(e,r)){var n=tU(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},tF=function(e,t){return"v"===e?tq(t,"overflowY"):tq(t,"overflowX")},tU=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},tW=function(e,t,r,n,i){var s,o=(s=window.getComputedStyle(t).direction,"h"===e&&"rtl"===s?-1:1),a=o*n,l=r.target,u=t.contains(l),c=!1,h=a>0,d=0,f=0;do{var p=tU(e,l),m=p[0],g=p[1]-p[2]-o*m;(m||g)&&tF(e,l)&&(d+=g,f+=m),l=l.parentNode}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return h&&(i&&0===d||!i&&a>d)?c=!0:!h&&(i&&0===f||!i&&-a>f)&&(c=!0),c},tB=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tz=function(e){return[e.deltaX,e.deltaY]},tG=function(e){return e&&"current"in e?e.current:e},tZ=0,tQ=[];let tK=(tI.useMedium(function(e){var t=o.useRef([]),r=o.useRef([0,0]),n=o.useRef(),i=o.useState(tZ++)[0],s=o.useState(function(){return tA()})[0],a=o.useRef(e);o.useEffect(function(){a.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(tG),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=o.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var i,s=tB(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-s[0],u="deltaY"in e?e.deltaY:o[1]-s[1],c=e.target,h=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===h&&"range"===c.type)return!1;var d=tV(h,c);if(!d)return!0;if(d?i=h:(i="v"===h?"h":"v",d=tV(h,c)),!d)return!1;if(!n.current&&"changedTouches"in e&&(l||u)&&(n.current=i),!i)return!0;var f=n.current||i;return tW(f,t,e,"h"===f?l:u,!0)},[]),u=o.useCallback(function(e){if(tQ.length&&tQ[tQ.length-1]===s){var r="deltaY"in e?tz(e):tB(e),n=t.current.filter(function(t){var n;return t.name===e.type&&t.target===e.target&&(n=t.delta)[0]===r[0]&&n[1]===r[1]})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var i=(a.current.shards||[]).map(tG).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?l(e,i[0]):!a.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=o.useCallback(function(e,r,n,i){var s={name:e,delta:r,target:n,should:i};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),h=o.useCallback(function(e){r.current=tB(e),n.current=void 0},[]),d=o.useCallback(function(t){c(t.type,tz(t),t.target,l(t,e.lockRef.current))},[]),f=o.useCallback(function(t){c(t.type,tB(t),t.target,l(t,e.lockRef.current))},[]);o.useEffect(function(){return tQ.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,!1),document.addEventListener("touchmove",u,!1),document.addEventListener("touchstart",h,!1),function(){tQ=tQ.filter(function(e){return e!==s}),document.removeEventListener("wheel",u,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchstart",h,!1)}},[]);var p=e.removeScrollBar,m=e.inert;return o.createElement(o.Fragment,null,m?o.createElement(s,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,p?o.createElement(tH,{gapMode:"margin"}):null)}),tO);var tX=o.forwardRef(function(e,t){return o.createElement(tM,t_({},e,{ref:t,sideCar:tK}))});tX.classNames=tM.classNames;let tJ=["Enter"," "],tY=["ArrowUp","PageDown","End"],t0=["ArrowDown","PageUp","Home",...tY],t1={ltr:[...tJ,"ArrowRight"],rtl:[...tJ,"ArrowLeft"]},t2={ltr:["ArrowLeft"],rtl:["ArrowRight"]},t9="Menu",[t8,t4,t5]=m(t9),[t3,t7]=(0,c.b)(t9,[t5,eG,to]),t6=eG(),re=to(),[rt,rr]=t3(t9),[rn,ri]=t3(t9),rs=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,...n}=e,i=t6(r);return(0,o.createElement)(eK,(0,s.Z)({},i,n,{ref:t}))}),ro="MenuPortal",[ra,rl]=t3(ro,{forceMount:void 0}),ru="MenuContent",[rc,rh]=t3(ru),rd=(0,o.forwardRef)((e,t)=>{let r=rl(ru,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=rr(ru,e.__scopeMenu),l=ri(ru,e.__scopeMenu);return(0,o.createElement)(t8.Provider,{scope:e.__scopeMenu},(0,o.createElement)(e7.z,{present:n||a.open},(0,o.createElement)(t8.Slot,{scope:e.__scopeMenu},l.modal?(0,o.createElement)(rf,(0,s.Z)({},i,{ref:t})):(0,o.createElement)(rp,(0,s.Z)({},i,{ref:t})))))}),rf=(0,o.forwardRef)((e,t)=>{let r=rr(ru,e.__scopeMenu),n=(0,o.useRef)(null),i=(0,u.e)(t,n);return(0,o.useEffect)(()=>{let e=n.current;if(e)return tb(e)},[]),(0,o.createElement)(rm,(0,s.Z)({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,l.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)}))}),rp=(0,o.forwardRef)((e,t)=>{let r=rr(ru,e.__scopeMenu);return(0,o.createElement)(rm,(0,s.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)}))}),rm=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:c,disableOutsidePointerEvents:h,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:y,disableOutsideScroll:b,..._}=e,S=rr(ru,r),k=ri(ru,r),C=t6(r),I=re(r),T=t4(r),[M,O]=(0,o.useState)(null),P=(0,o.useRef)(null),D=(0,u.e)(t,P,S.onContentChange),A=(0,o.useRef)(0),L=(0,o.useRef)(""),N=(0,o.useRef)(0),$=(0,o.useRef)(null),j=(0,o.useRef)("right"),H=(0,o.useRef)(0),q=b?tX:o.Fragment,V=b?{as:p.g7,allowPinchZoom:!0}:void 0,F=e=>{var t,r;let n=L.current+e,i=T().filter(e=>!e.disabled),s=document.activeElement,o=null===(t=i.find(e=>e.ref.current===s))||void 0===t?void 0:t.textValue,a=function(e,t,r){var n;let i=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,s=(n=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(n+r)%e.length]));1===i.length&&(s=s.filter(e=>e!==r));let o=s.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return o!==r?o:void 0}(i.map(e=>e.textValue),n,o),l=null===(r=i.find(e=>e.textValue===a))||void 0===r?void 0:r.ref.current;(function e(t){L.current=t,window.clearTimeout(A.current),""!==t&&(A.current=window.setTimeout(()=>e(""),1e3))})(n),l&&setTimeout(()=>l.focus())};(0,o.useEffect)(()=>()=>window.clearTimeout(A.current),[]),(0,o.useEffect)(()=>{var e,t;let r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:x()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:x()),E++,()=>{1===E&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),E--}},[]);let U=(0,o.useCallback)(e=>{var t,r;return j.current===(null===(t=$.current)||void 0===t?void 0:t.side)&&function(e,t){return!!t&&function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let o=t[e].x,a=t[e].y,l=t[s].x,u=t[s].y;a>n!=u>n&&r<(l-o)*(n-a)/(u-a)+o&&(i=!i)}return i}({x:e.clientX,y:e.clientY},t)}(e,null===(r=$.current)||void 0===r?void 0:r.area)},[]);return(0,o.createElement)(rc,{scope:r,searchRef:L,onItemEnter:(0,o.useCallback)(e=>{U(e)&&e.preventDefault()},[U]),onItemLeave:(0,o.useCallback)(e=>{var t;U(e)||(null===(t=P.current)||void 0===t||t.focus(),O(null))},[U]),onTriggerLeave:(0,o.useCallback)(e=>{U(e)&&e.preventDefault()},[U]),pointerGraceTimerRef:N,onPointerGraceIntentChange:(0,o.useCallback)(e=>{$.current=e},[])},(0,o.createElement)(q,V,(0,o.createElement)(R,{asChild:!0,trapped:i,onMountAutoFocus:(0,l.M)(a,e=>{var t;e.preventDefault(),null===(t=P.current)||void 0===t||t.focus()}),onUnmountAutoFocus:c},(0,o.createElement)(w,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:v,onDismiss:y},(0,o.createElement)(tu,(0,s.Z)({asChild:!0},I,{dir:k.dir,orientation:"vertical",loop:n,currentTabStopId:M,onCurrentTabStopIdChange:O,onEntryFocus:(0,l.M)(d,e=>{k.isUsingKeyboardRef.current||e.preventDefault()})}),(0,o.createElement)(e0,(0,s.Z)({role:"menu","aria-orientation":"vertical","data-state":rj(S.open),"data-radix-menu-content":"",dir:k.dir},C,_,{ref:D,style:{outline:"none",..._.style},onKeyDown:(0,l.M)(_.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&F(e.key));let i=P.current;if(e.target!==i||!t0.includes(e.key))return;e.preventDefault();let s=T().filter(e=>!e.disabled).map(e=>e.ref.current);tY.includes(e.key)&&s.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(s)}),onBlur:(0,l.M)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(A.current),L.current="")}),onPointerMove:(0,l.M)(e.onPointerMove,rV(e=>{let t=e.target,r=H.current!==e.clientX;if(e.currentTarget.contains(t)&&r){let t=e.clientX>H.current?"right":"left";j.current=t,H.current=e.clientX}}))})))))))}),rg=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,o.createElement)(f.WV.div,(0,s.Z)({role:"group"},n,{ref:t}))}),rv=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,o.createElement)(f.WV.div,(0,s.Z)({},n,{ref:t}))}),ry="MenuItem",rw="menu.itemSelect",rb=(0,o.forwardRef)((e,t)=>{let{disabled:r=!1,onSelect:n,...i}=e,a=(0,o.useRef)(null),c=ri(ry,e.__scopeMenu),h=rh(ry,e.__scopeMenu),d=(0,u.e)(t,a),p=(0,o.useRef)(!1);return(0,o.createElement)(r_,(0,s.Z)({},i,{ref:d,disabled:r,onClick:(0,l.M)(e.onClick,()=>{let e=a.current;if(!r&&e){let t=new CustomEvent(rw,{bubbles:!0,cancelable:!0});e.addEventListener(rw,e=>null==n?void 0:n(e),{once:!0}),(0,f.jH)(e,t),t.defaultPrevented?p.current=!1:c.onClose()}}),onPointerDown:t=>{var r;null===(r=e.onPointerDown)||void 0===r||r.call(e,t),p.current=!0},onPointerUp:(0,l.M)(e.onPointerUp,e=>{var t;p.current||null===(t=e.currentTarget)||void 0===t||t.click()}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{let t=""!==h.searchRef.current;!r&&(!t||" "!==e.key)&&tJ.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))}),r_=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,disabled:n=!1,textValue:i,...a}=e,c=rh(ry,r),h=re(r),d=(0,o.useRef)(null),p=(0,u.e)(t,d),[m,g]=(0,o.useState)(!1),[v,y]=(0,o.useState)("");return(0,o.useEffect)(()=>{let e=d.current;if(e){var t;y((null!==(t=e.textContent)&&void 0!==t?t:"").trim())}},[a.children]),(0,o.createElement)(t8.ItemSlot,{scope:r,disabled:n,textValue:null!=i?i:v},(0,o.createElement)(th,(0,s.Z)({asChild:!0},h,{focusable:!n}),(0,o.createElement)(f.WV.div,(0,s.Z)({role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},a,{ref:p,onPointerMove:(0,l.M)(e.onPointerMove,rV(e=>{n?c.onItemLeave(e):(c.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())})),onPointerLeave:(0,l.M)(e.onPointerLeave,rV(e=>c.onItemLeave(e))),onFocus:(0,l.M)(e.onFocus,()=>g(!0)),onBlur:(0,l.M)(e.onBlur,()=>g(!1))}))))}),rE=(0,o.forwardRef)((e,t)=>{let{checked:r=!1,onCheckedChange:n,...i}=e;return(0,o.createElement)(rI,{scope:e.__scopeMenu,checked:r},(0,o.createElement)(rb,(0,s.Z)({role:"menuitemcheckbox","aria-checked":rH(r)?"mixed":r},i,{ref:t,"data-state":rq(r),onSelect:(0,l.M)(i.onSelect,()=>null==n?void 0:n(!!rH(r)||!r),{checkForDefaultPrevented:!1})})))}),[rx,rS]=t3("MenuRadioGroup",{value:void 0,onValueChange:()=>{}}),rk=(0,o.forwardRef)((e,t)=>{let{value:r,onValueChange:n,...i}=e,a=(0,h.W)(n);return(0,o.createElement)(rx,{scope:e.__scopeMenu,value:r,onValueChange:a},(0,o.createElement)(rg,(0,s.Z)({},i,{ref:t})))}),rC=(0,o.forwardRef)((e,t)=>{let{value:r,...n}=e,i=rS("MenuRadioItem",e.__scopeMenu),a=r===i.value;return(0,o.createElement)(rI,{scope:e.__scopeMenu,checked:a},(0,o.createElement)(rb,(0,s.Z)({role:"menuitemradio","aria-checked":a},n,{ref:t,"data-state":rq(a),onSelect:(0,l.M)(n.onSelect,()=>{var e;return null===(e=i.onValueChange)||void 0===e?void 0:e.call(i,r)},{checkForDefaultPrevented:!1})})))}),rR="MenuItemIndicator",[rI,rT]=t3(rR,{checked:!1}),rM=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,forceMount:n,...i}=e,a=rT(rR,r);return(0,o.createElement)(e7.z,{present:n||rH(a.checked)||!0===a.checked},(0,o.createElement)(f.WV.span,(0,s.Z)({},i,{ref:t,"data-state":rq(a.checked)})))}),rO=(0,o.forwardRef)((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,o.createElement)(f.WV.div,(0,s.Z)({role:"separator","aria-orientation":"horizontal"},n,{ref:t}))}),rP=((e,t)=>{let{__scopeMenu:r,...n}=e,i=t6(r);return(0,o.createElement)(e2,(0,s.Z)({},i,n,{ref:t}))},"MenuSub"),[rD,rA]=t3(rP),rL="MenuSubTrigger",rN=(0,o.forwardRef)((e,t)=>{let r=rr(rL,e.__scopeMenu),n=ri(rL,e.__scopeMenu),i=rA(rL,e.__scopeMenu),a=rh(rL,e.__scopeMenu),c=(0,o.useRef)(null),{pointerGraceTimerRef:h,onPointerGraceIntentChange:d}=a,f={__scopeMenu:e.__scopeMenu},p=(0,o.useCallback)(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return(0,o.useEffect)(()=>p,[p]),(0,o.useEffect)(()=>{let e=h.current;return()=>{window.clearTimeout(e),d(null)}},[h,d]),(0,o.createElement)(rs,(0,s.Z)({asChild:!0},f),(0,o.createElement)(r_,(0,s.Z)({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":rj(r.open)},e,{ref:(0,u.F)(t,i.onTriggerChange),onClick:t=>{var n;null===(n=e.onClick)||void 0===n||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,l.M)(e.onPointerMove,rV(t=>{a.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||c.current||(a.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:(0,l.M)(e.onPointerLeave,rV(e=>{var t,n;p();let i=null===(t=r.content)||void 0===t?void 0:t.getBoundingClientRect();if(i){let t=null===(n=r.content)||void 0===n?void 0:n.dataset.side,s="right"===t,o=i[s?"left":"right"],l=i[s?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+(s?-5:5),y:e.clientY},{x:o,y:i.top},{x:l,y:i.top},{x:l,y:i.bottom},{x:o,y:i.bottom}],side:t}),window.clearTimeout(h.current),h.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:(0,l.M)(e.onKeyDown,t=>{let i=""!==a.searchRef.current;if(!e.disabled&&(!i||" "!==t.key)&&t1[n.dir].includes(t.key)){var s;r.onOpenChange(!0),null===(s=r.content)||void 0===s||s.focus(),t.preventDefault()}})})))}),r$=(0,o.forwardRef)((e,t)=>{let r=rl(ru,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=rr(ru,e.__scopeMenu),c=ri(ru,e.__scopeMenu),h=rA("MenuSubContent",e.__scopeMenu),d=(0,o.useRef)(null),f=(0,u.e)(t,d);return(0,o.createElement)(t8.Provider,{scope:e.__scopeMenu},(0,o.createElement)(e7.z,{present:n||a.open},(0,o.createElement)(t8.Slot,{scope:e.__scopeMenu},(0,o.createElement)(rm,(0,s.Z)({id:h.contentId,"aria-labelledby":h.triggerId},i,{ref:f,align:"start",side:"rtl"===c.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;c.isUsingKeyboardRef.current&&(null===(t=d.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,l.M)(e.onFocusOutside,e=>{e.target!==h.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:(0,l.M)(e.onEscapeKeyDown,e=>{c.onClose(),e.preventDefault()}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=t2[c.dir].includes(e.key);if(t&&r){var n;a.onOpenChange(!1),null===(n=h.trigger)||void 0===n||n.focus(),e.preventDefault()}})})))))});function rj(e){return e?"open":"closed"}function rH(e){return"indeterminate"===e}function rq(e){return rH(e)?"indeterminate":e?"checked":"unchecked"}function rV(e){return t=>"mouse"===t.pointerType?e(t):void 0}let rF=e=>{let{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:s,modal:a=!0}=e,l=t6(t),[u,c]=(0,o.useState)(null),d=(0,o.useRef)(!1),f=(0,h.W)(s),p=(0,g.gm)(i);return(0,o.useEffect)(()=>{let e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,o.createElement)(e5,l,(0,o.createElement)(rt,{scope:t,open:r,onOpenChange:f,content:u,onContentChange:c},(0,o.createElement)(rn,{scope:t,onClose:(0,o.useCallback)(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:a},n)))},rU=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:i}=e,s=rr(ro,t);return(0,o.createElement)(ra,{scope:t,forceMount:r},(0,o.createElement)(e7.z,{present:r||s.open},(0,o.createElement)(e3,{asChild:!0,container:i},n)))},rW=e=>{let{__scopeMenu:t,children:r,open:n=!1,onOpenChange:i}=e,s=rr(rP,t),a=t6(t),[l,u]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),f=(0,h.W)(i);return(0,o.useEffect)(()=>(!1===s.open&&f(!1),()=>f(!1)),[s.open,f]),(0,o.createElement)(e5,a,(0,o.createElement)(rt,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:d},(0,o.createElement)(rD,{scope:t,contentId:N(),triggerId:N(),trigger:l,onTriggerChange:u},r)))},rB="DropdownMenu",[rz,rG]=(0,c.b)(rB,[t7]),rZ=t7(),[rQ,rK]=rz(rB),rX=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,a=rK("DropdownMenuTrigger",r),c=rZ(r);return(0,o.createElement)(rs,(0,s.Z)({asChild:!0},c),(0,o.createElement)(f.WV.button,(0,s.Z)({type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n},i,{ref:(0,u.F)(t,a.triggerRef),onPointerDown:(0,l.M)(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:(0,l.M)(e.onKeyDown,e=>{!n&&(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})))}),rJ=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rK("DropdownMenuContent",r),a=rZ(r),u=(0,o.useRef)(!1);return(0,o.createElement)(rd,(0,s.Z)({id:i.contentId,"aria-labelledby":i.triggerId},a,n,{ref:t,onCloseAutoFocus:(0,l.M)(e.onCloseAutoFocus,e=>{var t;u.current||null===(t=i.triggerRef.current)||void 0===t||t.focus(),u.current=!1,e.preventDefault()}),onInteractOutside:(0,l.M)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;(!i.modal||n)&&(u.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),rY=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rg,(0,s.Z)({},i,n,{ref:t}))}),r0=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rv,(0,s.Z)({},i,n,{ref:t}))}),r1=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rb,(0,s.Z)({},i,n,{ref:t}))}),r2=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rE,(0,s.Z)({},i,n,{ref:t}))}),r9=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rk,(0,s.Z)({},i,n,{ref:t}))}),r8=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rC,(0,s.Z)({},i,n,{ref:t}))}),r4=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rM,(0,s.Z)({},i,n,{ref:t}))}),r5=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rO,(0,s.Z)({},i,n,{ref:t}))}),r3=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(rN,(0,s.Z)({},i,n,{ref:t}))}),r7=(0,o.forwardRef)((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,i=rZ(r);return(0,o.createElement)(r$,(0,s.Z)({},i,n,{ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),r6=e=>{let{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:l,modal:u=!0}=e,c=rZ(t),h=(0,o.useRef)(null),[f=!1,p]=d({prop:i,defaultProp:a,onChange:l});return(0,o.createElement)(rQ,{scope:t,triggerId:N(),triggerRef:h,contentId:N(),open:f,onOpenChange:p,onOpenToggle:(0,o.useCallback)(()=>p(e=>!e),[p]),modal:u},(0,o.createElement)(rF,(0,s.Z)({},c,{open:f,onOpenChange:p,dir:n,modal:u}),r))},ne=rX,nt=e=>{let{__scopeDropdownMenu:t,...r}=e,n=rZ(t);return(0,o.createElement)(rU,(0,s.Z)({},n,r))},nr=rJ,nn=rY,ni=r0,ns=r1,no=r2,na=r9,nl=r8,nu=r4,nc=r5,nh=e=>{let{__scopeDropdownMenu:t,children:r,open:n,onOpenChange:i,defaultOpen:a}=e,l=rZ(t),[u=!1,c]=d({prop:n,defaultProp:a,onChange:i});return(0,o.createElement)(rW,(0,s.Z)({},l,{open:u,onOpenChange:c}),r)},nd=r3,nf=r7},8845:(e,t,r)=>{r.d(t,{z:()=>a});var n=r(1789),i=r(8867),s=r(328),o=r(4252);let a=e=>{let{present:t,children:r}=e,a=function(e){var t,r;let[s,a]=(0,n.useState)(),u=(0,n.useRef)({}),c=(0,n.useRef)(e),h=(0,n.useRef)("none"),[d,f]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,n.useReducer)((e,t)=>{let n=r[e][t];return null!=n?n:e},t));return(0,n.useEffect)(()=>{let e=l(u.current);h.current="mounted"===d?e:"none"},[d]),(0,o.b)(()=>{let t=u.current,r=c.current;if(r!==e){let n=h.current,i=l(t);e?f("MOUNT"):"none"===i||(null==t?void 0:t.display)==="none"?f("UNMOUNT"):r&&n!==i?f("ANIMATION_OUT"):f("UNMOUNT"),c.current=e}},[e,f]),(0,o.b)(()=>{if(s){let e=e=>{let t=l(u.current).includes(e.animationName);e.target===s&&t&&(0,i.flushSync)(()=>f("ANIMATION_END"))},t=e=>{e.target===s&&(h.current=l(u.current))};return s.addEventListener("animationstart",t),s.addEventListener("animationcancel",e),s.addEventListener("animationend",e),()=>{s.removeEventListener("animationstart",t),s.removeEventListener("animationcancel",e),s.removeEventListener("animationend",e)}}f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:(0,n.useCallback)(e=>{e&&(u.current=getComputedStyle(e)),a(e)},[])}}(t),u="function"==typeof r?r({present:a.isPresent}):n.Children.only(r),c=(0,s.e)(a.ref,u.ref);return"function"==typeof r||a.isPresent?(0,n.cloneElement)(u,{ref:c}):null};function l(e){return(null==e?void 0:e.animationName)||"none"}a.displayName="Presence"},4968:(e,t,r)=>{r.d(t,{WV:()=>a,jH:()=>l});var n=r(2296),i=r(1789),s=r(8867),o=r(1965);let a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=(0,i.forwardRef)((e,r)=>{let{asChild:s,...a}=e,l=s?o.g7:t;return(0,i.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,i.createElement)(l,(0,n.Z)({},a,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function l(e,t){e&&(0,s.flushSync)(()=>e.dispatchEvent(t))}},6798:(e,t,r)=>{r.d(t,{Ns:()=>G,fC:()=>B,gb:()=>_,q4:()=>P,l_:()=>z});var n=r(2296),i=r(1789),s=r(4968),o=r(8845),a=r(4089),l=r(328),u=r(5902),c=r(5029),h=r(4252),d=r(4441);let f="ScrollArea",[p,m]=(0,a.b)(f),[g,v]=p(f),y=(0,i.forwardRef)((e,t)=>{let{__scopeScrollArea:r,type:o="hover",dir:a,scrollHideDelay:u=600,...h}=e,[d,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),[v,y]=(0,i.useState)(null),[w,b]=(0,i.useState)(null),[_,E]=(0,i.useState)(null),[x,S]=(0,i.useState)(0),[k,C]=(0,i.useState)(0),[R,I]=(0,i.useState)(!1),[T,M]=(0,i.useState)(!1),O=(0,l.e)(t,e=>f(e)),P=(0,c.gm)(a);return(0,i.createElement)(g,{scope:r,type:o,dir:P,scrollHideDelay:u,scrollArea:d,viewport:p,onViewportChange:m,content:v,onContentChange:y,scrollbarX:w,onScrollbarXChange:b,scrollbarXEnabled:R,onScrollbarXEnabledChange:I,scrollbarY:_,onScrollbarYChange:E,scrollbarYEnabled:T,onScrollbarYEnabledChange:M,onCornerWidthChange:S,onCornerHeightChange:C},(0,i.createElement)(s.WV.div,(0,n.Z)({dir:P},h,{ref:O,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":k+"px",...e.style}})))}),w=(0,i.forwardRef)((e,t)=>{let{__scopeScrollArea:r,children:o,...a}=e,u=v("ScrollAreaViewport",r),c=(0,i.useRef)(null),h=(0,l.e)(t,c,u.onViewportChange);return(0,i.createElement)(i.Fragment,null,(0,i.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),(0,i.createElement)(s.WV.div,(0,n.Z)({"data-radix-scroll-area-viewport":""},a,{ref:h,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...e.style}}),(0,i.createElement)("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"}},o)))}),b="ScrollAreaScrollbar",_=(0,i.forwardRef)((e,t)=>{let{forceMount:r,...s}=e,o=v(b,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=o,u="horizontal"===e.orientation;return(0,i.useEffect)(()=>(u?a(!0):l(!0),()=>{u?a(!1):l(!1)}),[u,a,l]),"hover"===o.type?(0,i.createElement)(E,(0,n.Z)({},s,{ref:t,forceMount:r})):"scroll"===o.type?(0,i.createElement)(x,(0,n.Z)({},s,{ref:t,forceMount:r})):"auto"===o.type?(0,i.createElement)(S,(0,n.Z)({},s,{ref:t,forceMount:r})):"always"===o.type?(0,i.createElement)(k,(0,n.Z)({},s,{ref:t})):null}),E=(0,i.forwardRef)((e,t)=>{let{forceMount:r,...s}=e,a=v(b,e.__scopeScrollArea),[l,u]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=a.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),u(!0)},n=()=>{t=window.setTimeout(()=>u(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[a.scrollArea,a.scrollHideDelay]),(0,i.createElement)(o.z,{present:r||l},(0,i.createElement)(S,(0,n.Z)({"data-state":l?"visible":"hidden"},s,{ref:t})))}),x=(0,i.forwardRef)((e,t)=>{var r;let{forceMount:s,...a}=e,l=v(b,e.__scopeScrollArea),u="horizontal"===e.orientation,c=U(()=>f("SCROLL_END"),100),[h,f]=(r={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},(0,i.useReducer)((e,t)=>{let n=r[e][t];return null!=n?n:e},"hidden"));return(0,i.useEffect)(()=>{if("idle"===h){let e=window.setTimeout(()=>f("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(e)}},[h,l.scrollHideDelay,f]),(0,i.useEffect)(()=>{let e=l.viewport,t=u?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(f("SCROLL"),c()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[l.viewport,u,f,c]),(0,i.createElement)(o.z,{present:s||"hidden"!==h},(0,i.createElement)(k,(0,n.Z)({"data-state":"hidden"===h?"hidden":"visible"},a,{ref:t,onPointerEnter:(0,d.M)(e.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:(0,d.M)(e.onPointerLeave,()=>f("POINTER_LEAVE"))})))}),S=(0,i.forwardRef)((e,t)=>{let r=v(b,e.__scopeScrollArea),{forceMount:s,...a}=e,[l,u]=(0,i.useState)(!1),c="horizontal"===e.orientation,h=U(()=>{if(r.viewport){let e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;u(c?e:t)}},10);return W(r.viewport,h),W(r.content,h),(0,i.createElement)(o.z,{present:s||l},(0,i.createElement)(k,(0,n.Z)({"data-state":l?"visible":"hidden"},a,{ref:t})))}),k=(0,i.forwardRef)((e,t)=>{let{orientation:r="vertical",...s}=e,o=v(b,e.__scopeScrollArea),a=(0,i.useRef)(null),l=(0,i.useRef)(0),[u,c]=(0,i.useState)({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=j(u.viewport,u.content),d={...s,sizes:u,onSizesChange:c,hasThumb:!!(h>0&&h<1),onThumbChange:e=>a.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function f(e,t){return function(e,t,r,n="ltr"){let i=H(r),s=t||i/2,o=r.scrollbar.paddingStart+s,a=r.scrollbar.size-r.scrollbar.paddingEnd-(i-s),l=r.content-r.viewport;return V([o,a],"ltr"===n?[0,l]:[-1*l,0])(e)}(e,l.current,u,t)}return"horizontal"===r?(0,i.createElement)(C,(0,n.Z)({},d,{ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){let e=q(o.viewport.scrollLeft,u,o.dir);a.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollLeft=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollLeft=f(e,o.dir))}})):"vertical"===r?(0,i.createElement)(R,(0,n.Z)({},d,{ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){let e=q(o.viewport.scrollTop,u);a.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollTop=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollTop=f(e))}})):null}),C=(0,i.forwardRef)((e,t)=>{let{sizes:r,onSizesChange:s,...o}=e,a=v(b,e.__scopeScrollArea),[u,c]=(0,i.useState)(),h=(0,i.useRef)(null),d=(0,l.e)(t,h,a.onScrollbarXChange);return(0,i.useEffect)(()=>{h.current&&c(getComputedStyle(h.current))},[h]),(0,i.createElement)(M,(0,n.Z)({"data-orientation":"horizontal"},o,{ref:d,sizes:r,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":H(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(a.viewport){let n=a.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),function(e,t){return e>0&&e<t}(n,r)&&t.preventDefault()}},onResize:()=>{h.current&&a.viewport&&u&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:$(u.paddingLeft),paddingEnd:$(u.paddingRight)}})}}))}),R=(0,i.forwardRef)((e,t)=>{let{sizes:r,onSizesChange:s,...o}=e,a=v(b,e.__scopeScrollArea),[u,c]=(0,i.useState)(),h=(0,i.useRef)(null),d=(0,l.e)(t,h,a.onScrollbarYChange);return(0,i.useEffect)(()=>{h.current&&c(getComputedStyle(h.current))},[h]),(0,i.createElement)(M,(0,n.Z)({"data-orientation":"vertical"},o,{ref:d,sizes:r,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":H(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(a.viewport){let n=a.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),function(e,t){return e>0&&e<t}(n,r)&&t.preventDefault()}},onResize:()=>{h.current&&a.viewport&&u&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:$(u.paddingTop),paddingEnd:$(u.paddingBottom)}})}}))}),[I,T]=p(b),M=(0,i.forwardRef)((e,t)=>{let{__scopeScrollArea:r,sizes:o,hasThumb:a,onThumbChange:c,onThumbPointerUp:h,onThumbPointerDown:f,onThumbPositionChange:p,onDragScroll:m,onWheelScroll:g,onResize:y,...w}=e,_=v(b,r),[E,x]=(0,i.useState)(null),S=(0,l.e)(t,e=>x(e)),k=(0,i.useRef)(null),C=(0,i.useRef)(""),R=_.viewport,T=o.content-o.viewport,M=(0,u.W)(g),O=(0,u.W)(p),P=U(y,10);function D(e){k.current&&m({x:e.clientX-k.current.left,y:e.clientY-k.current.top})}return(0,i.useEffect)(()=>{let e=e=>{let t=e.target;(null==E?void 0:E.contains(t))&&M(e,T)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[R,E,T,M]),(0,i.useEffect)(O,[o,O]),W(E,P),W(_.content,P),(0,i.createElement)(I,{scope:r,scrollbar:E,hasThumb:a,onThumbChange:(0,u.W)(c),onThumbPointerUp:(0,u.W)(h),onThumbPositionChange:O,onThumbPointerDown:(0,u.W)(f)},(0,i.createElement)(s.WV.div,(0,n.Z)({},w,{ref:S,style:{position:"absolute",...w.style},onPointerDown:(0,d.M)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),k.current=E.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),D(e))}),onPointerMove:(0,d.M)(e.onPointerMove,D),onPointerUp:(0,d.M)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=C.current,_.viewport&&(_.viewport.style.scrollBehavior=""),k.current=null})})))}),O="ScrollAreaThumb",P=(0,i.forwardRef)((e,t)=>{let{forceMount:r,...s}=e,a=T(O,e.__scopeScrollArea);return(0,i.createElement)(o.z,{present:r||a.hasThumb},(0,i.createElement)(D,(0,n.Z)({ref:t},s)))}),D=(0,i.forwardRef)((e,t)=>{let{__scopeScrollArea:r,style:o,...a}=e,u=v(O,r),c=T(O,r),{onThumbPositionChange:h}=c,f=(0,l.e)(t,e=>c.onThumbChange(e)),p=(0,i.useRef)(),m=U(()=>{p.current&&(p.current(),p.current=void 0)},100);return(0,i.useEffect)(()=>{let e=u.viewport;if(e){let t=()=>{if(m(),!p.current){let t=F(e,h);p.current=t,h()}};return h(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[u.viewport,m,h]),(0,i.createElement)(s.WV.div,(0,n.Z)({"data-state":c.hasThumb?"visible":"hidden"},a,{ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:(0,d.M)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;c.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,d.M)(e.onPointerUp,c.onThumbPointerUp)}))}),A="ScrollAreaCorner",L=(0,i.forwardRef)((e,t)=>{let r=v(A,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&s?(0,i.createElement)(N,(0,n.Z)({},e,{ref:t})):null}),N=(0,i.forwardRef)((e,t)=>{let{__scopeScrollArea:r,...o}=e,a=v(A,r),[l,u]=(0,i.useState)(0),[c,h]=(0,i.useState)(0),d=!!(l&&c);return W(a.scrollbarX,()=>{var e;let t=(null===(e=a.scrollbarX)||void 0===e?void 0:e.offsetHeight)||0;a.onCornerHeightChange(t),h(t)}),W(a.scrollbarY,()=>{var e;let t=(null===(e=a.scrollbarY)||void 0===e?void 0:e.offsetWidth)||0;a.onCornerWidthChange(t),u(t)}),d?(0,i.createElement)(s.WV.div,(0,n.Z)({},o,{ref:t,style:{width:l,height:c,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}})):null});function $(e){return e?parseInt(e,10):0}function j(e,t){let r=e/t;return isNaN(r)?0:r}function H(e){let t=j(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function q(e,t,r="ltr"){let n=H(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=function(e,[t,r]){return Math.min(r,Math.max(t,e))}(e,"ltr"===r?[0,o]:[-1*o,0]);return V([0,o],[0,s-n])(a)}function V(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}let F=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){let s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,a=r.top!==s.top;(o||a)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function U(e,t){let r=(0,u.W)(e),n=(0,i.useRef)(0);return(0,i.useEffect)(()=>()=>window.clearTimeout(n.current),[]),(0,i.useCallback)(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function W(e,t){let r=(0,u.W)(t);(0,h.b)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}let B=y,z=w,G=L},7604:(e,t,r)=>{r.d(t,{f:()=>c});var n=r(2296),i=r(1789),s=r(4968);let o="horizontal",a=["horizontal","vertical"],l=(0,i.forwardRef)((e,t)=>{let{decorative:r,orientation:a=o,...l}=e,c=u(a)?a:o;return(0,i.createElement)(s.WV.div,(0,n.Z)({"data-orientation":c},r?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},l,{ref:t}))});function u(e){return a.includes(e)}l.propTypes={orientation(e,t,r){let n=e[t],i=String(n);return n&&!u(n)?Error(`Invalid prop \`orientation\` of value \`${i}\` supplied to \`${r}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${o}\`.`):null}};let c=l},1965:(e,t,r)=>{r.d(t,{g7:()=>o});var n=r(2296),i=r(1789),s=r(328);let o=(0,i.forwardRef)((e,t)=>{let{children:r,...s}=e,o=i.Children.toArray(r),l=o.find(u);if(l){let e=l.props.children,r=o.map(t=>t!==l?t:i.Children.count(e)>1?i.Children.only(null):(0,i.isValidElement)(e)?e.props.children:null);return(0,i.createElement)(a,(0,n.Z)({},s,{ref:t}),(0,i.isValidElement)(e)?(0,i.cloneElement)(e,void 0,r):null)}return(0,i.createElement)(a,(0,n.Z)({},s,{ref:t}),r)});o.displayName="Slot";let a=(0,i.forwardRef)((e,t)=>{let{children:r,...n}=e;return(0,i.isValidElement)(r)?(0,i.cloneElement)(r,{...function(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{s(...e),i(...e)}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props),ref:t?(0,s.F)(t,r.ref):r.ref}):i.Children.count(r)>1?i.Children.only(null):null});a.displayName="SlotClone";let l=({children:e})=>(0,i.createElement)(i.Fragment,null,e);function u(e){return(0,i.isValidElement)(e)&&e.type===l}},5902:(e,t,r)=>{r.d(t,{W:()=>i});var n=r(1789);function i(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e}),(0,n.useMemo)(()=>(...e)=>{var r;return null===(r=t.current)||void 0===r?void 0:r.call(t,...e)},[])}},4252:(e,t,r)=>{r.d(t,{b:()=>i});var n=r(1789);let i=(null==globalThis?void 0:globalThis.document)?n.useLayoutEffect:()=>{}},8680:(e,t,r)=>{r.d(t,{j:()=>s});let n=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,i=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n);else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(n&&(n+=" "),n+=t);return n},s=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:a}=t,l=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],i=null==a?void 0:a[e];if(null===t)return null;let s=n(t)||n(i);return o[e][s]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return i(e,l,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...u}[t]):({...a,...u})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},3054:(e,t,r)=>{let n;r.d(t,{qB:()=>j});var i,s=r(5474),o=r(3671);function a(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}function l(e,t,r,n){let i=a(t);if("object"==typeof n&&(n=`ConvexError ${JSON.stringify(n.errorData,null,2)}`),"info"===e){let e=n.match(/^\[.*?\] /);if(null===e){console.error(`[CONVEX ${i}(${r})] Could not parse console.log`);return}let t=n.slice(1,e[0].length-2);console.log(`%c[CONVEX ${i}(${r})] [${t}]`,"color:rgb(0, 145, 255)",n.slice(e[0].length))}else console.error(`[CONVEX ${i}(${r})] ${n}`)}function u(e,t,r){let n=a(e);return`[CONVEX ${n}(${t})] ${r.errorMessage}
  Called by client`}function c(e,t){return t.data=e.errorData,t}function h(e){let t,r;let n=e.split(":");return 1===n.length?(t=n[0],r="default"):(t=n.slice(0,n.length-1).join(":"),r=n[n.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function d(e,t){return JSON.stringify({udfPath:h(e),args:(0,o.D2)(t)})}class f{constructor(){this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1}hasSyncedPastLastReconnect(){return 0===this.outstandingQueriesOlderThanRestart.size&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r){let n=h(e),i=d(n,t),s=this.querySet.get(i);if(void 0!==s)return s.numSubscribers+=1,{queryToken:i,modification:null,unsubscribe:()=>this.removeSubscriber(i)};{let e=this.nextQueryId++;this.querySet.set(i,{id:e,canonicalizedUdfPath:n,args:t,numSubscribers:1,journal:r}),this.queryIdToToken.set(e,i);let s=this.querySetVersion;return{queryToken:i,modification:{type:"ModifyQuerySet",baseVersion:s,newVersion:++this.querySetVersion,modifications:[{type:"Add",queryId:e,udfPath:n,args:[(0,o.D2)(t)],journal:r}]},unsubscribe:()=>this.removeSubscriber(i)}}}transition(e){for(let t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);let e=t.journal;if(void 0!==e){let r=this.queryIdToToken.get(t.queryId);void 0!==r&&(this.querySet.get(r).journal=e)}break}case"QueryRemoved":this.outstandingQueriesOlderThanRestart.delete(t.queryId);break;default:throw Error(`Invalid modification ${t.type}`)}}queryId(e,t){let r=d(h(e),t),n=this.querySet.get(r);return void 0!==n?n.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){return this.auth={tokenType:"User",value:e},{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}}setAdminAuth(e,t){let r={tokenType:"Admin",value:e,impersonating:t};return this.auth=r,{type:"Authenticate",baseVersion:this.identityVersion++,...r}}clearAuth(){return this.auth=void 0,this.markAuthCompletion(),{type:"Authenticate",tokenType:"None",baseVersion:this.identityVersion++}}hasAuth(){return!!this.auth}isNewAuth(e){return this.auth?.value!==e}queryPath(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){return this.querySet.get(e)?.journal}restart(e){this.outstandingQueriesOlderThanRestart.clear();let t=[];for(let r of this.querySet.values()){let n={type:"Add",queryId:r.id,udfPath:r.canonicalizedUdfPath,args:[(0,o.D2)(r.args)],journal:r.journal};t.push(n),e.has(r.id)||this.outstandingQueriesOlderThanRestart.add(r.id)}this.querySetVersion=1;let r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;let n={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,n]}removeSubscriber(e){let t=this.querySet.get(e);return t.numSubscribers>1?(t.numSubscribers-=1,null):(this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id),{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:[{type:"Remove",queryId:t.id}]})}}class p{constructor(){this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){return new Promise(r=>{this.inflightRequests.set(e.requestId,{message:e,status:{status:t?"Requested":"NotSent",requestedAt:new Date,onResult:r}})})}onResponse(e){let t;let r=this.inflightRequests.get(e.requestId);if(void 0===r||"Completed"===r.status.status)return null;let n="Mutation"===r.message.type?"mutation":"action",i=r.message.udfPath;for(let t of e.logLines)l("info",n,i,t);let s=r.status;if(e.success)t=()=>s.onResult({success:!0,logLines:e.logLines,value:(0,o.sq)(e.result,!0)});else{let r=e.result,{errorData:a}=e;l("error",n,i,r),t=()=>s.onResult({success:!1,errorMessage:r,errorData:void 0!==a?(0,o.sq)(a):void 0,logLines:e.logLines})}return"ActionResponse"!==e.type&&e.success?(r.status={status:"Completed",ts:e.ts,onResolve:t},null):(t(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),e.requestId)}removeCompleted(e){let t=new Set;for(let[r,n]of this.inflightRequests.entries()){let i=n.status;"Completed"===i.status&&i.ts.lessThanOrEqual(e)&&(i.onResolve(),t.add(r),this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());let e=[];for(let[t,r]of this.inflightRequests){if("NotSent"===r.status.status){r.status.status="Requested",e.push(r.message);continue}if("Mutation"===r.message.type)e.push(r.message);else{if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),"Completed"===r.status.status)throw Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}hasIncompleteRequests(){for(let e of this.inflightRequests.values())if("Requested"===e.status.status)return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return 0===this.requestsOlderThanRestart.size}timeOfOldestInflightRequest(){if(0===this.inflightRequests.size)return null;let e=Date.now();for(let t of this.inflightRequests.values())"Completed"!==t.status.status&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}}var m=r(4770),g=r(4343),v=r(7425);class y{constructor(e){this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){let r=(0,g.Op)(t[0]),n=(0,m.$P)(e),i=this.queryResults.get(d(n,r));if(void 0!==i)return y.queryValue(i.result)}getAllQueries(e){let t=[],r=(0,m.$P)(e);for(let e of this.queryResults.values())e.udfPath===h(r)&&t.push({args:e.args,value:y.queryValue(e.result)});return t}setQuery(e,t,r){let n=(0,g.Op)(t),i=(0,m.$P)(e),s=d(i,n);this.queryResults.set(s,{udfPath:i,args:n,result:void 0===r?void 0:{success:!0,value:r,logLines:[]}}),this.modifiedQueries.push(s)}static queryValue(e){return void 0===e?void 0:e.success?e.value:void 0}}class w{constructor(){this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(e=>!t.has(e.mutationId));let r=this.queryResults;this.queryResults=new Map(e);let n=new y(this.queryResults);for(let e of this.optimisticUpdates)e.update(n);let i=[];for(let[e,t]of this.queryResults){let n=r.get(e);(void 0===n||n.result!==t.result)&&i.push(e)}return i}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});let r=new y(this.queryResults);return e(r),r.modifiedQueries}queryResult(e){let t=this.queryResults.get(e);if(void 0===t)return;let r=t.result;if(void 0!==r){if(r.success)return r.value;if(void 0!==r.errorData)throw c(r,new v.P(u("query",t.udfPath,r)));throw Error(u("query",t.udfPath,r))}}hasQueryResult(e){return void 0!==this.queryResults.get(e)}queryLogs(e){let t=this.queryResults.get(e);return t?.result?.logLines}}class b{static isLong(e){return!0===(e&&e.__isUnsignedLong__)}constructor(e,t){this.low=0|e,this.high=0|t,this.__isUnsignedLong__=!0}static fromBytesLE(e){return new b(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){let e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?_:e>=x?S:new b(e%E|0,e/E|0)}toString(){return(BigInt(this.high)*BigInt(E)+BigInt(this.low)).toString()}equals(e){return b.isLong(e)||(e=b.fromValue(e)),(this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return(b.isLong(e)||(e=b.fromValue(e)),this.equals(e))?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return 0>=this.comp(e)}static fromValue(e){return"number"==typeof e?b.fromNumber(e):new b(e.low,e.high)}}let _=new b(0,0),E=4294967296,x=18446744073709552e3,S=new b(-1,-1);class k{constructor(e){this.version={querySet:0,ts:b.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e}transition(e){let t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}`);for(let t of e.modifications)switch(t.type){case"QueryUpdated":{let e=this.queryPath(t.queryId);if(e)for(let r of t.logLines)l("info","query",e,r);let r=(0,o.sq)(t.value??null,!0);this.remoteQuerySet.set(t.queryId,{success:!0,value:r,logLines:t.logLines});break}case"QueryFailed":{let e=this.queryPath(t.queryId);if(e)for(let r of t.logLines)l("info","query",e,r);let{errorData:r}=t;this.remoteQuerySet.set(t.queryId,{success:!1,errorMessage:t.errorMessage,errorData:void 0!==r?(0,o.sq)(r):void 0,logLines:t.logLines});break}case"QueryRemoved":this.remoteQuerySet.delete(t.queryId);break;default:throw Error(`Invalid modification ${t.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function C(e){let t=o.DS.toByteArray(e);return b.fromBytesLE(Array.from(t))}class R{constructor(e,t,r,n,i){this.webSocketConstructor=n,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t,this.onMessage=r,this.verbose=i,this.connect()}connect(){if("stopped"===this.socket.state)return;if("disconnected"!==this.socket.state&&"paused"!==this.socket.state)throw Error("Didn't start connection from disconnected state: "+this.socket.state);let e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.socket={state:"connecting",ws:e},this.resetServerInactivityTimeout(),e.onopen=()=>{if(this._logVerbose("begin ws.onopen"),"connecting"!==this.socket.state)throw Error("onopen called with socket not in connecting state");this.socket={state:"ready",ws:e},this.resetServerInactivityTimeout(),this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason}),"InitialConnect"!==this.lastCloseReason&&console.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=e=>{let t=e.message;console.log(`WebSocket error: ${t}`)},e.onmessage=e=>{this.resetServerInactivityTimeout();let t=function(e){switch(e.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...e};case"MutationResponse":if(e.success)return{...e,ts:C(e.ts)};return{...e};case"Transition":return{...e,startVersion:{...e.startVersion,ts:C(e.startVersion.ts)},endVersion:{...e.endVersion,ts:C(e.endVersion.ts)}}}}(JSON.parse(e.data));this._logVerbose(`received ws message with type ${t.type}`),this.onMessage(t).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=e=>{if(this._logVerbose("begin ws.onclose"),null===this.lastCloseReason&&(this.lastCloseReason=e.reason??"OnCloseInvoked"),1e3!==e.code&&1001!==e.code&&1005!==e.code&&4040!==e.code){let t=`WebSocket closed with code ${e.code}`;e.reason&&(t+=`: ${e.reason}`),console.log(t)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){if(this._logVerbose(`sending message with type ${e.type}`),"ready"===this.socket.state){let t=JSON.stringify(function(e){switch(e.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...e};case"Connect":if(void 0!==e.maxObservedTimestamp)return{...e,maxObservedTimestamp:function(e){let t=new Uint8Array(e.toBytesLE());return o.DS.fromByteArray(t)}(e.maxObservedTimestamp)};return{...e,maxObservedTimestamp:void 0}}}(e));try{this.socket.ws.send(t)}catch(e){console.log(`Failed to send message on WebSocket, reconnecting: ${e}`),this.closeAndReconnect("FailedToSendMessage")}return!0}return!1}resetServerInactivityTimeout(){"stopped"===this.socket.state&&(null!==this.reconnectDueToServerInactivityTimeout&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};let e=this.nextBackoff();console.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"stopped":case"paused":return;case"connecting":case"ready":this.lastCloseReason=e,this.close(),this.scheduleReconnect();return;default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"stopped":case"paused":return;case"connecting":case"ready":this.socket.ws.onclose=()=>{},this._logVerbose("ws.close called"),this.socket.ws.close();return;default:this.socket}}stop(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"stopped":case"paused":case"disconnected":case"connecting":case"ready":if(this.close(),"ready"===this.socket.state||"connecting"===this.socket.state){let e=this.socket.ws;return this.socket={state:"stopped"},new Promise(t=>{e.onclose=e=>t()})}return this.socket={state:"stopped"},Promise.resolve();default:throw this.socket,Error(`Invalid websocket state: ${this.socket.state}`)}}pause(){switch(this.socket.state){case"stopped":return;case"paused":case"disconnected":case"connecting":case"ready":this.close(),this.socket={state:"paused"};return;default:this.socket}}resume(){switch(this.socket.state){case"paused":break;case"stopped":return;case"connecting":case"ready":case"disconnected":throw Error("`resume()` is only valid after `pause()`");default:this.socket}this.connect()}_logVerbose(e){this.verbose&&console.debug(`${new Date().toISOString()} ${e}`)}nextBackoff(){let e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;let t=Math.min(e,this.maxBackoff);return t+t*(Math.random()-.5)}}function I(e){this.message=e}I.prototype=Error(),I.prototype.name="InvalidCharacterError";var T=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new I("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,o="";n=t.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)&&(o+=String.fromCharCode(255&r>>(-2*i&6))))n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function M(e){this.message=e}M.prototype=Error(),M.prototype.name="InvalidTokenError";let O=function(e,t){if("string"!=typeof e)throw new M("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t,r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return t=r,decodeURIComponent(T(t).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return T(r)}}(e.split(".")[r]))}catch(e){throw new M("Invalid token specified: "+e.message)}};class P{constructor(e,{authenticate:t,pauseSocket:r,resumeSocket:n,clearAuth:i,verbose:s}){this.authState={state:"noAuth"},this.configVersion=0,this.syncState=e,this.authenticate=t,this.pauseSocket=r,this.resumeSocket=n,this.clearAuth=i,this.verbose=s}async setConfig(e,t){this.resetAuthState();let r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()))}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if("waitingForServerConfirmationOfCachedToken"===this.authState.state){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}"waitingForServerConfirmationOfFreshToken"!==this.authState.state||(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){let{baseVersion:t}=e;if(null!=t){if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e);return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if("noAuth"===this.authState.state||"waitingForServerConfirmationOfFreshToken"===this.authState.state){console.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),"noAuth"!==this.authState.state&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this._logVerbose("attempting to reauthenticate"),await this.pauseSocket();let t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});if(t.isFromOutdatedConfig){await this.resumeSocket();return}t.value&&this.syncState.isNewAuth(t.value)?(this.syncState.setAuth(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:"notRefetching"===this.authState.state||"waitingForScheduledRefetch"===this.authState.state})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),await this.resumeSocket()}async refetchToken(){if("noAuth"===this.authState.state)return;this._logVerbose("refetching auth token");let e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)))}scheduleTokenRefetch(e){if("noAuth"===this.authState.state)return;let t=this.decodeToken(e);if(!t){console.error("Auth token is not a valid JWT, cannot refetch the token");return}let{iat:r,exp:n}=t;if(!r||!n){console.error("Auth token does not have required fields, cannot refetch the token");return}let i=(n-r-2)*1e3;if(i<=0){console.error("Auth token does not live long enough, cannot refetch the token");return}let s=setTimeout(()=>{this.refetchToken()},i);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:s,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${i}ms`)}async fetchTokenAndGuardAgainstRace(e,t){let r=++this.configVersion,n=await e(t);return this.configVersion!==r?{isFromOutdatedConfig:!0}:{isFromOutdatedConfig:!1,value:n}}stop(){this.resetAuthState(),this.configVersion++}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){"waitingForScheduledRefetch"===this.authState.state&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return O(e)}catch(e){return null}}_logVerbose(e){this.verbose&&console.debug(`${new Date().toISOString()} ${e} [v${this.configVersion}]`)}}let D=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function A(e){let t=e.name.slice(6);return{name:t=t.charAt(0).toLowerCase()+t.slice(1),startTime:e.startTime}}class L{constructor(e,t,r){let n;if(this.firstMessageReceived=!1,this.mark=e=>{if(this.debug){var t;t=this.sessionId,"undefined"!=typeof performance&&performance.mark&&performance.mark(e,{detail:{sessionId:t}})}},"object"==typeof e)throw Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(0,g.a0)(e);let i=(r={...r}).webSocketConstructor;if(!i&&"undefined"==typeof WebSocket)throw Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");i=i||WebSocket,this.verbose=r.verbose??!1,this.debug=r.reportDebugInfoToConvex??!1,this.address=e;let o=e.search("://");if(-1===o)throw Error("Provided address was not an absolute URL.");let a=e.substring(o+3),l=e.substring(0,o);if("http"===l)n="ws";else if("https"===l)n="wss";else throw Error(`Unknown parent protocol ${l}`);let u=`${n}://${a}/api/${s.i}/sync`;this.state=new f,this.remoteQuerySet=new k(e=>this.state.queryPath(e)),this.requestManager=new p,this.authenticationManager=new P(this.state,{authenticate:e=>{let t=this.state.setAuth(e);this.webSocketManager.sendMessage(t)},pauseSocket:()=>this.webSocketManager.pause(),resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()},verbose:this.verbose}),this.optimisticQueryResults=new w,this.onTransition=t,this.nextRequestId=0,this.sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});let{unsavedChangesWarning:c}=r;if(!0===c)throw Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.");this.webSocketManager=new R(u,e=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...e,type:"Connect",sessionId:this.sessionId,maxObservedTimestamp:this.maxObservedTimestamp});let t=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new k(e=>this.state.queryPath(e));let[r,n]=this.state.restart(t);for(let e of(n&&this.webSocketManager.sendMessage(n),this.webSocketManager.sendMessage(r),this.requestManager.restart()))this.webSocketManager.sendMessage(e)},e=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),e.type){case"Transition":{this.observedTimestamp(e.endVersion.ts),this.authenticationManager.onTransition(e),this.remoteQuerySet.transition(e),this.state.transition(e);let t=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(t);break}case"MutationResponse":{e.success&&this.observedTimestamp(e.ts);let t=this.requestManager.onResponse(e);t&&this.notifyOnQueryResultChanges(new Set([t]));break}case"ActionResponse":this.requestManager.onResponse(e);break;case"AuthError":this.authenticationManager.onAuthError(e);break;case"FatalError":{let t=function(e){let t=`[CONVEX FATAL ERROR] ${e}`;return console.error(t),Error(t)}(e.error);throw this.webSocketManager.stop(),t}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},i,this.verbose),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(void 0===this.maxObservedTimestamp||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){let t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(let[e,n]of t){let t=this.state.queryToken(e);if(null!==t){let i={result:n,udfPath:this.state.queryPath(e),args:this.state.queryArgs(e)};r.set(t,i)}}this.onTransition(this.optimisticQueryResults.ingestQueryResultsFromServer(r,e))}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){let r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){let e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){let n=(0,g.Op)(t),{modification:i,queryToken:s,unsubscribe:o}=this.state.subscribe(e,n,r?.journal);return null!==i&&this.webSocketManager.sendMessage(i),{queryToken:s,unsubscribe:()=>{let e=o();e&&this.webSocketManager.sendMessage(e)}}}localQueryResult(e,t){let r=d(e,(0,g.Op)(t));return this.optimisticQueryResults.queryResult(r)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){let r=d(e,(0,g.Op)(t));return this.optimisticQueryResults.queryLogs(r)}queryJournal(e,t){let r=d(e,(0,g.Op)(t));return this.state.queryJournal(r)}connectionState(){return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:"ready"===this.webSocketManager.socketState(),timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,t,r){let n=await this.mutationInternal(e,t,r);if(!n.success){if(void 0!==n.errorData)throw c(n,new v.P(u("mutation",e,n)));throw Error(u("mutation",e,n))}return n.value}async mutationInternal(e,t,r){let n=(0,g.Op)(t);this.tryReportLongDisconnect();let i=this.nextRequestId;if(this.nextRequestId++,void 0!==r){let e=r.optimisticUpdate;if(void 0!==e){let t=this.optimisticQueryResults.applyOptimisticUpdate(t=>{e(t,n)},i);this.onTransition(t)}}let s={type:"Mutation",requestId:i,udfPath:e,args:[(0,o.D2)(n)]},a=this.webSocketManager.sendMessage(s);return this.requestManager.request(s,a)}async action(e,t){let r=await this.actionInternal(e,t);if(!r.success){if(void 0!==r.errorData)throw c(r,new v.P(u("action",e,r)));throw Error(u("action",e,r))}return r.value}async actionInternal(e,t){let r=(0,g.Op)(t),n=this.nextRequestId;this.nextRequestId++,this.tryReportLongDisconnect();let i={type:"Action",requestId:n,udfPath:e,args:[(0,o.D2)(r)]},s=this.webSocketManager.sendMessage(i);return this.requestManager.request(i,s)}async close(){return this.authenticationManager.stop(),this.webSocketManager.stop()}_logVerbose(e){this.verbose&&console.debug(`${new Date().toISOString()} ${e}`)}reportMarks(){if(this.debug){let e=function(e){if("undefined"==typeof performance||!performance.getEntriesByName)return[];let t=[];for(let r of D){let n=performance.getEntriesByName(r).filter(e=>"mark"===e.entryType).filter(t=>t.detail.sessionId===e);t.push(...n)}return t.map(A)}(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;let e=this.connectionState().timeOfOldestInflightRequest;if(null===e||Date.now()-e.getTime()<=6e4)return;let t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${s.i}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(e=>{e.ok||console.warn("Analytics request failed with response:",e.body)}).catch(e=>{console.warn("Analytics response failed with error:",e)})}}var N=r(8188),$=r(1017);class j{get closed(){return this._closed}get client(){if(this._client)return this._client;throw Error("ConvexClient is disabled")}constructor(e,t={}){(0,g.a0)(e);let{disabled:r,...i}=t;this._closed=!1,this.disabled=!!r,!n||"webSocketConstructor"in i||"undefined"!=typeof WebSocket||(i.webSocketConstructor=n),"unsavedChangesWarning"in i||(i.unsavedChangesWarning=!1),this.disabled||(this._client=new L(e,e=>this._transition(e),i)),this.listeners=new Set}onUpdate(e,t,r,n){if(this.disabled){let e=()=>{};return Object.assign(e,{unsubscribe:e,getCurrentValue:()=>void 0,getQueryLogs:()=>void 0}),e}let{queryToken:i,unsubscribe:s}=this.client.subscribe((0,m.$P)(e),t),o={queryToken:i,callback:r,onError:n,unsubscribe:s,hasEverRun:!1,query:e,args:t};this.listeners.add(o),this.queryResultReady(i)&&void 0===this.callNewListenersWithCurrentValuesTimer&&(this.callNewListenersWithCurrentValuesTimer=setTimeout(()=>this.callNewListenersWithCurrentValues(),0));let a={unsubscribe:()=>{this.closed||(this.listeners.delete(o),s())},getCurrentValue:()=>this.client.localQueryResultByToken(i),getQueryLogs:()=>this.client.localQueryLogs(i)},l=a.unsubscribe;return Object.assign(l,a),l}callNewListenersWithCurrentValues(){this.callNewListenersWithCurrentValuesTimer=void 0,this._transition([],!0)}queryResultReady(e){return this.client.hasLocalQueryResultByToken(e)}async close(){if(!this.disabled)return this.listeners.clear(),this._closed=!0,this.client.close()}setAuth(e,t){this.client.setAuth(e,t??(()=>{}))}setAdminAuth(e,t){if(this.closed)throw Error("ConvexClient has already been closed.");this.disabled||this.client.setAdminAuth(e,t)}_transition(e,t=!1){for(let r of this.listeners){let{callback:n,queryToken:i,onError:s,hasEverRun:o}=r;if(e.includes(i)||t&&!o&&this.client.hasLocalQueryResultByToken(i)){let e;r.hasEverRun=!0;try{e=this.client.localQueryResultByToken(i)}catch(e){if(!(e instanceof Error))throw e;s?s(e,"Second argument to onUpdate onError is reserved for later use"):Promise.reject(e);continue}n(e,"Second argument to onUpdate callback is reserved for later use")}}}async mutation(e,t){if(this.disabled)throw Error("ConvexClient is disabled");return await this.client.mutation((0,m.$P)(e),t)}async action(e,t){if(this.disabled)throw Error("ConvexClient is disabled");return await this.client.action((0,m.$P)(e),t)}async query(e,t){if(this.disabled)throw Error("ConvexClient is disabled");let r=this.client.localQueryResult((0,m.$P)(e),t);return void 0!==r?r:new Promise((r,n)=>{let{unsubscribe:i}=this.onUpdate(e,t,e=>{i(),r(e)},e=>{i(),n(e)})})}}let H=(0,N.createRequire)((0,$.resolve)("."));var q=Object.create,V=Object.defineProperty,F=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,W=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,z=(i=function(e){if(void 0!==H)return H.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},void 0!==H?H:"undefined"!=typeof Proxy?new Proxy(i,{get:(e,t)=>(void 0!==H?H:e)[t]}):i),G=(e,t)=>function(){return t||(0,e[U(e)[0]])((t={exports:{}}).exports,t),t.exports},Z=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of U(t))B.call(e,i)||i===r||V(e,i,{get:()=>t[i],enumerable:!(n=F(t,i))||n.enumerable});return e},Q=(e,t,r)=>(r=null!=e?q(W(e)):{},Z(!t&&e&&e.__esModule?r:V(r,"default",{value:e,enumerable:!0}),e)),K=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/stream.js"(e,t){var{Duplex:r}=z("stream");function n(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}t.exports=function(e,t){let o=!0,a=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()}),e.once("error",function(e){a.destroyed||(o=!1,a.destroy(e))}),e.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(t,r){if(e.readyState===e.CLOSED){r(t),process.nextTick(n,a);return}let i=!1;e.once("error",function(e){i=!0,r(e)}),e.once("close",function(){i||r(t),process.nextTick(n,a)}),o&&e.terminate()},a._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",function(){a._final(t)});return}null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){if(e.readyState===e.CONNECTING){e.once("open",function(){a._write(t,r,n)});return}e.send(t,n)},a.on("end",i),a.on("error",s),a}}}),X=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/constants.js"(e,t){t.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}}}),J=G({"../common/temp/node_modules/.pnpm/node-gyp-build@4.6.1/node_modules/node-gyp-build/node-gyp-build.js"(e,t){var r=z("fs"),n=z("path"),i=z("os"),s=process.config&&process.config.variables||{},o=!!process.env.PREBUILDS_ONLY,a=process.versions.modules,l=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?"electron":process.versions&&process.versions.nw?"node-webkit":"node",u=process.env.npm_config_arch||i.arch(),c=process.env.npm_config_platform||i.platform(),h=process.env.LIBC||("linux"===c&&r.existsSync("/etc/alpine-release")?"musl":"glibc"),d=process.env.ARM_VERSION||("arm64"===u?"8":s.arm_version)||"",f=(process.versions.uv||"").split(".")[0];function p(e){return H(p.resolve(e))}function m(e){try{return r.readdirSync(e)}catch(e){return[]}}function g(e,t){var r=m(e).filter(t);return r[0]&&n.join(e,r[0])}function v(e){return/\.node$/.test(e)}function y(e){var t=e.split("-");if(2===t.length){var r=t[0],n=t[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:e,platform:r,architectures:n}}}function w(e,t){return function(r){return null!=r&&r.platform===e&&r.architectures.includes(t)}}function b(e,t){return e.architectures.length-t.architectures.length}function _(e){var t=e.split("."),r=t.pop(),n={file:e,specificity:0};if("node"===r){for(var i=0;i<t.length;i++){var s=t[i];if("node"===s||"electron"===s||"node-webkit"===s)n.runtime=s;else if("napi"===s)n.napi=!0;else if("abi"===s.slice(0,3))n.abi=s.slice(3);else if("uv"===s.slice(0,2))n.uv=s.slice(2);else if("armv"===s.slice(0,4))n.armv=s.slice(4);else{if("glibc"!==s&&"musl"!==s)continue;n.libc=s}n.specificity++}return n}}function E(e,t){return function(r){return null!=r&&(r.runtime===e||!!("node"===r.runtime&&r.napi))&&(r.abi===t||!!r.napi)&&(!r.uv||r.uv===f)&&(!r.armv||r.armv===d)&&(!r.libc||r.libc===h)}}function x(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}t.exports=p,p.resolve=p.path=function(e){e=n.resolve(e||".");try{var t=H(n.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}if(!o){var r=g(n.join(e,"build/Release"),v);if(r)return r;var i=g(n.join(e,"build/Debug"),v);if(i)return i}var s=S(e);if(s)return s;var p=S(n.dirname(process.execPath));if(p)return p;throw Error("No native build was found for "+["platform="+c,"arch="+u,"runtime="+l,"abi="+a,"uv="+f,d?"armv="+d:"","libc="+h,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"","webpack=true"].filter(Boolean).join(" ")+"\n    loaded from: "+e+"\n");function S(e){var t=m(n.join(e,"prebuilds")).map(y).filter(w(c,u)).sort(b)[0];if(t){var r=n.join(e,"prebuilds",t.name),i=m(r).map(_).filter(E(l,a)).sort(x(l))[0];if(i)return n.join(r,i.file)}}},p.parseTags=_,p.matchTags=E,p.compareTags=x,p.parseTuple=y,p.matchTuple=w,p.compareTuples=b}}),Y=G({"../common/temp/node_modules/.pnpm/node-gyp-build@4.6.1/node_modules/node-gyp-build/index.js"(e,t){"function"==typeof process.addon?t.exports=process.addon.bind(process):t.exports=J()}}),ee=G({"../common/temp/node_modules/.pnpm/bufferutil@4.0.7/node_modules/bufferutil/fallback.js"(e,t){t.exports={mask:(e,t,r,n,i)=>{for(var s=0;s<i;s++)r[n+s]=e[s]^t[3&s]},unmask:(e,t)=>{let r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}}}}),et=G({"../common/temp/node_modules/.pnpm/bufferutil@4.0.7/node_modules/bufferutil/index.js"(e,t){try{t.exports=Y()(__dirname)}catch(e){t.exports=ee()}}}),er=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/buffer-util.js"(e,t){var{EMPTY_BUFFER:r}=X(),n=Buffer[Symbol.species];function i(e,t,r,n,i){for(let s=0;s<i;s++)r[n+s]=e[s]^t[3&s]}function s(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(t.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];let i=Buffer.allocUnsafe(t),s=0;for(let t=0;t<e.length;t++){let r=e[t];i.set(r,s),s+=r.length}return s<t?new n(i.buffer,i.byteOffset,s):i},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){let r;return(e.readOnly=!0,Buffer.isBuffer(t))?t:(t instanceof ArrayBuffer?r=new n(t):ArrayBuffer.isView(t)?r=new n(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r)},unmask:s},!process.env.WS_NO_BUFFER_UTIL)try{let e=et();t.exports.mask=function(t,r,n,s,o){o<48?i(t,r,n,s,o):e.mask(t,r,n,s,o)},t.exports.unmask=function(t,r){t.length<32?s(t,r):e.unmask(t,r)}}catch(e){}}}),en=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/limiter.js"(e,t){var r=Symbol("kDone"),n=Symbol("kRun"),i=class{constructor(e){this[r]=()=>{this.pending--,this[n]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[n]()}[n](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[r])}}};t.exports=i}}),ei=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/permessage-deflate.js"(e,t){var r,n=z("zlib"),i=er(),s=en(),{kStatusCode:o}=X(),a=Buffer[Symbol.species],l=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),c=Symbol("total-length"),h=Symbol("callback"),d=Symbol("buffers"),f=Symbol("error"),p=class{constructor(e,t,n){this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,r||(r=new s(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!r)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==r)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=r})}),e}decompress(e,t,n){r.add(r=>{this._decompress(e,t,(e,t)=>{r(),n(e,t)})})}compress(e,t,n){r.add(r=>{this._compress(e,t,(e,t)=>{r(),n(e,t)})})}_decompress(e,t,r){let s=this._isServer?"client":"server";if(!this._inflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[c]=0,this._inflate[d]=[],this._inflate.on("error",v),this._inflate.on("data",g)}this._inflate[h]=r,this._inflate.write(e),t&&this._inflate.write(l),this._inflate.flush(()=>{let e=this._inflate[f];if(e){this._inflate.close(),this._inflate=null,r(e);return}let n=i.concat(this._inflate[d],this._inflate[c]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[c]=0,this._inflate[d]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,n)})}_compress(e,t,r){let s=this._isServer?"server":"client";if(!this._deflate){let e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[c]=0,this._deflate[d]=[],this._deflate.on("data",m)}this._deflate[h]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=i.concat(this._deflate[d],this._deflate[c]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[h]=null,this._deflate[c]=0,this._deflate[d]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}};function m(e){this[d].push(e),this[c]+=e.length}function g(e){if(this[c]+=e.length,this[u]._maxPayload<1||this[c]<=this[u]._maxPayload){this[d].push(e);return}this[f]=RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][o]=1009,this.removeListener("data",g),this.reset()}function v(e){this[u]._inflate=null,e[o]=1007,this[h](e)}t.exports=p}}),es=G({"../common/temp/node_modules/.pnpm/utf-8-validate@5.0.10/node_modules/utf-8-validate/fallback.js"(e,t){t.exports=function(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}}}),eo=G({"../common/temp/node_modules/.pnpm/utf-8-validate@5.0.10/node_modules/utf-8-validate/index.js"(e,t){try{t.exports=Y()(__dirname)}catch(e){t.exports=es()}}}),ea=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/validation.js"(e,t){var{isUtf8:r}=z("buffer");function n(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}if(t.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},r)t.exports.isValidUTF8=function(e){return e.length<24?n(e):r(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let e=eo();t.exports.isValidUTF8=function(t){return t.length<32?n(t):e(t)}}catch(e){}}}),el=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/receiver.js"(e,t){var{Writable:r}=z("stream"),n=ei(),{BINARY_TYPES:i,EMPTY_BUFFER:s,kStatusCode:o,kWebSocket:a}=X(),{concat:l,toArrayBuffer:u,unmask:c}=er(),{isValidStatusCode:h,isValidUTF8:d}=ea(),f=Buffer[Symbol.species],p=Promise.resolve(),m="function"==typeof queueMicrotask?queueMicrotask:function(e){p.then(e).catch(w)},g=class extends r{constructor(e={}){super(),this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[a]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new f(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;case 5:this._loop=!1;return;default:this._loop=!1,m(()=>{this._state=0,this.startLoop(e)});return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((48&e[0])!=0)return this._loop=!1,v(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(64&e[0])==64;if(t&&!this._extensions[n.extensionName])return this._loop=!1,v(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(128&e[0])==128,this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,v(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,v(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,v(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7)||!(this._opcode<11))return this._loop=!1,v(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,v(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,v(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return this._loop=!1,v(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&e[1])==128,this._isServer){if(!this._masked)return this._loop=!1,v(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,v(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>2097151?(this._loop=!1,v(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=4294967296*t+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,v(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&c(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=5,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(v(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}let n=this.dataMessage();if(n)return t(n);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?u(l(t,e)):t,this.emit("message",r,!0)}else{let r=l(t,e);if(!this._skipUTF8Validation&&!d(r))return this._loop=!1,v(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=6}controlMessage(e){if(8===this._opcode){if(this._loop=!1,0===e.length)this.emit("conclude",1005,s),this.end(),this._state=0;else{let t=e.readUInt16BE(0);if(!h(t))return v(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let r=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!d(r))return v(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end(),this._state=0}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=6}};function v(e,t,r,n,i){let s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,v),s.code=i,s[o]=n,s}function y(e){throw e}function w(e){process.nextTick(y,e)}t.exports=g}}),eu=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/sender.js"(e,t){var{Duplex:r}=z("stream"),{randomFillSync:n}=z("crypto"),i=ei(),{EMPTY_BUFFER:s}=X(),{isValidStatusCode:o}=ea(),{mask:a,toBuffer:l}=er(),u=Symbol("kByteLength"),c=Buffer.alloc(4),h=class{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,i;let s=!1,o=2,l=!1;t.mask&&(r=t.maskBuffer||c,t.generateMask?t.generateMask(r):n(r,0,4),l=(r[0]|r[1]|r[2]|r[3])==0,o=6),"string"==typeof e?i=(!t.mask||l)&&void 0!==t[u]?t[u]:(e=Buffer.from(e)).length:(i=e.length,s=t.mask&&t.readOnly&&!l);let h=i;i>=65536?(o+=8,h=127):i>125&&(o+=2,h=126);let d=Buffer.allocUnsafe(s?i+o:o);return(d[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(d[0]|=64),d[1]=h,126===h?d.writeUInt16BE(i,2):127===h&&(d[2]=d[3]=0,d.writeUIntBE(i,4,6)),t.mask)?(d[1]|=128,d[o-4]=r[0],d[o-3]=r[1],d[o-2]=r[2],d[o-1]=r[3],l)?[d,e]:s?(a(e,r,d,o,i),[d]):(a(e,r,e,0,i),[d,e]):[d,e]}close(e,t,r,n){let i;if(void 0===e)i=s;else if("number"==typeof e&&o(e)){if(void 0!==t&&t.length){let r=Buffer.byteLength(t);if(r>123)throw RangeError("The message must not be greater than 123 bytes");(i=Buffer.allocUnsafe(2+r)).writeUInt16BE(e,0),"string"==typeof t?i.write(t,2):i.set(t,2)}else(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0)}else throw TypeError("First argument must be a valid error code number");let a={[u]:i.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,a,n]):this.sendFrame(h.frame(i,a),n)}ping(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):(n=(e=l(e)).length,i=l.readOnly),n>125)throw RangeError("The data size must not be greater than 125 bytes");let s={[u]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,r]):this.sendFrame(h.frame(e,s),r)}pong(e,t,r){let n,i;if("string"==typeof e?(n=Buffer.byteLength(e),i=!1):(n=(e=l(e)).length,i=l.readOnly),n>125)throw RangeError("The data size must not be greater than 125 bytes");let s={[u]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,r]):this.sendFrame(h.frame(e,s),r)}send(e,t,r){let n,s;let o=this._extensions[i.extensionName],a=t.binary?2:1,c=t.compress;if("string"==typeof e?(n=Buffer.byteLength(e),s=!1):(n=(e=l(e)).length,s=l.readOnly),this._firstFragment?(this._firstFragment=!1,c&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=n>=o._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0),o){let i={[u]:n,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:c};this._deflating?this.enqueue([this.dispatch,e,this._compress,i,r]):this.dispatch(e,this._compress,i,r)}else this.sendFrame(h.frame(e,{[u]:n,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:!1}),r)}dispatch(e,t,r,n){if(!t){this.sendFrame(h.frame(e,r),n);return}let s=this._extensions[i.extensionName];this._bufferedBytes+=r[u],this._deflating=!0,s.compress(e,r.fin,(e,t)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){let r=this._queue[t],n=r[r.length-1];"function"==typeof n&&n(e)}return}this._bufferedBytes-=r[u],this._deflating=!1,r.readOnly=!1,this.sendFrame(h.frame(t,r),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][u],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][u],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};t.exports=h}}),ec=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/event-target.js"(e,t){var{kForOnEventAttribute:r,kListener:n}=X(),i=Symbol("kCode"),s=Symbol("kData"),o=Symbol("kError"),a=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),c=Symbol("kType"),h=Symbol("kWasClean"),d=class{constructor(e){this[u]=null,this[c]=e}get target(){return this[u]}get type(){return this[c]}};Object.defineProperty(d.prototype,"target",{enumerable:!0}),Object.defineProperty(d.prototype,"type",{enumerable:!0});var f=class extends d{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[l]}get wasClean(){return this[h]}};Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});var p=class extends d{constructor(e,t={}){super(e),this[o]=void 0===t.error?null:t.error,this[a]=void 0===t.message?"":t.message}get error(){return this[o]}get message(){return this[a]}};Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});var m=class extends d{constructor(e,t={}){super(e),this[s]=void 0===t.data?null:t.data}get data(){return this[s]}};function g(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}Object.defineProperty(m.prototype,"data",{enumerable:!0}),t.exports={CloseEvent:f,ErrorEvent:p,Event:d,EventTarget:{addEventListener(e,t,i={}){let s;for(let s of this.listeners(e))if(!i[r]&&s[n]===t&&!s[r])return;if("message"===e)s=function(e,r){let n=new m("message",{data:r?e:e.toString()});n[u]=this,g(t,this,n)};else if("close"===e)s=function(e,r){let n=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[u]=this,g(t,this,n)};else if("error"===e)s=function(e){let r=new p("error",{error:e,message:e.message});r[u]=this,g(t,this,r)};else{if("open"!==e)return;s=function(){let e=new d("open");e[u]=this,g(t,this,e)}}s[r]=!!i[r],s[n]=t,i.once?this.once(e,s):this.on(e,s)},removeEventListener(e,t){for(let i of this.listeners(e))if(i[n]===t&&!i[r]){this.removeListener(e,i);break}}},MessageEvent:m}}}),eh=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/extension.js"(e,t){var{tokenChars:r}=ea();function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}t.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,i;let s=Object.create(null),o=Object.create(null),a=!1,l=!1,u=!1,c=-1,h=-1,d=-1,f=0;for(;f<e.length;f++)if(h=e.charCodeAt(f),void 0===t){if(-1===d&&1===r[h])-1===c&&(c=f);else if(0!==f&&(32===h||9===h))-1===d&&-1!==c&&(d=f);else if(59===h||44===h){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let r=e.slice(c,d);44===h?(n(s,r,o),o=Object.create(null)):t=r,c=d=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}else if(void 0===i){if(-1===d&&1===r[h])-1===c&&(c=f);else if(32===h||9===h)-1===d&&-1!==c&&(d=f);else if(59===h||44===h){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),n(o,e.slice(c,d),!0),44===h&&(n(s,t,o),o=Object.create(null),t=void 0),c=d=-1}else if(61===h&&-1!==c&&-1===d)i=e.slice(c,f),c=d=-1;else throw SyntaxError(`Unexpected character at index ${f}`)}else if(l){if(1!==r[h])throw SyntaxError(`Unexpected character at index ${f}`);-1===c?c=f:a||(a=!0),l=!1}else if(u){if(1===r[h])-1===c&&(c=f);else if(34===h&&-1!==c)u=!1,d=f;else if(92===h)l=!0;else throw SyntaxError(`Unexpected character at index ${f}`)}else if(34===h&&61===e.charCodeAt(f-1))u=!0;else if(-1===d&&1===r[h])-1===c&&(c=f);else if(-1!==c&&(32===h||9===h))-1===d&&(d=f);else if(59===h||44===h){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let r=e.slice(c,d);a&&(r=r.replace(/\\/g,""),a=!1),n(o,i,r),44===h&&(n(s,t,o),o=Object.create(null),t=void 0),i=void 0,c=d=-1}else throw SyntaxError(`Unexpected character at index ${f}`);if(-1===c||u||32===h||9===h)throw SyntaxError("Unexpected end of input");-1===d&&(d=f);let p=e.slice(c,d);return void 0===t?n(s,p,o):(void 0===i?n(o,p,!0):a?n(o,i,p.replace(/\\/g,"")):n(o,i,p),n(s,t,o)),s}}}}),ed=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/websocket.js"(e,t){var r=z("events"),n=z("https"),i=z("http"),s=z("net"),o=z("tls"),{randomBytes:a,createHash:l}=z("crypto"),{Duplex:u,Readable:c}=z("stream"),{URL:h}=z("url"),d=ei(),f=el(),p=eu(),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:v,kForOnEventAttribute:y,kListener:w,kStatusCode:b,kWebSocket:_,NOOP:E}=X(),{EventTarget:{addEventListener:x,removeEventListener:S}}=ec(),{format:k,parse:C}=eh(),{toBuffer:R}=er(),I=Symbol("kAborted"),T=[8,13],M=["CONNECTING","OPEN","CLOSING","CLOSED"],O=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,P=class extends r{constructor(e,t,r){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=g,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=P.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),function e(t,r,s,o){let u,c,f,p;let m={protocolVersion:T[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!T.includes(m.protocolVersion))throw RangeError(`Unsupported protocol version: ${m.protocolVersion} (supported versions: ${T.join(", ")})`);if(r instanceof h)u=r;else try{u=new h(r)}catch(e){throw SyntaxError(`Invalid URL: ${r}`)}"http:"===u.protocol?u.protocol="ws:":"https:"===u.protocol&&(u.protocol="wss:"),t._url=u.href;let g="wss:"===u.protocol,y="ws+unix:"===u.protocol;if("ws:"===u.protocol||g||y?y&&!u.pathname?c="The URL's pathname is empty":u.hash&&(c="The URL contains a fragment identifier"):c='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',c){let e=SyntaxError(c);if(0===t._redirects)throw e;D(t,e);return}let w=g?443:80,b=a(16).toString("base64"),_=g?n.request:i.request,E=new Set;if(m.createConnection=g?L:A,m.defaultPort=m.defaultPort||w,m.port=u.port||w,m.host=u.hostname.startsWith("[")?u.hostname.slice(1,-1):u.hostname,m.headers={...m.headers,"Sec-WebSocket-Version":m.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},m.path=u.pathname+u.search,m.timeout=m.handshakeTimeout,m.perMessageDeflate&&(f=new d(!0!==m.perMessageDeflate?m.perMessageDeflate:{},!1,m.maxPayload),m.headers["Sec-WebSocket-Extensions"]=k({[d.extensionName]:f.offer()})),s.length){for(let e of s){if("string"!=typeof e||!O.test(e)||E.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");E.add(e)}m.headers["Sec-WebSocket-Protocol"]=s.join(",")}if(m.origin&&(m.protocolVersion<13?m.headers["Sec-WebSocket-Origin"]=m.origin:m.headers.Origin=m.origin),(u.username||u.password)&&(m.auth=`${u.username}:${u.password}`),y){let e=m.path.split(":");m.socketPath=e[0],m.path=e[1]}if(m.followRedirects){if(0===t._redirects){t._originalIpc=y,t._originalSecure=g,t._originalHostOrSocketPath=y?m.socketPath:u.host;let e=o&&o.headers;if(o={...o,headers:{}},e)for(let[t,r]of Object.entries(e))o.headers[t.toLowerCase()]=r}else if(0===t.listenerCount("redirect")){let e=y?!!t._originalIpc&&m.socketPath===t._originalHostOrSocketPath:!t._originalIpc&&u.host===t._originalHostOrSocketPath;e&&(!t._originalSecure||g)||(delete m.headers.authorization,delete m.headers.cookie,e||delete m.headers.host,m.auth=void 0)}m.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(m.auth).toString("base64")),p=t._req=_(m),t._redirects&&t.emit("redirect",t.url,p)}else p=t._req=_(m);m.timeout&&p.on("timeout",()=>{N(t,p,"Opening handshake has timed out")}),p.on("error",e=>{null===p||p[I]||(p=t._req=null,D(t,e))}),p.on("response",n=>{let i=n.headers.location,a=n.statusCode;if(i&&m.followRedirects&&a>=300&&a<400){let n;if(++t._redirects>m.maxRedirects){N(t,p,"Maximum redirects exceeded");return}p.abort();try{n=new h(i,r)}catch(e){D(t,SyntaxError(`Invalid URL: ${i}`));return}e(t,n,s,o)}else t.emit("unexpected-response",p,n)||N(t,p,`Unexpected server response: ${n.statusCode}`)}),p.on("upgrade",(e,r,n)=>{let i;if(t.emit("upgrade",e),t.readyState!==P.CONNECTING)return;if(p=t._req=null,"websocket"!==e.headers.upgrade.toLowerCase()){N(t,r,"Invalid Upgrade header");return}let s=l("sha1").update(b+v).digest("base64");if(e.headers["sec-websocket-accept"]!==s){N(t,r,"Invalid Sec-WebSocket-Accept header");return}let o=e.headers["sec-websocket-protocol"];if(void 0!==o?E.size?E.has(o)||(i="Server sent an invalid subprotocol"):i="Server sent a subprotocol but none was requested":E.size&&(i="Server sent no subprotocol"),i){N(t,r,i);return}o&&(t._protocol=o);let a=e.headers["sec-websocket-extensions"];if(void 0!==a){let e;if(!f){N(t,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{e=C(a)}catch(e){N(t,r,"Invalid Sec-WebSocket-Extensions header");return}let n=Object.keys(e);if(1!==n.length||n[0]!==d.extensionName){N(t,r,"Server indicated an extension that was not requested");return}try{f.accept(e[d.extensionName])}catch(e){N(t,r,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[d.extensionName]=f}t.setSocket(r,n,{generateMask:m.generateMask,maxPayload:m.maxPayload,skipUTF8Validation:m.skipUTF8Validation})}),m.finishRequest?m.finishRequest(p,t):p.end()}(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let n=new f({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new p(e,this._extensions,r.generateMask),this._receiver=n,this._socket=e,n[_]=this,e[_]=this,n.on("conclude",j),n.on("drain",H),n.on("error",q),n.on("message",F),n.on("ping",U),n.on("pong",W),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",Z),e.on("end",Q),e.on("error",K),this._readyState=P.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[d.extensionName]&&this._extensions[d.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){N(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===P.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=P.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==P.CONNECTING&&this.readyState!==P.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===P.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN){$(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)}pong(e,t,r){if(this.readyState===P.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN){$(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)}resume(){this.readyState!==P.CONNECTING&&this.readyState!==P.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===P.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN){$(this,e,r);return}let n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[d.extensionName]||(n.compress=!1),this._sender.send(e||g,n,r)}terminate(){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){N(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=P.CLOSING,this._socket.destroy())}}};function D(e,t){e._readyState=P.CLOSING,e.emit("error",t),e.emitClose()}function A(e){return e.path=e.socketPath,s.connect(e)}function L(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),o.connect(e)}function N(e,t,r){e._readyState=P.CLOSING;let n=Error(r);Error.captureStackTrace(n,N),t.setHeader?(t[I]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(D,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function $(e,t,r){if(t){let r=R(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${M[e.readyState]})`);process.nextTick(r,t)}}function j(e,t){let r=this[_];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[_]&&(r._socket.removeListener("data",Z),process.nextTick(B,r._socket),1005===e?r.close():r.close(e,t))}function H(){let e=this[_];e.isPaused||e._socket.resume()}function q(e){let t=this[_];void 0!==t._socket[_]&&(t._socket.removeListener("data",Z),process.nextTick(B,t._socket),t.close(e[b])),t.emit("error",e)}function V(){this[_].emitClose()}function F(e,t){this[_].emit("message",e,t)}function U(e){let t=this[_];t.pong(e,!t._isServer,E),t.emit("ping",e)}function W(e){this[_].emit("pong",e)}function B(e){e.resume()}function G(){let e;let t=this[_];this.removeListener("close",G),this.removeListener("data",Z),this.removeListener("end",Q),t._readyState=P.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[_]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",V),t._receiver.on("finish",V))}function Z(e){this[_]._receiver.write(e)||this.pause()}function Q(){let e=this[_];e._readyState=P.CLOSING,e._receiver.end(),this.end()}function K(){let e=this[_];this.removeListener("error",K),this.on("error",E),e&&(e._readyState=P.CLOSING,this.destroy())}Object.defineProperty(P,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(P.prototype,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(P,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(P.prototype,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(P,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(P.prototype,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(P,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),Object.defineProperty(P.prototype,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(P.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(P.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[y])return t[w];return null},set(t){for(let t of this.listeners(e))if(t[y]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[y]:!0})}})}),P.prototype.addEventListener=x,P.prototype.removeEventListener=S,t.exports=P}}),ef=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/subprotocol.js"(e,t){var{tokenChars:r}=ea();t.exports={parse:function(e){let t=new Set,n=-1,i=-1,s=0;for(;s<e.length;s++){let o=e.charCodeAt(s);if(-1===i&&1===r[o])-1===n&&(n=s);else if(0!==s&&(32===o||9===o))-1===i&&-1!==n&&(i=s);else if(44===o){if(-1===n)throw SyntaxError(`Unexpected character at index ${s}`);-1===i&&(i=s);let r=e.slice(n,i);if(t.has(r))throw SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),n=i=-1}else throw SyntaxError(`Unexpected character at index ${s}`)}if(-1===n||-1!==i)throw SyntaxError("Unexpected end of input");let o=e.slice(n,s);if(t.has(o))throw SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}}}),ep=G({"../common/temp/node_modules/.pnpm/ws@8.14.2_3cxu5zja4e2r5wmvge7mdcljwq/node_modules/ws/lib/websocket-server.js"(e,t){var r=z("events"),n=z("http"),{Duplex:i}=z("stream"),{createHash:s}=z("crypto"),o=eh(),a=ei(),l=ef(),u=ed(),{GUID:c,kWebSocket:h}=X(),d=/^[+/0-9A-Za-z]{22}==$/,f=class extends r{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer((e,t)=>{let r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(p,this);return}if(e&&this.once("close",e),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{p(this)})}}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",m);let i=e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if("GET"!==e.method){v(this,e,t,405,"Invalid HTTP method");return}if("websocket"!==e.headers.upgrade.toLowerCase()){v(this,e,t,400,"Invalid Upgrade header");return}if(!i||!d.test(i)){v(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(8!==s&&13!==s){v(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){g(t,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(void 0!==u)try{c=l.parse(u)}catch(r){v(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let h=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==h){let r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=o.parse(h);e[a.extensionName]&&(r.accept(e[a.extensionName]),f[a.extensionName]=r)}catch(r){v(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let o={origin:e.headers[`${8===s?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length){this.options.verifyClient(o,(s,o,a,l)=>{if(!s)return g(t,o||401,a,l);this.completeUpgrade(f,i,c,e,t,r,n)});return}if(!this.options.verifyClient(o))return g(t,401)}this.completeUpgrade(f,i,c,e,t,r,n)}completeUpgrade(e,t,r,n,i,l,u){if(!i.readable||!i.writable)return i.destroy();if(i[h])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return g(i,503);let d=s("sha1").update(t+c).digest("base64"),f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${d}`],v=new this.options.WebSocket(null);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(f.push(`Sec-WebSocket-Protocol: ${e}`),v._protocol=e)}if(e[a.extensionName]){let t=e[a.extensionName].params,r=o.format({[a.extensionName]:[t]});f.push(`Sec-WebSocket-Extensions: ${r}`),v._extensions=e}this.emit("headers",f,n),i.write(f.concat("\r\n").join("\r\n")),i.removeListener("error",m),v.setSocket(i,l,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(v),v.on("close",()=>{this.clients.delete(v),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)})),u(v,n)}};function p(e){e._state=2,e.emit("close")}function m(){this.destroy()}function g(e,t,r,i){r=r||n.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r
`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+r)}function v(e,t,r,n,i){if(e.listenerCount("wsClientError")){let n=Error(i);Error.captureStackTrace(n,v),e.emit("wsClientError",n,r,t)}else g(r,n,i)}t.exports=f}});Q(K(),1),Q(el(),1),Q(eu(),1);var em=Q(ed(),1);Q(ep(),1),n=em.default,globalThis.fetch},4343:(e,t,r)=>{function n(e){if(void 0===e)return{};if(!s(e))throw Error(`The arguments to a Convex function must be an object. Received: ${e}`);return e}function i(e){if(void 0===e)throw Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if("string"!=typeof e)throw Error(`Invalid deployment address: found ${e}".`);if(!(e.startsWith("http:")||e.startsWith("https:")))throw Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${e}".`);if(-1===e.indexOf("127.0.0.1")&&-1===e.indexOf("localhost")&&!e.endsWith(".convex.cloud"))throw Error(`Invalid deployment address: Must end with ".convex.cloud". Found "${e}".`)}function s(e){let t="object"==typeof e,r=Object.getPrototypeOf(e),n=null===r||r===Object.prototype||r?.constructor?.name==="Object";return t&&n}r.d(t,{Op:()=>n,a0:()=>i,pP:()=>s})},5474:(e,t,r)=>{r.d(t,{i:()=>n});let n="1.9.1"},4770:(e,t,r)=>{r.d(t,{$P:()=>i,qL:()=>s});let n=Symbol.for("functionName");function i(e){if("string"==typeof e)return e;let t=e[n];if(!t)throw Error(`${e} is not a functionReference`);return t}let s=function e(t=[]){return new Proxy({},{get(r,i){if("string"==typeof i)return e([...t,i]);if(i===n){if(t.length<2){let e=["api",...t].join(".");throw Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${e}\``)}let e=t.slice(0,-1).join("/"),r=t[t.length-1];return"default"===r?e:e+":"+r}return i===Symbol.toStringTag?"FunctionReference":void 0}})}()},4211:(e,t,r)=>{r.d(t,{qL:()=>a.qL});var n=r(3671),i=r(7425);function s(e,t){if("undefined"==typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(e,JSON.stringify(t)))}async function o(e,t){let r;if("undefined"==typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{r=await Convex.asyncSyscall(e,JSON.stringify(t))}catch(e){if(void 0!==e.data){let t=new i.P(e.message);throw t.data=e.data,t}throw Error(e.message)}return JSON.parse(r)}var a=r(4770);class l{constructor(){}}var u=r(5681);class c extends l{constructor(e){super(),this.inner=e}serialize(){return this.inner}}function h(e){return e instanceof c?e.serialize():{$literal:(0,u.h_)(e)}}class d{constructor(){}}class f extends d{constructor(e){super(),this.inner=e}serialize(){return this.inner}}function p(e){return e instanceof f?e.serialize():{$literal:(0,u.h_)(e)}}let m={eq:(e,t)=>new f({$eq:[p(e),p(t)]}),neq:(e,t)=>new f({$neq:[p(e),p(t)]}),lt:(e,t)=>new f({$lt:[p(e),p(t)]}),lte:(e,t)=>new f({$lte:[p(e),p(t)]}),gt:(e,t)=>new f({$gt:[p(e),p(t)]}),gte:(e,t)=>new f({$gte:[p(e),p(t)]}),add:(e,t)=>new f({$add:[p(e),p(t)]}),sub:(e,t)=>new f({$sub:[p(e),p(t)]}),mul:(e,t)=>new f({$mul:[p(e),p(t)]}),div:(e,t)=>new f({$div:[p(e),p(t)]}),mod:(e,t)=>new f({$mod:[p(e),p(t)]}),neg:e=>new f({$neg:p(e)}),and:(...e)=>new f({$and:e.map(p)}),or:(...e)=>new f({$or:e.map(p)}),not:e=>new f({$not:p(e)}),field:e=>new f({$field:e})};class g{constructor(){}}class v extends g{constructor(e){super(),this.rangeExpressions=e,this.isConsumed=!1}static new(){return new v([])}consume(){if(this.isConsumed)throw Error("IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes");this.isConsumed=!0}eq(e,t){return this.consume(),new v(this.rangeExpressions.concat({type:"Eq",fieldPath:e,value:(0,u.h_)(t)}))}gt(e,t){return this.consume(),new v(this.rangeExpressions.concat({type:"Gt",fieldPath:e,value:(0,n.D2)(t)}))}gte(e,t){return this.consume(),new v(this.rangeExpressions.concat({type:"Gte",fieldPath:e,value:(0,n.D2)(t)}))}lt(e,t){return this.consume(),new v(this.rangeExpressions.concat({type:"Lt",fieldPath:e,value:(0,n.D2)(t)}))}lte(e,t){return this.consume(),new v(this.rangeExpressions.concat({type:"Lte",fieldPath:e,value:(0,n.D2)(t)}))}export(){return this.consume(),this.rangeExpressions}}class y{constructor(){}}function w(e,t,r,n){if(void 0===e)throw Error(`Must provide arg ${t} \`${n}\` to \`${r}\``)}class b extends y{constructor(e){super(),this.filters=e,this.isConsumed=!1}static new(){return new b([])}consume(){if(this.isConsumed)throw Error("SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.");this.isConsumed=!0}search(e,t){return w(e,1,"search","fieldName"),w(t,2,"search","query"),this.consume(),new b(this.filters.concat({type:"Search",fieldPath:e,value:t}))}eq(e,t){return w(e,1,"eq","fieldName"),2!=arguments.length&&w(t,2,"search","value"),this.consume(),new b(this.filters.concat({type:"Eq",fieldPath:e,value:(0,u.h_)(t)}))}export(){return this.consume(),this.filters}}var _=r(5474);function E(e){throw Error("consumed"===e?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}Symbol.asyncIterator;class x{constructor(e){this.state={type:"preparing",query:e}}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let e=this.state.query;return this.state={type:"closed"},e}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&E(this.state.type);let{queryId:e}=s("1.0/queryStream",{query:this.state.query,version:_.i});return this.state={type:"executing",queryId:e},e}closeQuery(){"executing"===this.state.type&&s("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(e){w(e,1,"order","order");let t=this.takeQuery();if("Search"===t.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==t.source.order)throw Error("Queries may only specify order at most once");return t.source.order=e,new x(t)}filter(e){w(e,1,"filter","predicate");let t=this.takeQuery();return t.operators.push({filter:p(e(m))}),new x(t)}limit(e){w(e,1,"limit","n");let t=this.takeQuery();return t.operators.push({limit:e}),new x(t)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&E(this.state.type);let e="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:t,done:r}=await o("1.0/queryStreamNext",{queryId:e});return r&&this.closeQuery(),{value:(0,n.sq)(t,!0),done:r}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(w(e,1,"paginate","options"),"number"!=typeof e?.numItems||e.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${e?.numItems}\`.`);let t=this.takeQuery(),r=e.numItems,i=e.cursor,s=e?.endCursor??null,a=e.maximumRowsRead??null,{page:l,isDone:u,continueCursor:c,splitCursor:h,pageStatus:d}=await o("1.0/queryPage",{query:t,cursor:i,endCursor:s,pageSize:r,maximumRowsRead:a,maximumBytesRead:e.maximumBytesRead,version:_.i});return{page:l.map(e=>(0,n.sq)(e,!0)),isDone:u,continueCursor:c,splitCursor:h,pageStatus:d}}async collect(){let e=[];for await(let t of this)e.push(t);return e}async take(e){return w(e,1,"take","n"),this.limit(e).collect()}async first(){let e=await this.take(1);return 0===e.length?null:e[0]}async unique(){let e=await this.take(2);if(0===e.length)return null;if(2===e.length)throw Error("unique() query returned more than one result");return e[0]}}var S=r(251);S.v.object({numItems:S.v.number(),cursor:S.v.union(S.v.string(),S.v.null()),endCursor:S.v.optional(S.v.union(S.v.string(),S.v.null())),id:S.v.optional(S.v.number()),maximumRowsRead:S.v.optional(S.v.number()),maximumBytesRead:S.v.optional(S.v.number())});class k{constructor(e){this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.documentType=e}index(e,t){return this.indexes.push({indexDescriptor:e,fields:t}),this}searchIndex(e,t){return this.searchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}),this}vectorIndex(e,t){return this.vectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}),this}self(){return this}export(){return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:this.documentType.json}}}function C(e){return new k(e instanceof S.c?e:S.v.object(e))}class R{constructor(e,t){this.tables=e,this.schemaValidation=t?.schemaValidation===void 0||t.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,t])=>{let{indexes:r,searchIndexes:n,vectorIndexes:i,documentType:s}=t.export();return{tableName:e,indexes:r,searchIndexes:n,vectorIndexes:i,documentType:s}}),schemaValidation:this.schemaValidation})}}new R({_scheduled_functions:C({name:S.v.string(),args:S.v.array(S.v.any()),scheduledTime:S.v.float64(),completedTime:S.v.optional(S.v.float64()),state:S.v.union(S.v.object({kind:S.v.literal("pending")}),S.v.object({kind:S.v.literal("inProgress")}),S.v.object({kind:S.v.literal("success")}),S.v.object({kind:S.v.literal("failed"),error:S.v.string()}),S.v.object({kind:S.v.literal("canceled")}))}),_storage:C({sha256:S.v.string(),size:S.v.float64(),contentType:S.v.optional(S.v.string())})},void 0)},1329:(e,t,r)=>{r.r(t),r.d(t,{byteLength:()=>c,fromByteArray:()=>d,toByteArray:()=>h});for(var n=[],i=[],s=Uint8Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function c(e){var t=u(e),r=t[0],n=t[1];return(r+n)*3/4-n}function h(e){var t,r,n=u(e),o=n[0],a=n[1],l=new s((o+a)*3/4-a),c=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l}function d(e){for(var t,r=e.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(function(e,t,r){for(var i,s=[],o=t;o<r;o+=3)s.push(n[(i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7425:(e,t,r)=>{r.d(t,{P:()=>o});var n,i=r(5681);let s=Symbol.for("ConvexError");class o extends Error{constructor(e){super("string"==typeof e?e:(0,i.lL)(e)),this.name="ConvexError",this[n]=!0,this.data=e}}n=s},3671:(e,t,r)=>{r.d(t,{D2:()=>n.D2,DS:()=>i,sq:()=>n.sq});var n=r(5681);r(251);var i=r(1329);r(7425)},251:(e,t,r)=>{r.d(t,{c:()=>i,v:()=>s});var n=r(5681);class i{constructor(e,t){this.json=e,this.optional=t}}let s={id:e=>new i({type:"id",tableName:e},!1),null:()=>new i({type:"null"},!1),number:()=>new i({type:"number"},!1),float64:()=>new i({type:"number"},!1),bigint:()=>new i({type:"bigint"},!1),int64:()=>new i({type:"bigint"},!1),boolean:()=>new i({type:"boolean"},!1),string:()=>new i({type:"string"},!1),bytes:()=>new i({type:"bytes"},!1),literal:e=>new i({type:"literal",value:(0,n.D2)(e)},!1),array:e=>new i({type:"array",value:e.json},!1),object:e=>new i({type:"object",value:Object.fromEntries(Object.entries(e).map(([e,t])=>[e,{fieldType:t.json,optional:t.optional}]))},!1),record:(e,t)=>new i({type:"record",keys:e.json,values:{fieldType:t.json,optional:t.optional}},!1),union:(...e)=>new i({type:"union",value:e.map(e=>e.json)},!1),any:()=>new i({type:"any"},!1),optional:e=>new i(e.json,!0)}},5681:(e,t,r)=>{r.d(t,{D2:()=>w,h_:()=>b,lL:()=>m,sq:()=>p});var n=r(1329),i=r(4343);let s=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),a=BigInt("0"),l=BigInt("8"),u=BigInt("256");function c(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}let h=DataView.prototype.setBigInt64?function(e){if(e<s||o<e)throw Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);let t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),n.fromByteArray(new Uint8Array(t))}:function(e){e<a&&(e-=s+s);let t=e.toString(16);t.length%2==1&&(t="0"+t);let r=new Uint8Array(new ArrayBuffer(8)),i=0;for(let n of t.match(/.{2}/g).reverse())r.set([parseInt(n,16)],i++),e>>=l;return n.fromByteArray(r)},d=DataView.prototype.getBigInt64?function(e){let t=n.toByteArray(e);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}:function(e){let t=n.toByteArray(e);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let r=a,i=a;for(let e of t)r+=BigInt(e)*u**i,i++;return r>o&&(r+=s+s),r};function f(e){if(0===e.length)throw Error("Empty field names are disallowed.");if(e.length>1024)throw Error(`Field name ${e} exceeds maximum field name length 1024.`);if(e.startsWith("$"))throw Error(`Field name ${e} starts with a '$', which is reserved.`);for(let t=0;t<e.length;t+=1){let r=e.charCodeAt(t);if(r<32||r>=127)throw Error(`Field name ${e} has invalid character '${e[t]}': Field names can only contain non-control ASCII characters`)}}function p(e,t=!1){return function e(t,r){if(null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t)return t;if(Array.isArray(t))return t.map(t=>e(t,r));if("object"!=typeof t)throw Error(`Unexpected type of ${t}`);let i=Object.entries(t);if(1===i.length){let s=i[0][0];if("$bytes"===s){if("string"!=typeof t.$bytes)throw Error(`Malformed $bytes field on ${t}`);return n.toByteArray(t.$bytes).buffer}if("$integer"===s){if("string"!=typeof t.$integer)throw Error(`Malformed $integer field on ${t}`);return d(t.$integer)}if("$float"===s){if("string"!=typeof t.$float)throw Error(`Malformed $float field on ${t}`);let e=n.toByteArray(t.$float);if(8!==e.byteLength)throw Error(`Received ${e.byteLength} bytes, expected 8 for $float`);let r=new DataView(e.buffer).getFloat64(0,!0);if(!c(r))throw Error(`Float ${r} should be encoded as a number`);return r}if("$set"===s){if(!Array.isArray(t.$set))throw Error(`Malformed $set field on ${t}`);if(!r)throw Error(`Received a Set which is no longer supported as a Convex type, with values: ${t.$set.join(", ")}.`);return new Set(t.$set.map(t=>e(t,r)))}if("$map"===s){if(!Array.isArray(t.$map))throw Error(`Malformed $map field on ${t}`);if(!r)throw Error(`Received a Map which is no longer supported as a Convex type, with entries: ${t.$map.join(", ")}.`);let n=new Map;for(let i of t.$map){if(!Array.isArray(i)||2!==i.length)throw Error(`Malformed pair in $map ${t}`);let s=e(i[0],r),o=e(i[1],r);n.set(s,o)}return n}}let s={};for(let[n,i]of Object.entries(t))f(n),s[n]=e(i,r);return s}(e,t)}function m(e){return JSON.stringify(e,(e,t)=>void 0===t?"undefined":"bigint"==typeof t?`${t.toString()}n`:t)}function g(e,t,r,a,l){if(void 0===e){let e=r&&` (present at path ${r} in original object ${m(t)})`;throw Error(`undefined is not a valid Convex value${e}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(null===e)return e;if("bigint"==typeof e){if(e<s||o<e)throw Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:h(e)}}if("number"==typeof e){if(!c(e))return e;{let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),{$float:n.fromByteArray(new Uint8Array(t))}}}if("boolean"==typeof e||"string"==typeof e)return e;if(e instanceof ArrayBuffer)return{$bytes:n.fromByteArray(new Uint8Array(e))};if(Array.isArray(e))return e.map((e,n)=>g(e,t,r+`[${n}]`,!1,l));if(e instanceof Set){if(!l)throw Error(v(r,"Set",[...e],t));return{$set:[...e].map((e,n)=>g(e,t,r+`.keys()[${n}]`,!1,l))}}if(e instanceof Map){if(!l)throw Error(v(r,"Map",[...e],t));return{$map:[...e].map(([e,n],i)=>[g(e,t,r+`.keys()[${i}]`,!1,l),g(n,t,r+`.values()[${i}]`,!1,l)])}}if(!(0,i.pP)(e)){let n=e?.constructor?.name;throw Error(v(r,n?`${n} `:"",e,t))}let u={},d=Object.entries(e);for(let[e,n]of(d.sort(([e,t],[r,n])=>e===r?0:e<r?-1:1),d))void 0!==n?(f(e),u[e]=g(n,t,r+`.${e}`,!1,l)):a&&(f(e),u[e]=y(n,t,r+`.${e}`));return u}function v(e,t,r,n){return e?`${t}${m(r)} is not a supported Convex type (present at path ${e} in original object ${m(n)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${t}${m(r)} is not a supported Convex type.`}function y(e,t,r){if(void 0===e)return{$undefined:null};if(void 0===t)throw Error(`Programming error. Current value is ${m(e)} but original value is undefined`);return g(e,t,r,!1,!1)}function w(e,t=!1){return g(e,e,"",!1,t)}function b(e){return y(e,e,"")}},6850:(e,t,r)=>{/*! js-cookie v3.0.5 | MIT */function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:()=>i});var i=function e(t,r){function i(e,i,s){if("undefined"!=typeof document){"number"==typeof(s=n({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in s)s[a]&&(o+="; "+a,!0!==s[a]&&(o+="="+s[a].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+o}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var s=r[i].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(o,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){i(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},4465:(e,t,r)=>{let n,i;r.d(t,{x0:()=>o});var s=r(6005);function o(e=21){var t;t=e-=0,!n||n.length<t?(n=Buffer.allocUnsafe(128*t),s.webcrypto.getRandomValues(n),i=0):i+t>n.length&&(s.webcrypto.getRandomValues(n),i=0),i+=t;let r="";for(let t=i-e;t<i;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[t]];return r}},2738:(e,t,r)=>{r.d(t,{Q:()=>l});var n=r(1789),i=r(8867);let s=!1,o=[];function a(){let e=o;o=[],s=!1,(0,i.unstable_batchedUpdates)(()=>{for(let t of e)t()})}function l(e,t,r={}){let{default:i,dependencies:l=[],isEqual:u}=r,[c,h]=(0,n.useState)(void 0);return((0,n.useEffect)(()=>{if(!e)return;let r=e.subscribe(t,{onData:e=>{o.push(()=>h(e)),s||(Promise.resolve().then(a),s=!0)},isEqual:u});return()=>{r(),h(void 0)}},[e,...l]),void 0===c)?i:c}},4893:(e,t,r)=>{r.d(t,{Gb:()=>sh});var n,i,s,o={};r.r(o),r.d(o,{ValitaError:()=>x,array:()=>em,bigint:()=>ei,boolean:()=>ec,err:()=>C,lazy:()=>ey,literal:()=>ed,never:()=>U,null:()=>J,number:()=>et,object:()=>ef,ok:()=>k,record:()=>ep,string:()=>ea,tuple:()=>eg,undefined:()=>Q,union:()=>ev,unknown:()=>z});class a{constructor(e){this._sinks=e}log(e,t,...r){for(let n of this._sinks)n.log(e,t,...r)}async flush(){await Promise.all(this._sinks.map(e=>e.flush?.()))}}class l{constructor(e,t="info",r){this.debug=void 0,this.info=void 0,this.error=void 0;let n=t=>(...n)=>e.log(t,r,...n);switch(t){case"debug":this.debug=n("debug");case"info":this.info=n("info");case"error":this.error=n("error")}this.flush=()=>e.flush?.()??Promise.resolve()}}let u={log(e,t,...r){console[e](...function(e){let t=[];for(let[r,n]of Object.entries(e??{})){let e=void 0===n?r:`${r}=${n}`;t.push(e)}return t}(t),...r.map(h))}};class c extends l{constructor(e="info",t,r=u){super(r,e,t),this._level=e,this._logSink=r,this._context=t}withContext(e,t){let r={...this._context,[e]:t};return new c(this._level,r,this._logSink)}}function h(e){switch(typeof e){case"string":case"number":case"boolean":case"undefined":case"symbol":case"bigint":return e;case"object":if(null===e)return null}return JSON.stringify(e,d)}function d(e,t){return t instanceof Error?{name:t.name,message:t.message,stack:t.stack,..."cause"in t?{cause:t.cause}:null}:t}function f(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}class p{_lockP=null;async lock(){let e=this._lockP,{promise:t,resolve:r}=f();return this._lockP=t,await e,r}withLock(e){return g(this.lock(),e)}}class m{_lock=new p;_writeP=null;_readP=[];read(){return this._lock.withLock(async()=>{await this._writeP;let{promise:e,resolve:t}=f();return this._readP.push(e),t})}withRead(e){return g(this.read(),e)}async write(){return await this._lock.withLock(async()=>{await this._writeP,await Promise.all(this._readP);let{promise:e,resolve:t}=f();return this._writeP=e,this._readP=[],t})}withWrite(e){return g(this.write(),e)}}async function g(e,t){let r=await e;try{return await t()}finally{r()}}function v(e,t){return e?{ok:!1,code:"join",left:e,right:t}:t}function y(e,t){return{ok:!1,code:"prepend",key:e,tree:t}}function w(e,t=[],r=[]){for(;;)if("join"===e.code)w(e.left,t.slice(),r),e=e.right;else{if("prepend"!==e.code)return"custom_error"===e.code&&"object"==typeof e.error&&void 0!==e.error.path&&t.push(...e.error.path),r.push(function(e,t){let r=e.code;switch(r){case"invalid_type":case"invalid_literal":return{code:r,path:t,expected:e.expected};case"missing_value":return{code:r,path:t};case"invalid_length":return{code:r,path:t,minLength:e.minLength,maxLength:e.maxLength};case"unrecognized_keys":return{code:r,path:t,keys:e.keys};case"invalid_union":return{code:r,path:t,tree:e.tree};default:return{code:r,path:t,error:e.error}}}(e,t)),r;t.push(e.key),e=e.tree}}function b(e,t){return 0===e.length?"nothing":1===e.length?e[0]:`${e.slice(0,-1).join(", ")} ${t} ${e[e.length-1]}`}function _(e){return"bigint"==typeof e?`${e}n`:JSON.stringify(e)}function E(e){let t="",r=0;for(;;)if("join"===e.code)r+=function e(t){let r=0;for(;;)if("join"===t.code)r+=e(t.left),t=t.right;else{if("prepend"!==t.code)return r+1;t=t.tree}}(e.right),e=e.left;else if("prepend"===e.code)t+="."+e.key,e=e.tree;else break;let n="validation failed";if("invalid_type"===e.code)n=`expected ${b(e.expected,"or")}`;else if("invalid_literal"===e.code)n=`expected ${b(e.expected.map(_),"or")}`;else if("missing_value"===e.code)n="missing value";else if("unrecognized_keys"===e.code){let t=e.keys;n=`unrecognized ${1===t.length?"key":"keys"} ${b(t.map(_),"and")}`}else if("invalid_length"===e.code){let t=e.minLength,r=e.maxLength;n="expected an array with ",t>0?r===t?n+=`${t}`:r<1/0?n+=`between ${t} and ${r}`:n+=`at least ${t}`:n+=`at most ${r}`,n+=" item(s)"}else if("custom_error"===e.code){let r=e.error;"string"==typeof r?n=r:void 0!==r&&(void 0!==r.message&&(n=r.message),void 0!==r.path&&(t+="."+r.path.join(".")))}let i=`${e.code} at .${t.slice(1)} (${n})`;return 1===r?i+=" (+ 1 other issue)":r>1&&(i+=` (+ ${r} other issues)`),i}class x extends Error{constructor(e){super(E(e)),this.issueTree=e,Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name,this._issues=void 0}get issues(){return void 0===this._issues&&(this._issues=w(this.issueTree)),this._issues}}class S{constructor(e){this.issueTree=e,this.ok=!1,this._issues=void 0,this._message=void 0}get issues(){return void 0===this._issues&&(this._issues=w(this.issueTree)),this._issues}get message(){return void 0===this._message&&(this._message=E(this.issueTree)),this._message}throw(){throw new x(this.issueTree)}}function k(e){return{ok:!0,value:e}}function C(e){return new S({ok:!1,code:"custom_error",error:e})}function R(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let I=Symbol.for("valita.Nothing");class T{optional(){return new O(this)}default(e){let t=k(e);return new H(this.optional(),e=>void 0===e?t:void 0)}assert(e,t){let r={ok:!1,code:"custom_error",error:t};return new H(this,t=>e(t)?void 0:r)}map(e){return new H(this,t=>({ok:!0,value:e(t)}))}chain(e){return new H(this,t=>{let r=e(t);return r.ok?r:r.issueTree})}}class M extends T{nullable(){return ev(X,this)}toTerminals(e){e(this)}try(e,t){let r=1;void 0!==t&&("passthrough"===t.mode?r=0:"strip"===t.mode&&(r=2));let n=this.func(e,r);return void 0===n?{ok:!0,value:e}:n.ok?{ok:!0,value:n.value}:new S(n)}parse(e,t){let r=1;void 0!==t&&("passthrough"===t.mode?r=0:"strip"===t.mode&&(r=2));let n=this.func(e,r);if(void 0===n)return e;if(n.ok)return n.value;throw new x(n)}}class O extends T{constructor(e){super(),this.type=e,this.name="optional"}func(e,t){return void 0===e||e===I?void 0:this.type.func(e,t)}toTerminals(e){e(this),e(Z),this.type.toTerminals(e)}optional(){return this}}function P(e,t){return"number"==typeof e?t<32?e>>>t&1:0:e[t>>5]>>>t%32&1}class D extends M{constructor(e,t,r){super(),this.shape=e,this.restType=t,this.checks=r,this.name="object"}check(e,t){return new D(this.shape,this.restType,[...this.checks??[],{func:e,issue:{ok:!1,code:"custom_error",error:t}}])}func(e,t){let r=this._func;return void 0===r&&(r=function(e,t,r){let n=[],i=[];for(let t in e){let r=!1;e[t].toTerminals(e=>{r||="optional"===e.name}),r?i.push(t):n.push(t)}let s=[...n,...i],o=s.length,a={ok:!1,code:"invalid_type",expected:["object"]};if(0===o&&t?.name==="unknown")return function(e,t){if(!R(e))return a;if(void 0!==r){for(let t=0;t<r.length;t++)if(!r[t].func(e))return r[t].issue}};let l=s.map(t=>e[t]),u=n.length,c=Object.create(null);s.forEach((e,t)=>{c[e]=~t});let h=n.map(e=>y(e,{ok:!1,code:"missing_value"}));function d(e,t,r){"__proto__"===t?Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}):e[t]=r}return function(e,n){let i,f;if(!R(e))return a;let p=!1,m=e,g=0,w=0;if(0!==n||void 0!==t)for(let r in e){let a;let u=e[r],h=~c[r];if(h>=0)w++,g=function e(t,r){if("number"!=typeof t){let e=r>>5;for(let r=t.length;r<=e;r++)t.push(0);return t[e]|=1<<r%32,t}return r<32?t|1<<r:e([t,0],r)}(g,h),a=l[h].func(u,n);else if(void 0!==t)a=t.func(u,n);else{if(1===n)void 0===f?f=[r]:f.push(r);else if(2===n&&void 0===i&&!p){m={},p=!0;for(let t=0;t<o;t++)if(P(g,t)){let r=s[t];d(m,r,e[r])}}continue}if(void 0===a)p&&void 0===i&&d(m,r,u);else if(a.ok){if(void 0===i){if(!p){if(m={},p=!0,void 0===t){for(let t=0;t<o;t++)if(t!==h&&P(g,t)){let r=s[t];d(m,r,e[r])}}else for(let t in e)d(m,t,e[t])}d(m,r,a.value)}}else i=v(i,y(r,a))}if(w<o)for(let r=0;r<o;r++){if(P(g,r))continue;let a=s[r],c=e[a];if(void 0===c&&!(a in e)){if(r<u){i=v(i,h[r]);continue}c=I}let f=l[r].func(c,n);if(void 0===f)p&&void 0===i&&c!==I&&d(m,a,c);else if(f.ok){if(void 0===i){if(!p){if(m={},p=!0,void 0===t){for(let t=0;t<o;t++)if(t<r||P(g,t)){let r=s[t];d(m,r,e[r])}}else{for(let t in e)d(m,t,e[t]);for(let t=0;t<r;t++)if(!P(g,t)){let r=s[t];d(m,r,e[r])}}}d(m,a,f.value)}}else i=v(i,y(a,f))}if(void 0!==f&&(i=v(i,{ok:!1,code:"unrecognized_keys",keys:f})),void 0===i&&void 0!==r){for(let e=0;e<r.length;e++)if(!r[e].func(m))return r[e].issue}return void 0===i&&p?{ok:!0,value:m}:i}}(this.shape,this.restType,this.checks),this._func=r),r(e,t)}rest(e){return new D(this.shape,e)}extend(e){return new D({...this.shape,...e},this.restType)}pick(...e){let t={};return e.forEach(e=>{t[e]=this.shape[e]}),new D(t,void 0)}omit(...e){let t={...this.shape};return e.forEach(e=>{delete t[e]}),new D(t,this.restType)}partial(){let e={};return Object.keys(this.shape).forEach(t=>{e[t]=this.shape[t].optional()}),new D(e,this.restType?.optional())}}class A extends M{constructor(e,t){super(),this.head=e,this.name="array",this.rest=t??F,this.minLength=this.head.length,this.maxLength=t?1/0:this.minLength,this.invalidType={ok:!1,code:"invalid_type",expected:["array"]},this.invalidLength={ok:!1,code:"invalid_length",minLength:this.minLength,maxLength:this.maxLength}}func(e,t){let r;if(!Array.isArray(e))return this.invalidType;let n=e.length,i=this.minLength,s=this.maxLength;if(n<i||n>s)return this.invalidLength;let o=e;for(let n=0;n<e.length;n++){let s=(n<i?this.head[n]:this.rest).func(e[n],t);void 0!==s&&(s.ok?(o===e&&(o=e.slice()),o[n]=s.value):r=v(r,y(n,s)))}return r||(e===o?void 0:{ok:!0,value:o})}}function L(e){let t=typeof e;return"object"!==t?t:null===e?"null":Array.isArray(e)?"array":t}function N(e){return Array.from(new Set(e))}function $(e){let t=new Map,r=new Map,n=new Map,i=[],s=[],o=[];e.forEach(({root:e,terminal:a})=>{if(t.set(e,t.get(e)??t.size),"never"===a.name);else if("optional"===a.name)s.push(e);else if("unknown"===a.name)i.push(e);else if("literal"===a.name){let t=r.get(a.value)||[];t.push(e),r.set(a.value,t),o.push(L(a.value))}else{let t=n.get(a.name)||[];t.push(e),n.set(a.name,t),o.push(a.name)}}),r.forEach((e,t)=>{let i=n.get(L(t));i&&(i.push(...e),r.delete(t))});let a=(e,r)=>(t.get(e)??0)-(t.get(r)??0);return n.forEach((e,t)=>n.set(t,N(e.concat(i).sort(a)))),r.forEach((e,t)=>r.set(t,N(e.concat(i)).sort(a))),{types:n,literals:r,unknowns:N(i).sort(a),optionals:N(s).sort(a),expectedTypes:N(o)}}class j extends M{constructor(e){super(),this.options=e,this.name="union"}toTerminals(e){this.options.forEach(t=>t.toTerminals(e))}func(e,t){let r=this._func;if(void 0===r){let e=[];this.options.forEach(t=>t.toTerminals(r=>{e.push({root:t,terminal:r})}));let t=function(e){let{expectedTypes:t,literals:r,types:n,unknowns:i,optionals:s}=$(e),o=0===n.size&&0===i.length?{ok:!1,code:"invalid_literal",expected:Array.from(r.keys())}:{ok:!1,code:"invalid_type",expected:t},a=r.size>0?r:void 0,l=n.size>0?{}:void 0;for(let[e,t]of n)l[e]=t;return function(e,t){let r;if(!(r=e===I?s:l?.[L(e)]??a?.get(e)??i))return o;let n=0,u=o;for(let i=0;i<r.length;i++){let s=r[i].func(e,t);if(void 0===s||s.ok)return s;u=n>0?v(u,s):s,n++}return n>1?{ok:!1,code:"invalid_union",tree:u}:u}}(e),n=function(e){if(e.some(({terminal:e})=>"unknown"===e.name))return;let t=e.filter(e=>"object"===e.terminal.name);if(!(t.length<2))for(let e of function(e){let t=new Map;e.forEach(e=>{for(let r in e)t.set(r,(t.get(r)||0)+1)});let r=[];return t.forEach((t,n)=>{t===e.length&&r.push(n)}),r}(t.map(({terminal:e})=>e.shape))){let r=function(e,t){let r=[];for(let{root:n,terminal:i}of e)i.shape[t].toTerminals(e=>r.push({root:n,terminal:e}));let{types:n,literals:i,optionals:s,unknowns:o,expectedTypes:a}=$(r);if(o.length>0||s.length>1)return;for(let e of i.values())if(e.length>1)return;for(let e of n.values())if(e.length>1)return;let l=y(t,{ok:!1,code:"missing_value"}),u=y(t,0===n.size?{ok:!1,code:"invalid_literal",expected:Array.from(i.keys())}:{ok:!1,code:"invalid_type",expected:a}),c=i.size>0?new Map:void 0;for(let[e,t]of i)c.set(e,t[0]);let h=n.size>0?{}:void 0;for(let[e,t]of n)h[e]=t[0];return function(e,r){let n=e[t];if(void 0===n&&!(t in e))return s.length>0?s[0].func(e,r):l;let i=h?.[L(n)]??c?.get(n);return i?i.func(e,r):u}}(t,e);if(r)return r}}(e);r=n?function(e,r){return R(e)?n(e,r):t(e,r)}:t,this._func=r}return r(e,t)}}class H extends M{constructor(e,t){super(),this.transformed=e,this.transform=t,this.name="transform",this.undef=k(void 0),this.transformChain=void 0,this.transformRoot=void 0}func(e,t){let r,n=this.transformChain;if(!n){n=[];let e=this;for(;e instanceof H;)n.push(e.transform),e=e.transformed;n.reverse(),this.transformChain=n,this.transformRoot=e}let i=this.transformRoot.func(e,t);if(void 0!==i&&!i.ok)return i;void 0!==i?r=i.value:e===I?(r=void 0,i=this.undef):r=e;for(let e=0;e<n.length;e++){let s=n[e](r,t);if(void 0!==s){if(!s.ok)return s;r=s.value,i=s}}return i}toTerminals(e){this.transformed.toTerminals(e)}}class q extends M{constructor(e){super(),this.definer=e,this.name="lazy",this.recursing=!1}func(e,t){return this.type||(this.type=this.definer()),this.type.func(e,t)}toTerminals(e){if(!this.recursing)try{this.recursing=!0,this.type||(this.type=this.definer()),this.type.toTerminals(e)}finally{this.recursing=!1}}}class V extends M{constructor(){super(...arguments),this.name="never",this.issue={ok:!1,code:"invalid_type",expected:[]}}func(e,t){return this.issue}}let F=new V;function U(){return F}class W extends M{constructor(){super(...arguments),this.name="unknown"}func(e,t){}}let B=new W;function z(){return B}class G extends M{constructor(){super(...arguments),this.name="undefined",this.issue={ok:!1,code:"invalid_type",expected:["undefined"]}}func(e,t){return void 0===e?void 0:this.issue}}let Z=new G;function Q(){return Z}class K extends M{constructor(){super(...arguments),this.name="null",this.issue={ok:!1,code:"invalid_type",expected:["null"]}}func(e,t){return null===e?void 0:this.issue}}let X=new K;function J(){return X}class Y extends M{constructor(){super(...arguments),this.name="number",this.issue={ok:!1,code:"invalid_type",expected:["number"]}}func(e,t){return"number"==typeof e?void 0:this.issue}}let ee=new Y;function et(){return ee}class er extends M{constructor(){super(...arguments),this.name="bigint",this.issue={ok:!1,code:"invalid_type",expected:["bigint"]}}func(e,t){return"bigint"==typeof e?void 0:this.issue}}let en=new er;function ei(){return en}class es extends M{constructor(){super(...arguments),this.name="string",this.issue={ok:!1,code:"invalid_type",expected:["string"]}}func(e,t){return"string"==typeof e?void 0:this.issue}}let eo=new es;function ea(){return eo}class el extends M{constructor(){super(...arguments),this.name="boolean",this.issue={ok:!1,code:"invalid_type",expected:["boolean"]}}func(e,t){return"boolean"==typeof e?void 0:this.issue}}let eu=new el;function ec(){return eu}class eh extends M{constructor(e){super(),this.value=e,this.name="literal",this.issue={ok:!1,code:"invalid_literal",expected:[e]}}func(e,t){return e===this.value?void 0:this.issue}}function ed(e){return new eh(e)}function ef(e){return new D(e,void 0)}function ep(e){return new D({},e??B)}function em(e){return new A([],e)}function eg(e){return new A(e)}function ev(...e){return new j(e)}function ey(e){return new q(e)}var ew=Object.defineProperty,eb=Object.getOwnPropertyDescriptor,e_=Object.getOwnPropertyNames,eE=Object.prototype.hasOwnProperty,ex=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of e_(t))eE.call(e,i)||i===r||ew(e,i,{get:()=>t[i],enumerable:!(n=eb(t,i))||n.enumerable});return e};parseInt("1.0".split(".")[1],10);var eS="/api/1.0",ek=eS+"/license/status",eC=eS+"/license/active";function eR(e){eI(e,"boolean")}function eI(e,t){typeof e!==t&&eM(e,t)}function eT(e){null===e&&eM(e,"object"),eI(e,"object")}function eM(e,t){let r;throw Error((r="Invalid type: ",null==e?r+=e:r+=`${typeof e} \`${e}\``,r+`, expected ${t}`))}async function eO(e,t,r,n,i){i=i.withContext("licenseActive");let s=new URL(eC,t),o=JSON.stringify({licenseKey:r,profileID:n});i.debug?.(`Sending ${s}`,o);let a=await (await e("post",s.toString(),o,{"Content-Type":"application/json",Accept:"application/json"})).text();i.debug?.(`Got ${s}`,a),eT(JSON.parse(a))}async function eP(e,t,r,n){n=n.withContext("getLicenseStatus");let i=new URL(ek,t),s=JSON.stringify({licenseKey:r});n.debug?.(`Sending ${i}`,s);let o=await (await e("post",i.toString(),s,{"Content-Type":"application/json",Accept:"application/json"})).text();n.debug?.(`Got ${i}`,o);let a=JSON.parse(o);return eT(a),eI(a.status,"string"),eR(a.disable),eR(a.pleaseUpdate),a}new URL("https://replicache-license.herokuapp.com/");var eD="This key only good for automated testing",eA=(new URL("http://localhost:8080/"),new URL("https://replicache-license.herokuapp.com/"));function eL(e,t="Assertion failed"){if(!e)throw Error(t)}function eN(e){ej(e,"string")}function e$(e){ej(e,"number")}function ej(e,t){typeof e!==t&&eV(e,t)}function eH(e){null===e&&eV(e,"object"),ej(e,"object")}function eq(e){Array.isArray(e)||eV(e,"array")}function eV(e,t){let r;throw Error((r="Invalid type: ",null==e?r+=e:r+=`${typeof e} \`${e}\``,r+`, expected ${t}`))}function eF(e){if(void 0===e)throw Error("Expected non undefined value")}function eU(){throw Error("Unreachable")}new URL("https://replicache-license-staging.herokuapp.com/");var eW=Object.prototype.hasOwnProperty,eB=Object.hasOwn||((e,t)=>eW.call(e,t));function ez(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;switch(typeof e){case"boolean":case"number":case"string":return!1}if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!ez(e[r],t[r]))return!1;return!0}if(null===e||null===t||Array.isArray(t))return!1;let r=0;for(let n in e)if(eB(e,n)){if(!ez(e[n],t[n]))return!1;r++}let n=0;for(let e in t)eB(t,e)&&n++;return r===n}function eG(e){}async function eZ(e,t,r,n){let i={headers:{"Content-type":"application/json",Authorization:t,"X-Replicache-RequestID":r},body:JSON.stringify(n),method:"POST"},s=new Request(e,i),o=await fetch(s),a=o.status;return 200!==a?[void 0,{httpStatusCode:a,errorMessage:await o.text()}]:[o,{httpStatusCode:a,errorMessage:""}]}function eQ(e,t){var r,n;if(e===t)return 0;if(null===e)return -1;if(null===t)return 1;let i=eK(e),s=eK(t);return"string"==typeof i||"string"==typeof s?(r=String(i))===(n=String(s))?0:r<n?-1:1:i-s}function eK(e){return"string"==typeof e||"number"==typeof e?e:e.order}function eX(e,t){return"object"==typeof e&&null!==e&&e.error===t}function eJ(e){return"string"==typeof e.error}function eY(e){return eX(e,"ClientStateNotFound")}function e0(e){if(!eX(e,"VersionNotSupported"))return!1;let{versionType:t}=e;switch(t){case void 0:case"pull":case"push":case"schema":return!0}return!1}function e1(e){eH(e),e$(e.httpStatusCode),eN(e.errorMessage)}function e2(e){for(let t of(eq(e),e))(function(e){switch(eH(e),e.op){case"put":eN(e.key),e.value;break;case"del":eN(e.key);break;case"clear":break;default:throw Error(`unknown patch op \`${e.op}\`, expected one of \`put\`, \`del\`, \`clear\``)}})(t)}var e9=new WeakSet;new WeakSet;function e8(e){if(void 0!==e)return e}var e4=Promise.resolve(!0),e5=Promise.resolve(!1),e3=(Promise.resolve(void 0),Promise.resolve()),e7=Symbol(),e6=class{o=new Map;#e;constructor(e){this.#e=e}has(e){switch(this.o.get(e)){case void 0:return this.#e.has(e);case e7:return e5;default:return e4}}async get(e){let t=this.o.get(e);switch(t){case e7:return;case void 0:return e8(await this.#e.get(e));default:return t}}put(e,t){return this.o.set(e,t),e3}del(e){return this.o.set(e,e7),e3}release(){this.#e.release()}get closed(){return this.#e.closed}},te={durability:"relaxed"},tt="chunks",tr=class{#e;#t=!1;#r=!1;constructor(e){this.#e=new Promise((t,r)=>{let n=indexedDB.open(e);n.onupgradeneeded=()=>{n.result.createObjectStore(tt)},n.onsuccess=()=>{let e=n.result;e.onversionchange=()=>e.close(),t(e)},n.onerror=()=>r(n.error)})}read(){return this.#n(to)}write(){return this.#n(ts)}async close(){this.#r||(await this.#e).close(),this.#t=!0}get closed(){return this.#t}async #n(e){let t=async e=>{let{promise:t,resolve:r,reject:n}=f(),i=indexedDB.open(e);i.onupgradeneeded=()=>{let t=i.transaction;(function(e){if(null===e)throw Error("Expected non-null value")})(t),t.abort(),this.#r=!0,n(new tl(`Replicache IndexedDB not found: ${e}`))},i.onsuccess=()=>r(i.result),i.onerror=()=>n(i.error);let s=await t;return s.onversionchange=()=>s.close(),s},r=await this.#e;try{return e(r)}catch(n){if(!this.#t&&n instanceof DOMException){if("InvalidStateError"===n.name)return this.#e=t(r.name),e(await this.#e);if("NotFoundError"===n.name)throw this.#r=!0,indexedDB.deleteDatabase(r.name),new tl(`Replicache IndexedDB ${r.name} missing object store. Deleting db.`)}throw n}}},tn=class{#e;#t=!1;constructor(e){this.#e=e}has(e){return new Promise((t,r)=>{let n=ta(this.#e).count(e);n.onsuccess=()=>t(n.result>0),n.onerror=()=>r(n.error)})}get(e){return new Promise((t,r)=>{let n=ta(this.#e).get(e);n.onsuccess=()=>t(e8(n.result)),n.onerror=()=>r(n.error)})}release(){this.#t=!0}get closed(){return this.#t}},ti=class extends e6{#e;#t=!1;constructor(e){super(new tn(e)),this.#e=e}commit(){return 0===this.o.size?e3:new Promise((e,t)=>{let r=this.#e,n=ta(r);for(let[e,t]of this.o)t===e7?n.delete(e):n.put(t,e);r.oncomplete=()=>e(),r.onerror=()=>t(r.error)})}release(){this.#t=!0}get closed(){return this.#t}};function ts(e){return new ti(e.transaction(tt,"readwrite",te))}function to(e){return new tn(e.transaction(tt,"readonly"))}function ta(e){return e.objectStore(tt)}var tl=class extends Error{name="IDBNotFoundError"},tu=class{#e;#t;#r=!1;constructor(e,t){this.#e=e,this.#t=t}release(){this.#t(),this.#r=!0}get closed(){return this.#r}has(e){return Promise.resolve(this.#e.has(e))}get(e){return Promise.resolve(this.#e.get(e))}},tc=class extends e6{#e;constructor(e,t){super(new tu(e,t)),this.#e=e}commit(){return this.o.forEach((e,t)=>{e===e7?this.#e.delete(t):this.#e.set(t,e)}),this.o.clear(),this.release(),e3}},th=new Map,td=class{#e;#t;#r=!1;constructor(e){let t=th.get(e),r,n;t?{lock:r,map:n}=t:(r=new m,n=new Map,th.set(e,{lock:r,map:n})),this.#t=r,this.#e=n}async read(){let e=await this.#t.read();return new tu(this.#e,e)}async write(){let e=await this.#t.write();return new tc(this.#e,e)}close(){return this.#r=!0,e3}get closed(){return this.#r}},tf=class extends Error{name="AbortError"},tp=Promise.resolve();function tm(e,t){return 0===e?tp:new Promise((r,n)=>{let i=setTimeout(()=>{r()},e);t&&t.addEventListener("abort",()=>{clearTimeout(i),n(new tf("Aborted"))})})}async function tg(e,t,r,n,i){if(!i.aborted){for(n=n.withContext("bgIntervalProcess",e),n.debug?.("Starting");!i.aborted;){try{await tm(r(),i)}catch(e){if(!(e instanceof tf))throw e}if(!i.aborted){n.debug?.("Running");try{await t()}catch(e){i.aborted?n.debug?.("Error running most likely due to close.",e):n.error?.("Error running.",e)}}}n.debug?.("Stopping")}}new Promise(()=>{});var tv={};function ty(e){switch(typeof e){case"string":case"number":case"boolean":return JSON.stringify(e);case"undefined":return"undefined";case"bigint":return e.toString()+"n";default:return null===e?"null":Array.isArray(e)?"array":typeof e}}function tw(e,t){if(!t?.length)return ty(e);let r=e;for(let e of t)r=r[e];return ty(r)}function tb(e,t,r=e=>String(e)){if(1===t.length)return r(t[0]);let n=`${r(t[t.length-2])} ${e} ${r(t[t.length-1])}`;return 2===t.length?n:`${t.slice(0,-2).map(r).join(", ")}, ${n}`}function t_(e,t,r){let n=tS(e,t,r);if(!n.ok)throw TypeError(n.error);return n.value}function tE(e,t,r){return tS(e,t,r).ok}function tx(e,t,r){t_(e,t,r)}function tS(e,t,r){let n=t.try(e,r?{mode:r}:void 0);return n.ok?n:{ok:!1,error:function(e,t){let r=e.issues[0],{path:n}=r,i=n?.length?` at ${n.join(".")}`:"";switch(r.code){case"invalid_type":return`Expected ${tb("or",r.expected)}${i}. Got ${tw(t,n)}`;case"missing_value":{let e=n&&n.length>1?` at ${n.slice(0,-1).join(".")}`:"";return r.path?.length?`Missing property ${r.path.at(-1)}${e}`:`TODO Unknown missing property${e}`}case"invalid_literal":return`Expected literal value ${tb("or",r.expected,ty)}${i} Got ${tw(t,n)}`;case"invalid_length":return`Expected array with length ${r.minLength===r.maxLength?r.minLength:`between ${r.minLength} and ${r.maxLength}`}${i}. Got array with length ${t.length}`;case"unrecognized_keys":return 1===r.keys.length?`Unexpected property ${r.keys[0]}${i}`:`Unexpected properties ${tb("and",r.keys)}${i}`;case"invalid_union":return`Invalid union value${i}`;case"custom_error":{let{error:e}=r;return`${e?"string"==typeof e?e:e.message??"unknown":"unknown"}${i}. Got ${tw(t,n)}`}}}(n,e)}}function tk(e){return e}function tC(e){return ef(e)}function tR(e){return em(e)}function tI(e){return ep(e)}((e,t)=>{for(var r in t)ew(e,r,{get:t[r],enumerable:!0})})(tv,{assert:()=>tx,is:()=>tE,parse:()=>t_,readonly:()=>tk,readonlyArray:()=>tR,readonlyObject:()=>tC,readonlyRecord:()=>tI,test:()=>tS}),ex(tv,o,"default"),n&&ex(n,o,"default");var tT="u">typeof crypto&&"u">typeof crypto.randomUUID?function(){return crypto.randomUUID()}:function(){var e;return e=Uint8Array.from({length:36},()=>256*Math.random()),tM.map((t,r)=>{switch(t){case 0:return(15&e[r]).toString(16);case 1:return((3&e[r])+8).toString(16);case 3:return"4";case 2:return"-"}}).join("")},tM=[0,0,0,0,0,0,0,0,2,0,0,0,0,2,3,0,0,0,2,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0],tO=/^[0-9a-v-]+$/,tP="00000000-0000-4000-8000-000000000000",tD=function(e,t){let r,n=0;return()=>{var e;r||(r=""+t().replaceAll("-","").slice(0));let i=String(n++);return e=r,eL(i.length<=12),e+i.padStart(12,"0")}}(0,tT);function tA(e){t_(e,tL,void 0)}var tL=tv.string().assert(function(e){return"string"==typeof e&&tO.test(e)},"Invalid hash"),tN=class{hash;data;meta;constructor(e,t,r){eL(!r.includes(e),"Chunk cannot reference itself"),this.hash=e,this.data=t,this.meta=r}};function t$(e){if(!Array.isArray(e))throw Error("Meta must be an array");for(let t of e)eN(t)}function tj(){throw Error("unexpected call to compute chunk hash")}function tH(e,t,r){return new tq(e,t,r).compute()}var tq=class{#e;#t;#r;#n;#i;#s;#o;#a;constructor(e,t,r){let n=[],i=[];for(let t of e)t.old!==t.new&&(t.old&&i.push(t.old),t.new&&n.push(t.new));this.#e=n,this.#t=i,this.#r=t,this.#n=r,this.#s=new Map,this.#o=new Map,this.#a=void 0!==r.areRefsCounted,this.#i=this.#a?new Set:null}async compute(){for(let e of this.#e)await this.#l(e,1);if(await Promise.all(Array.from(this.#r.values(),e=>this.#u(e))),this.#a){let e;eL(this.#n.areRefsCounted),eL(this.#i);do for(let t of(e=!1,this.#r.values()))if(!this.#n.areRefsCounted(t)&&!this.#i.has(t)&&0!==this.#s.get(t)){await this.#c(t,1),e=!0;break}while(e)}for(let e of this.#t)await this.#l(e,-1);return this.#s}async #l(e,t){await this.#u(e),this.#h(e,t)&&await this.#c(e,t)}async #c(e,t){if(e===tP)return;let r=await this.#n.getRefs(e);if(void 0!==r){this.#i?.add(e);let n=r.map(e=>this.#l(e,t));await Promise.all(n)}}#u(e){let t=this.#o.get(e);return void 0===t&&(t=(async()=>{let t=await this.#n.getRefCount(e)||0;return this.#s.set(e,t),t})(),this.#o.set(e,t)),t}#h(e,t){let r=this.#s.get(e);return e$(r),this.#s.set(e,r+t),0===r&&1===t||1===r&&-1===t}};function tV(e){return`c/${e}/d`}function tF(e){return`c/${e}/m`}function tU(e){return`c/${e}/r`}var tW=class extends Error{name="ChunkNotFoundError";hash;constructor(e){super(`Chunk not found ${e}`),this.hash=e}};async function tB(e,t){let r=await e.getChunk(t);if(r)return r;throw new tW(t)}async function tz(e,t){let r=await t.getHead(e);return eL(r,`Missing head ${e}`),r}var tG=class{#e;#t;#r;constructor(e,t,r){this.#e=e,this.#t=t,this.#r=r}async read(){return new tZ(await this.#e.read(),this.#r)}async write(){return new tQ(await this.#e.write(),this.#t,this.#r)}close(){return this.#e.close()}},tZ=class{e;assertValidHash;constructor(e,t){this.e=e,this.assertValidHash=t}hasChunk(e){return this.e.has(tV(e))}async getChunk(e){let t=await this.e.get(tV(e));if(void 0===t)return;let r=await this.e.get(tF(e)),n;return void 0!==r?(t$(r),n=r):n=[],new tN(e,t,n)}mustGetChunk(e){return tB(this,e)}async getHead(e){let t=await this.e.get(`h/${e}`);if(void 0!==t)return tA(t),t}release(){this.e.release()}get closed(){return this.e.closed}},tQ=class extends tZ{#e;#t=new Set;#r=new Map;constructor(e,t,r){super(e,r),this.#e=t}createChunk=(e,t)=>new tN((0,this.#e)(),e,t);get kvWrite(){return this.e}async putChunk(e){let{hash:t,data:r,meta:n}=e;this.assertValidHash(t);let i=tV(t),s=this.e.put(i,r),o;if(n.length>0){for(let e of n)this.assertValidHash(e);o=this.e.put(tF(t),n)}this.#t.add(t),await s,await o}setHead(e,t){return this.#n(e,t)}removeHead(e){return this.#n(e,void 0)}async #n(e,t){let r=await this.getHead(e),n=`h/${e}`,i;i=void 0===t?this.e.del(n):this.e.put(n,t);let s=this.#r.get(e);void 0===s?this.#r.set(e,{new:t,old:r}):s.new=t,await i}async commit(){let e=await tH(this.#r.values(),this.#t,this);await this.#i(e),await this.e.commit()}async getRefCount(e){let t=await this.e.get(tU(e));if(void 0!==t){if(e$(t),t<0||t>65535||t!==(0|t))throw Error(`Invalid ref count ${t}. We expect the value to be a Uint16`);return t}}async getRefs(e){let t=await this.e.get(tF(e));return void 0===t?[]:(t$(t),t)}async #i(e){let t=[];for(let[r,n]of e)if(0===n)t.push(this.#s(r));else{let e=tU(r);t.push(this.e.put(e,n))}await Promise.all(t)}async #s(e){await Promise.all([this.e.del(tV(e)),this.e.del(tF(e)),this.e.del(tU(e))]),this.#t.delete(e)}release(){this.e.release()}};function tK(e){if(e!==(0|e)||e<4||e>7)throw Error(`Unsupported format version: ${e}`);return e}var tX=class{#e;#t;#r;constructor(e,t){this.#e=e,this.#t=t,this.#r=new tr(t)}read(){return this.#n(e=>e.read())}write(){return this.#n(e=>e.write())}async #n(e){try{return await e(this.#r)}catch(t){if(tJ()&&t instanceof DOMException&&"InvalidStateError"===t.name&&"A mutation operation was attempted on a database that did not allow mutations."===t.message)return this.#r instanceof tr&&(this.#e.info?.("Switching to MemStore because of Firefox private browsing error"),this.#r=new td(this.#t)),e(this.#r);throw t}}close(){return this.#r.close()}get closed(){return this.#r.closed}};function tJ(){return navigator.userAgent.includes("Firefox")}function tY(e,t){return t2(e.read(),t)}function t0(e,t){return t2(e.write(),t)}function t1(e,t){return t2(e.write(),async e=>{let r=await t(e);return await e.commit(),r})}async function t2(e,t){let r=await e;try{return await t(r)}finally{r.release()}}var t9=ep(ef({prefix:tv.string().optional(),jsonPointer:tv.string(),allowEmpty:tv.boolean().optional()}));function t8(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let[r,n]of Object.entries(e)){let e=t[r];if(!e||n.jsonPointer!==e.jsonPointer||(n.allowEmpty??!1)!==(e.allowEmpty??!1)||(n.prefix??"")!==(e.prefix??""))return!1}return!0}var t4=ef({headHash:tL,mutatorNames:em(tv.string()),indexes:t9,mutationIDs:ep(tv.number()),lastServerAckdMutationIDs:tv.record(tv.number()),disabled:tv.boolean()}),t5="client-groups";async function t3(e,t){let r=await t.getChunk(e);return function(e){eH(e);let t=new Map;for(let[r,n]of Object.entries(e))void 0!==n&&(t_(n,t4,void 0),t.set(r,n));return t}(r?.data)}async function t7(e){let t=await e.getHead(t5);return t?t3(t,e):new Map}async function t6(e,t){let r=await t7(t);for(let[t,n]of e)rt(n,r.get(t));return rr(e,t)}async function re(e,t,r){let n=await t7(r);rt(t,n.get(e));let i=new Map(n);return i.set(e,t),rr(i,r)}function rt(e,t){let r=new Set(e.mutatorNames);eL(r.size===e.mutatorNames.length,"A client group's mutatorNames must be a set."),void 0!==t&&(eL(t8(t.indexes,e.indexes),"A client group's index definitions must never change."),eL(rn(r,t.mutatorNames),"A client group's mutatorNames must never change."))}async function rr(e,t){let r=function(e,t){let r={};for(let[n,i]of e.entries())t.assertValidHash(i.headHash),r[n]={...i,mutatorNames:[...i.mutatorNames.values()]};return r}(e,t),n=Array.from(e.values(),e=>e.headHash),i=t.createChunk(r,n);return await t.putChunk(i),await t.setHead(t5,i.hash),e}function rn(e,t){if(t.length!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;return!0}async function ri(e,t){return(await t7(t)).get(e)}function rs(e){for(let[t,r]of Object.entries(e.mutationIDs)){let n=e.lastServerAckdMutationIDs[t];if(void 0===n&&0!==r||n<r)return!0}return!1}async function ro(e,t){let r=await ri(e,t);if(!r)return;let n={...r,disabled:!0};await re(e,n,t)}function ra(e,t){let r=e.length,n=t.length,i=Math.min(r,n);for(let r=0;r<i;){let n=e.codePointAt(r),i=t.codePointAt(r);if(n!==i){if(n<128&&i<128)return n-i;let e=rh(n,ru),t=rh(i,rc);return function(e,t,r,n){let i=Math.min(t,n);for(let t=0;t<i;t++){let n=e[t],i=r[t];if(n!==i)return n-i}return t-n}(ru,e,rc,t)}r+=n>65535?2:1}return r-n}var rl=()=>Array.from({length:4},()=>0),ru=rl(),rc=rl();function rh(e,t){let r,n;if(e<128)return t[0]=e,1;if(e<=2047)r=1,n=192;else if(e<=65535)r=2,n=224;else if(e<=1114111)r=3,n=240;else throw Error("Invalid code point");t[0]=(e>>6*r)+n;let i=1;for(;r>0;r--){let n=e>>6*(r-1);t[i++]=128|63&n}return i}function rd(e,t){let r=0;for(;r<e;){let n=r+(e-r>>1),i=t(n);if(0===i)return n;i>0?r=n+1:e=n}return r}function*rf(...e){for(let t of e)yield*t}function rp(e,t,r){return[e,r>=7?t:t.map(e=>e.slice(0,2))]}async function rm(e,t,r,n){let i=await r.getNode(t);if(n!==r.rootHash)return rm(e,r.rootHash,r,r.rootHash);if(rk(i))return i;let{entries:s}=i,o=rg(e,s);return o===s.length&&o--,rm(e,s[o][1],r,n)}function rg(e,t){return rd(t.length,r=>ra(e,t[r][0]))}function rv(e,t,r){return e!==t.length&&t[e][0]===r}function ry(e,t,r){if(t>=7)return e;eq(e),eL(e.length>=2);let[n,i]=e;e$(n),eq(i);let s=n>0?eN:eG;if(t>=7){for(let e of i)eq(e),eL(e.length>=3),eN(e[0]),s(e[1]),e$(e[2]);return e}return[n,i.map(e=>{let t;return eq(e),eL(e.length>=2),eN(e[0]),s(e[1]),t=r(e[0],e[1]),[e[0],e[1],t]})]}var rw=class{entries;hash;isMutable;#e=-1;constructor(e,t,r){this.entries=e,this.hash=t,this.isMutable=r}maxKey(){return this.entries[this.entries.length-1][0]}getChildNodeSize(e){if(-1!==this.#e)return this.#e;let t=e.chunkHeaderSize;for(let e of this.entries)t+=e[2];return this.#e=t}c(e){this.#e=-1,e.updateNode(this)}};function rb(e,t){return rp(e.level,e.entries,t)}var r_=class extends rw{level=0;set(e,t,r,n){let i,s=rg(e,this.entries);return i=rv(s,this.entries,e)?1:0,Promise.resolve(this.#e(n,s,i,[e,t,r]))}#e(e,t,r,...n){if(this.isMutable)return this.entries.splice(t,r,...n),this.c(e),this;let i=rE(this.entries,t,r,...n);return e.newDataNodeImpl(i)}del(e,t){let r=rg(e,this.entries);return rv(r,this.entries,e)?Promise.resolve(this.#e(t,r,1)):Promise.resolve(this)}async *keys(e){for(let e of this.entries)yield e[0]}async *entriesIter(e){for(let e of this.entries)yield e}};function rE(e,t,r,...n){let i=e.slice(0,t);for(let e=0;e<n.length;e++)i.push(n[e]);for(let n=t+r;n<e.length;n++)i.push(e[n]);return i}var rx=class e extends rw{level;constructor(e,t,r,n){super(e,t,n),this.level=r}async set(e,t,r,n){let i=rg(e,this.entries);i===this.entries.length&&i--;let s=this.entries[i][1],o=await (await n.getNode(s)).set(e,t,r,n),a=o.getChildNodeSize(n);if(a>n.maxSize||a<n.minSize)return this.#e(n,i,o);let l=rT(o,n.getEntrySize);return this.#t(n,i,l)}async #e(e,t,r){let n=this.level-1,i=this.entries,s,o,a;if(t>0){let n=i[t-1][1];s=rf((await e.getNode(n)).entries,r.entries),o=t-1,a=2}else if(t<i.length-1){let n=i[t+1][1],l=await e.getNode(n);s=rf(r.entries,l.entries),o=t,a=2}else s=r.entries,o=t,a=1;let l=rC(s,e=>e[2],e.minSize-e.chunkHeaderSize,e.maxSize-e.chunkHeaderSize),u=[];for(let t of l){let r=rT(e.newNodeImpl(t,n),e.getEntrySize);u.push(r)}if(this.isMutable)return this.entries.splice(o,a,...u),this.c(e),this;let c=rE(i,o,a,...u);return e.newInternalNodeImpl(c,this.level)}#t(e,t,r){if(this.isMutable)return this.entries.splice(t,1,r),this.c(e),this;let n=rE(this.entries,t,1,r);return e.newInternalNodeImpl(n,this.level)}async del(e,t){let r=rg(e,this.entries);if(r===this.entries.length)return this;let n=this.entries[r][1],i=await t.getNode(n),s=i.hash,o=await i.del(e,t);if(o.hash===s)return this;if(0===o.entries.length){let e=rE(this.entries,r,1);return t.newInternalNodeImpl(e,this.level)}if(0===r&&1===this.entries.length)return o;if(o.getChildNodeSize(t)>t.minSize){let e=rT(o,t.getEntrySize);return this.#t(t,r,e)}return this.#e(t,r,o)}async *keys(e){for(let t of this.entries)yield*(await e.getNode(t[1])).keys(e)}async *entriesIter(e){for(let t of this.entries)yield*(await e.getNode(t[1])).entriesIter(e)}getChildren(e,t,r){let n=[];for(let i=e;i<t&&i<this.entries.length;i++)n.push(r.getNode(this.entries[i][1]));return Promise.all(n)}async getCompositeChildren(t,r,n){let{level:i}=this;if(0===r)return new e([],tD(),i-1,!0);let s=await this.getChildren(t,t+r,n);if(i>1){let t=[];for(let e of s)t.push(...e.entries);return new e(t,tD(),i-1,!0)}eL(1===i);let o=[];for(let e of s)o.push(...e.entries);return new r_(o,tD(),!0)}};function rS(e,t,r,n){return 0===r?new r_(e,t,n):new rx(e,t,r,n)}function rk(e){return 0===e.level}function rC(e,t,r,n){let i=[],s=[],o=0,a=[];for(let l of e){let e=t(l);e>=n?(a.length>0&&(i.push(a),s.push(o)),i.push([l]),s.push(e),o=0,a=[]):o+e>=r?(a.push(l),i.push(a),s.push(o+e),o=0,a=[]):(o+=e,a.push(l))}return o>0&&(s.length>0&&o+s[s.length-1]<=n?i[i.length-1].push(...a):i.push(a)),i}var rR=rp(0,[],7),rI=new r_([],tP,!1);function rT(e,t){let r=e.maxKey(),n=e.hash,i=t(r,n);return[r,n,i]}function rM(e){switch(typeof e){case"string":return 5+e.length;case"number":return e===(0|e)?e<=-1073741824||e>=1073741824-1?6:5:9;case"boolean":return 1;case"object":if(null===e)return 1;if(Array.isArray(e)){let t=6;for(let r of e)t+=rM(r);return t}{let t=6;for(let r in e)if(eB(e,r)){let n=e[r];void 0!==n&&(t+=rM(r)+rM(n))}return t}}throw Error(`Invalid value. type: ${typeof e}, value: ${e}`)}function rO(e,t){return 11+rM(e)+rM(t)}var rP=class{p=new Map;a;l;rootHash;getEntrySize;chunkHeaderSize;constructor(e,t,r=tP,n=rO,i=11){this.a=e,this.l=t,this.rootHash=r,this.getEntrySize=n,this.chunkHeaderSize=i}async getNode(e){if(e===tP)return rI;let t=this.p.get(e);if(t)return t;let r=ry((await this.a.mustGetChunk(e)).data,this.l,this.getEntrySize),n=rS(r[1],e,r[0],!1);return this.p.set(e,n),n}async get(e){let t=await rm(e,this.rootHash,this,this.rootHash),r=rg(e,t.entries);if(rv(r,t.entries,e))return t.entries[r][1]}async has(e){let t=await rm(e,this.rootHash,this,this.rootHash);return rv(rg(e,t.entries),t.entries,e)}async isEmpty(){let{rootHash:e}=this,t=await this.getNode(this.rootHash);return this.rootHash!==e?this.isEmpty():0===t.entries.length}scan(e){return rA(this.rootHash,()=>this.rootHash,this.rootHash,e,async e=>{let t=await this.getNode(e);return t?[t.level,t.isMutable?t.entries.slice():t.entries]:ry((await this.a.mustGetChunk(e)).data,this.l,this.getEntrySize)})}async *keys(){yield*(await this.getNode(this.rootHash)).keys(this)}async *entries(){yield*(await this.getNode(this.rootHash)).entriesIter(this)}[Symbol.asyncIterator](){return this.entries()}async *diff(e){let[t,r]=await Promise.all([this.getNode(this.rootHash),e.getNode(e.rootHash)]);yield*rD(r,t,e,this)}};async function*rD(e,t,r,n){if(e.level>t.level){let i=await e.getCompositeChildren(0,e.entries.length,r);yield*rD(i,t,r,n);return}if(t.level>e.level){let i=await t.getCompositeChildren(0,t.entries.length,n);yield*rD(e,i,r,n);return}if(rk(e)&&rk(t)){yield*function*(e,t){let r=e.length,n=t.length,i=0,s=0;for(;i<r&&s<n;){let r=e[i][0],n=t[s][0];r===n?(ez(e[i][1],t[s][1])||(yield{op:"change",key:r,oldValue:e[i][1],newValue:t[s][1]}),i++,s++):r<n?(yield{op:"del",key:r,oldValue:e[i][1]},i++):(yield{op:"add",key:n,newValue:t[s][1]},s++)}for(;i<r;i++)yield{op:"del",key:e[i][0],oldValue:e[i][1]};for(;s<n;s++)yield{op:"add",key:t[s][0],newValue:t[s][1]}}(e.entries,t.entries);return}for(let i of function*(e,t){let r=0,n=0,i;function s(e,t){-1===e[3]&&(e[3]=t)}function o(){return[r,0,0,-1]}for(;r<e.length&&n<t.length;)e[r][0]===t[n][0]?(ez(e[r][1],t[n][1])?i&&(s(i,0),yield i,i=void 0):(i||(i=o()),i[2]++,i[1]++,s(i,n)),r++,n++):e[r][0]<t[n][0]?(i||(i=o()),i[1]++,r++):(i||(i=o()),i[2]++,s(i,n),n++);n<t.length&&(i||(i=o()),i[2]+=t.length-n,s(i,n)),r<e.length&&(i||(i=o()),i[1]+=e.length-r),i&&(s(i,0),yield i)}(e.entries,t.entries)){let[s,o]=await Promise.all([e.getCompositeChildren(i[0],i[1],r),t.getCompositeChildren(i[3],i[2],n)]);yield*rD(s,o,r,n)}}async function*rA(e,t,r,n,i){if(r===tP)return;let s=await i(r),o=s[1],a=0;if(n&&(a=rg(n,o)),s[0]>0)for(;a<o.length;a++)yield*rA(e,t,o[a][1],n,i),n="";else for(;a<o.length;a++){let r=t();if(e!==r){yield*rA(r,t,r,o[a][0],i);return}yield o[a]}}async function rL(e,t){let r=[],n="add"===t?e=>({op:"add",key:e[0],newValue:e[1]}):e=>({op:"del",key:e[0],oldValue:e[1]});for await(let t of e.entries())r.push(n(t));return r}var rN="main";function r$(e){return rY(e.meta)}function rj(e){return 5===e.meta.type||3===e.meta.type}var rH=class{chunk;constructor(e){this.chunk=e}get meta(){return this.chunk.data.meta}get valueHash(){return this.chunk.data.valueHash}getMutationID(e,t){return rq(e,t,this.meta)}async getNextMutationID(e,t){return await this.getMutationID(e,t)+1}get indexes(){return this.chunk.data.indexes}};async function rq(e,t,r){switch(r.type){case 1:case 3:return r.lastMutationID;case 5:return r.lastMutationIDs[e]??0;case 2:return r.mutationID;case 4:{if(r.clientID===e)return r.mutationID;let{basisHash:n}=r,i=await rX(n,t);return rq(e,t,i.meta)}default:eU()}}async function rV(e,t){return(await rK(e,t)).filter(e=>r$(e)||function(e){return 2===e.type}(e.meta))}async function rF(e,t){return(await rK(e,t)).filter(e=>r$(e))}async function rU(e,t,r){let n=[],i=new Map(Object.entries(t));for(;!rj(e)&&i.size>0;){if(r$(e)){let{meta:t}=e,r=i.get(t.clientID);void 0!==r&&(t.mutationID<=r?i.delete(t.clientID):n.push(e))}let{basisHash:t}=e.meta;if(null===t)throw Error(`Commit ${e.chunk.hash} has no basis`);e=await rX(t,r)}return n}async function rW(e,t){let r=await t.getHead(e);return eL(r,`Missing head ${e}`),rz(r,t)}async function rB(e,t){return(await rz(e,t)).chunk.hash}async function rz(e,t){return rG(await rX(e,t),t)}async function rG(e,t){for(;!rj(e);){let{meta:r}=e;if(rY(r))e=await rX(r.baseSnapshotHash,t);else{let{basisHash:n}=r;if(null===n)throw Error(`Commit ${e.chunk.hash} has no basis`);e=await rX(n,t)}}return e}function rZ(e,t){let r=e.meta;return 5===r.type?[r.lastMutationIDs[t]??0,r.cookieJSON]:[r.lastMutationID,r.cookieJSON]}function rQ(e,t){return eQ(e.meta.cookieJSON,t.meta.cookieJSON)}async function rK(e,t){let r=await rX(e,t),n=[];for(;!rj(r);){let{meta:e}=r,{basisHash:i}=e;if(null===i)throw Error(`Commit ${r.chunk.hash} has no basis`);n.push(r),r=await rX(i,t)}return n.push(r),n}async function rX(e,t){var r;return function(e){let{data:t}=e,r=new Set;for(let e of t.indexes){let{name:t}=e.definition;if(r.has(t))throw Error(`Duplicate index ${t}`);r.add(t)}}(r=await t.mustGetChunk(e)),new rH(r)}async function rJ(e,t){return rX(await tz(e,t),t)}function rY(e){return 4===e.type}function r0(e){return 2===e.type}function r1(e){null!==e.basisHash&&tA(e.basisHash),e.cookieJSON,function(e){for(let t of(eH(e),Object.values(e)))e$(t)}(e.lastMutationIDs)}function r2(e){r1(e.meta)}function r9(e,t,r,n,i){return r5({type:5,basisHash:e,lastMutationIDs:t,cookieJSON:r},n,i)}function r8(e,t){return new rH(e(t,r4(t)))}function r4(e){let t=[e.valueHash],{meta:r}=e;switch(r.type){case 1:case 2:case 4:r.basisHash&&t.push(r.basisHash);break;case 3:case 5:break;default:eU()}for(let r of e.indexes)t.push(r.valueHash);return t}function r5(e,t,r){return{meta:e,valueHash:t,indexes:r}}async function r3(e){let t=[];for await(let r of e)t.push(r);return t}function r7(e,t){return r3(t.diff(e))}var r6=class extends rP{#e=new p;#t=new Map;minSize;maxSize;constructor(e,t,r=tP,n=8192,i=16384,s=rO,o){super(e,t,r,s,o),this.minSize=n,this.maxSize=i}#r(e){eL(e.isMutable),this.#t.set(e.hash,e),this.p.set(e.hash,e)}updateNode(e){eL(e.isMutable),this.#t.delete(e.hash),e.hash=tD(),this.#r(e)}newInternalNodeImpl(e,t){let r=new rx(e,tD(),t,!0);return this.#r(r),r}newDataNodeImpl(e){let t=new r_(e,tD(),!0);return this.#r(t),t}newNodeImpl(e,t){let r=rS(e,tD(),t,!0);return this.#r(r),r}put(e,t){return this.#e.withLock(async()=>{let r=await this.getNode(this.rootHash),n=this.getEntrySize(e,t),i=await r.set(e,t,n,this);if(i.getChildNodeSize(this)>this.maxSize){let e=this.chunkHeaderSize,t=rC(i.entries,e=>e[2],this.minSize-e,this.maxSize-e),{level:r}=i,n=t.map(e=>rT(this.newNodeImpl(e,r),this.getEntrySize)),s=this.newInternalNodeImpl(n,r+1);this.rootHash=s.hash;return}this.rootHash=i.hash})}del(e){return this.#e.withLock(async()=>{let t=await (await this.getNode(this.rootHash)).del(e,this),r=this.rootHash!==t.hash;return r&&(t.level>0&&1===t.entries.length?this.rootHash=t.entries[0][1]:this.rootHash=t.hash),r})}clear(){return this.#e.withLock(()=>{this.#t.clear(),this.rootHash=tP})}flush(){return this.#e.withLock(async()=>{let e=this.a;if(this.rootHash===tP){let t=e.createChunk(rR,[]);return await e.putChunk(t),t.hash}let t=[],r=function e(t,r,n,i,s){let o=i.get(t);if(void 0===o)return t;if(rk(o)){let e=n(rb(o,s),[]);return r.push(e),e.hash}let a=[],{entries:l}=o;for(let t=0;t<l.length;t++){let o=l[t],u=o[1],c=e(u,r,n,i,s);c!==u&&(l[t]=[o[0],c,o[2]]),a.push(c)}let u=n(rb(o,s),a);return r.push(u),u.hash}(this.rootHash,t,e.createChunk,this.#t,this.l);return await Promise.all(t.map(t=>e.putChunk(t))),this.#t.clear(),this.rootHash=r,r})}};function ne(e){let t;return()=>(void 0===t&&(t=e()),t)}var nt=class{meta;map;constructor(e,t){this.meta=e,this.map=t}},nr=class extends nt{flush(){return this.map.flush()}clear(){return this.map.clear()}};async function nn(e,t,r,n,i,s,o){try{for(let e of function(e,t,r,n){let i=function(e,t){if(""===t)return e;if(!t.startsWith("/"))throw Error(`Invalid JSON pointer: ${t}`);let r=t.split("/").slice(1).map(e=>e.replace(/~1/g,"/").replace(/~0/g,"~")),n=e;for(let e of r){let t;if(Array.isArray(n)){let r=function(e){if(!(e.startsWith("+")||e.startsWith("0")&&1!==e.length))return parseInt(e,10)}(e);if(void 0===r)return;t=n[r]}else{if(null===n)return;"object"==typeof n&&(t=n[e])}if(void 0===t)return;n=t}return n}(t,r);if(void 0===i){if(n)return[];throw Error(`No value at path: ${r}`)}let s=Array.isArray(i)?i:[i],o=[];for(let t of s)if("string"==typeof t)o.push(ni([t,e]));else throw Error("Unsupported target type");return o}(n,i,s,o))switch(r){case 0:await t.put(e,i);break;case 1:await t.del(e)}}catch(t){e.info?.("Not indexing value",i,":",t)}}function ni(e){let t=e[0],r=e[1];if(t.includes("\x00"))throw Error("Secondary key cannot contain null byte");return"\x00"+t+"\x00"+r}function ns(e,t){let r=ni([e,t||""]);return void 0===t?r.slice(0,r.length-1):r}function no(e){if("\x00"!==e[0])throw Error("Invalid version");let t=e.indexOf("\x00",1);if(-1===t)throw Error("Invalid formatting");return[e.slice(1,t),e.slice(t+1)]}var na=class{#e;map;indexes;constructor(e,t,r){this.#e=e,this.map=t,this.indexes=r}has(e){return this.map.has(e)}get(e){return this.map.get(e)}isEmpty(){return this.map.isEmpty()}getMapForIndex(e){let t=this.indexes.get(e);if(void 0===t)throw Error(`Unknown index name: ${e}`);return t.map}get closed(){return this.#e.closed}close(){this.#e.release()}};async function nl(e,t,r){var n;let i,s;return i=nu(n=await rJ(e,t),t,r),s=new rP(t,r,n.valueHash),new na(t,s,i)}function nu(e,t,r){let n=new Map;for(let i of e.indexes)n.set(i.definition.name,new nt(i,new rP(t,r,i.valueHash)));return n}var nc=class extends Map{set(e,t){return 0===t.length?this:super.set(e,t)}};async function nh(e,t,r,n,i){let s=new nc;if(!n.shouldComputeDiffs())return s;let o=new rP(r,i,e.valueHash),a=new rP(r,i,t.valueHash),l=await r7(o,a);return s.set("",l),await nd(e,t,r,s,n,i),s}async function nd(e,t,r,n,i,s){let o=nu(e,r,s),a=nu(t,r,s);for(let[e,t]of o){if(!i.shouldComputeDiffsForIndex(e))continue;let r=a.get(e);if(void 0!==r){eL(r!==t);let i=await r7(t.map,r.map);a.delete(e),n.set(e,i)}else{let r=await rL(t.map,"del");n.set(e,r)}}for(let[e,t]of a){if(!i.shouldComputeDiffsForIndex(e))continue;let r=await rL(t.map,"add");n.set(e,r)}}var nf=class extends na{#e;#t;#r;#n;#i;constructor(e,t,r,n,i,s,o){super(e,t,i),this.#e=e,this.#t=r,this.#r=n,this.#n=s,this.#i=o,void 0===r?eL(n.basisHash===tP):eL(n.basisHash===r.chunk.hash)}async put(e,t,r){if(1===this.#r.type)throw Error("Not allowed");let n=ne(()=>this.map.get(t));await nv(e,this.indexes,t,n,r),await this.map.put(t,r)}getMutationID(){return rq(this.#n,this.#e,this.#r)}async del(e,t){if(1===this.#r.type)throw Error("Not allowed");let r=ne(()=>this.map.get(t));return void 0!==r&&await nv(e,this.indexes,t,r,void 0),this.map.del(t)}async clear(){if(1===this.#r.type)throw Error("Not allowed");await this.map.clear();let e=[];for(let t of this.indexes.values())e.push(t.clear());await Promise.all(e)}async putCommit(){var e,t;let r=await this.map.flush(),n=[];for(let e of this.indexes.values()){let t=await e.flush(),r={definition:e.meta.definition,valueHash:t};n.push(r)}let i,s=this.#r;switch(s.type){case 2:{let{basisHash:e,mutationID:t,mutatorName:o,mutatorArgsJSON:a,originalHash:l,timestamp:u}=s;i=r8(this.#e.createChunk,r5({type:2,basisHash:e,mutationID:t,mutatorName:o,mutatorArgsJSON:a,originalHash:l,timestamp:u},r,n));break}case 4:{eL(this.#i>=5);let{basisHash:o,mutationID:a,mutatorName:l,mutatorArgsJSON:u,originalHash:c,timestamp:h}=s;e=this.#e.createChunk,t=await rB(o,this.#e),i=r8(e,r5({type:4,basisHash:o,baseSnapshotHash:t,mutationID:a,mutatorName:l,mutatorArgsJSON:u,originalHash:c,timestamp:h,clientID:this.#n},r,n));break}case 3:{eL(this.#i<=4);let{basisHash:e,lastMutationID:t,cookieJSON:o}=s;i=r8(this.#e.createChunk,r5({type:3,basisHash:e,lastMutationID:t,cookieJSON:o},r,n));break}case 5:{eL(this.#i>5);let{basisHash:e,lastMutationIDs:t,cookieJSON:o}=s;i=r8(this.#e.createChunk,r9(e,t,o,r,n));break}case 1:{let{basisHash:e,lastMutationID:t}=s;if(void 0!==this.#t){if(await this.#t.getMutationID(this.#n,this.#e)!==t)throw Error("Index change must not change mutationID");if(this.#t.valueHash!==r)throw Error("Index change must not change valueHash")}i=r8(this.#e.createChunk,r5({type:1,basisHash:e,lastMutationID:t},r,n))}}return await this.#e.putChunk(i.chunk),i}async commit(e){let t=(await this.putCommit()).chunk.hash;return await this.#e.setHead(e,t),await this.#e.commit(),t}async commitWithDiffs(e,t){let r=this.putCommit(),n=await this.#s(t),i=(await r).chunk.hash;return await this.#e.setHead(e,i),await this.#e.commit(),[i,n]}async #s(e){let t,r=new nc;if(!e.shouldComputeDiffs())return r;let n=[];if(this.#t){let e=new rP(this.#e,this.#i,this.#t.valueHash);n=await r7(e,this.map)}for(let[i,s]of(r.set("",n),t=this.#t?nu(this.#t,this.#e,this.#i):new Map,this.indexes)){if(!e.shouldComputeDiffsForIndex(i))continue;let n=t.get(i);eL(s!==n);let o=await (n?r7(n.map,s.map):rL(s.map,"add"));r.set(i,o)}for(let[n,i]of t)if(!this.indexes.has(n)&&e.shouldComputeDiffsForIndex(n)){let e=await rL(i.map,"del");r.set(n,e)}return r}close(){this.#e.release()}};async function np(e,t,r,n,i,s,o,a){let l=await rX(e,i),u=new r6(i,a,l.valueHash),c=await l.getNextMutationID(o,i),h=ny(l,i,a);return new nf(i,u,l,a>=5?{type:4,basisHash:e,baseSnapshotHash:await rB(e,i),mutatorName:t,mutatorArgsJSON:r,mutationID:c,originalHash:n,timestamp:s,clientID:o}:{type:2,basisHash:e,mutatorName:t,mutatorArgsJSON:r,mutationID:c,originalHash:n,timestamp:s},h,o,a)}async function nm(e,t,r,n,i,s,o){eL(o<=4);let a=await rX(e,n),l=new r6(n,o,a.valueHash);return new nf(n,l,a,{basisHash:e,type:3,lastMutationID:t,cookieJSON:r},i,s,o)}async function ng(e,t,r,n,i,s){let o=await rX(e,n),a=new r6(n,s,o.valueHash);return new nf(n,a,o,{basisHash:e,type:5,lastMutationIDs:t,cookieJSON:r},ny(o,n,s),i,s)}async function nv(e,t,r,n,i){let s=[];for(let o of t.values()){let{keyPrefix:t}=o.meta.definition;if(!t||r.startsWith(t)){let t=await n();void 0!==t&&s.push(nn(e,o.map,1,r,t,o.meta.definition.jsonPointer,o.meta.definition.allowEmpty??!1)),void 0!==i&&s.push(nn(e,o.map,0,r,i,o.meta.definition.jsonPointer,o.meta.definition.allowEmpty??!1))}}await Promise.all(s)}function ny(e,t,r){let n=new Map;for(let i of e.indexes)n.set(i.definition.name,new nr(i,new r6(t,r,i.valueHash)));return n}async function nw(e,t,r,n,i,s,o){let a=new r6(t,o);for await(let t of r.scan(n)){let r=t[0];if(!r.startsWith(n))break;await nn(e,a,0,r,t[1],i,s)}return a}var nb=tv.string(),n_=tv.string(),nE=ef({heartbeatTimestampMs:tv.number(),headHash:tL,mutationID:tv.number(),lastServerAckdMutationID:tv.number()}),nx=ef({heartbeatTimestampMs:tv.number(),headHash:tL,tempRefreshHash:tL.nullable(),clientGroupID:nb}),nS=ef({heartbeatTimestampMs:tv.number(),refreshHashes:em(tL),persistHash:tL.nullable(),clientGroupID:nb});function nk(e){return void 0!==e.refreshHashes}function nC(e){return void 0!==e.clientGroupID}var nR="clients",nI=tv.union(nE,nx,nS);function nT(e){t_(e,nE,void 0)}function nM(e){t_(e,nS,void 0)}async function nO(e){return nP(await e.getHead(nR),e)}async function nP(e,t){if(!e)return new Map;let r=await t.getChunk(e);return function(e){eH(e);let t=new Map;for(let r in e)if(eB(e,r)){let n=e[r];void 0!==n&&(t_(n,nI,void 0),t.set(r,n))}return t}(r?.data)}var nD=class extends Error{name="ClientStateNotFoundError";id;constructor(e){super(`Client state not found, id: ${e}`),this.id=e}};async function nA(e,t){if(!await nL(e,t))throw new nD(e)}async function nL(e,t){return!!await nN(e,t)}async function nN(e,t){return(await nO(t)).get(e)}async function n$(e,t){let r=await nN(e,t);if(!r)throw new nD(e);return r}async function nj(e,t,r){let n,i,s=new Set(t);for(let[t,o]of(await t7(e))){if(!o.disabled&&rn(s,o.mutatorNames)&&t8(r,o.indexes))return{type:2,clientGroupID:t,headHash:o.headHash};let a=await rz(o.headHash,e);r2(a);let{cookieJSON:l}=a.meta;(void 0===n||eQ(l,n)>0)&&(n=l,i=a)}return i?{type:1,snapshot:i}:{type:0}}async function nH(e,t){let r=await nq(e,t);if(r)return ri(r,t)}async function nq(e,t){let r=await nN(e,t);if(!(!r||!nC(r)))return r.clientGroupID}async function nV(e,t,r){let n=await nO(r);return nF(new Map(n).set(e,t),r)}async function nF(e,t){let r=function(e,t){for(let r of e.values())nk(r)?(r.refreshHashes.forEach(t.assertValidHash),r.persistHash&&t.assertValidHash(r.persistHash)):(t.assertValidHash(r.headHash),nC(r)&&r.tempRefreshHash&&t.assertValidHash(r.tempRefreshHash));return Object.fromEntries(e)}(e,t),n=t.createChunk(r,function(e){let t=[];for(let r of e.values())nk(r)?(t.push(...r.refreshHashes),r.persistHash&&t.push(r.persistHash)):(t.push(r.headHash),nC(r)&&r.tempRefreshHash&&t.push(r.tempRefreshHash));return t}(e));return await t.putChunk(n),await t.setHead(nR,n.hash),n.hash}var nU="profileId",nW=class{#e;constructor(e){this.#e=e("replicache-dbs-v0")}putDatabase(e){return this.#t({...e,lastOpenedTimestampMS:Date.now()})}putDatabaseForTesting(e){return this.#t(e)}#t(e){return t1(this.#e,async t=>{let r={...await nB(t),[e.name]:e};return await t.put("dbs",r),r})}clearDatabases(){return t1(this.#e,e=>e.del("dbs"))}deleteDatabases(e){return t1(this.#e,async t=>{let r={...await nB(t)};for(let t of e)delete r[t];await t.put("dbs",r)})}getDatabases(){return tY(this.#e,nB)}close(){return this.#e.close()}getProfileID(){return t1(this.#e,async e=>{let t=await e.get(nU);return void 0===t&&(t=`p${tT().replace(/-/g,"")}`,await e.put(nU,t)),eN(t),t})}};async function nB(e){let t=await e.get("dbs");return t||(t={}),function(e){for(let[t,r]of(eH(e),Object.entries(e)))eN(t),eH(r),eN(r.name),eN(r.replicacheName),e$(r.replicacheFormatVersion),eN(r.schemaVersion),void 0!==r.lastOpenedTimestampMS&&e$(r.lastOpenedTimestampMS),eL(t===r.name)}(t),t}async function nz(e,t,r,n,i=nQ){let s=Object.values(await e.getDatabases()),o=(await Promise.all(s.map(async e=>[e.name,await nK(e,t,r,n,i)]))).filter(e=>e[1]).map(e=>e[0]),{errors:a}=await nZ(e,o);if(a.length)throw a[0]}async function nG(e,t){await new Promise((t,r)=>{let n=indexedDB.deleteDatabase(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)}),await t.deleteDatabases([e])}async function nZ(e,t){let r=await Promise.allSettled(t.map(async t=>(await nG(t,e),t))),n=[],i=[];for(let e of r)"fulfilled"===e.status?n.push(e.value):i.push(e.reason);return{dropped:n,errors:i}}function nQ(e){return new tG(new tr(e),tD,tA)}async function nK(e,t,r,n,i){if(e.replicacheFormatVersion>7)return!1;if(void 0!==e.lastOpenedTimestampMS){let s=e.replicacheFormatVersion>=5;return!(t-e.lastOpenedTimestampMS<(s?n:r))&&(!s||(eL(5===e.replicacheFormatVersion||6===e.replicacheFormatVersion||7===e.replicacheFormatVersion),!await nX(i(e.name))))}let s=i(e.name),o=await tY(s,nO);return await s.close(),function(e,t,r){for(let n of e.values())if(t-n.heartbeatTimestampMs<r)return!1;return!0}(o,t,r)}async function nX(e){for(let t of(await tY(e,t7)).values())if(rs(t))return!0;return!1}var nJ=class{#e;#t;#r=0;visibilityState;#n=new Set;constructor(e,t,r){this.#e=e,this.#t=t,this.visibilityState=e.visibilityState,this.#e.addEventListener("visibilitychange",this.#i,{signal:r})}#i=()=>{"visible"===this.#e.visibilityState?(clearTimeout(this.#r),this.#s("visible")):this.#r=setTimeout(()=>{this.#s("hidden")},this.#t)};#s(e){if(e!==this.visibilityState)for(let t of(this.visibilityState=e,this.#n)){let{resolve:r,state:n}=t;n===e&&(r(),this.#n.delete(t))}}waitForVisible(){return this.#o("visible")}waitForHidden(){return this.#o("hidden")}#o(e){if(this.visibilityState===e)return Promise.resolve();let{promise:t,resolve:r}=f();return this.#n.add({resolve:r,state:e}),t}},nY=Promise.resolve(),n0=new Promise(()=>{}),n1=class{visibilityState="visible";waitForVisible(){return nY}waitForHidden(){return n0}};function n2(){return"u">typeof document?document:void 0}var n9=class{rep;invokeSend;maxConnections=1;constructor(e,t){this.rep=e,this.invokeSend=t}get maxDelayMs(){return this.rep.requestOptions.maxDelayMs}get minDelayMs(){return this.rep.requestOptions.minDelayMs}},n8=class extends n9{debounceDelay=0;get watchdogTimer(){return this.rep.pullInterval}},n4=class extends n9{get debounceDelay(){return this.rep.pushDelay}watchdogTimer=null},n5=class{#e=f();#t=f();#r=f();#n;#i=!1;#s=0;#o;#a;constructor(e,t,r){this.#o=e,this.#n=t,this.#a=r,this.run()}close(){this.#i=!0,this.#s>0&&this.#r.resolve({error:n3()})}async send(e){if(this.#i)return{error:n3()};this.#s++,this.#o.debug?.("send",e),e?this.#t.resolve():await this.#a?.waitForVisible(),this.#e.resolve();let t=await this.#r.promise;return this.#s--,t}async run(){let e=[],t=f(),r,n=0,i=this.#n,{debug:s}=this.#o,o=0;s?.("Starting connection loop");let a=e=>Promise.race([this.#t.promise,tm(e)]);for(;!this.#i;){s?.(n7(e)?"Last request failed. Trying again":"Waiting for a send");let l=[this.#e.promise],u=i.watchdogTimer;if(null!==u&&l.push(tm(u)),await Promise.race(l),this.#i||(s?.("Waiting for debounce"),await a(i.debounceDelay),this.#i))break;if(s?.("debounced"),this.#e=f(),n>=i.maxConnections){if(s?.("Too many request in flight. Waiting until one finishes..."),await this.#u(),this.#i)break;s?.("...finished")}n>0||n7(e)?(o=function(e,t,r){let{length:n}=r;if(0===n)return e;let{ok:i}=r[r.length-1],{maxConnections:s,minDelayMs:o}=t;if(!i)return 0===e?o:2*e;if(n>1){let e=r[r.length-2];for(;r.length>9;)r.shift();if(i&&!e.ok)return o}return function(e){e.sort();let{length:t}=e,r=t>>1;return t%2==1?e[r]:(e[r-1]+e[r])/2}(r.filter(({ok:e})=>e).map(({duration:e})=>e))/s|0}(o,i,e),s?.(n7(e)?"Last connection errored. Sleeping for":"More than one outstanding connection ("+n+"). Sleeping for",o,"ms")):o=0;let c=Math.min(i.maxDelayMs,Math.max(i.minDelayMs,o));if(void 0!==r){let e=Date.now()-r;if(c>e&&(await Promise.race([a(c-e),t.promise]),this.#i))break}n++,(async()=>{let o=Date.now(),a,l;try{r=o,s?.("Sending request"),this.#t=f(),a=await i.invokeSend(),s?.("Send returned",a)}catch(e){s?.("Send failed",e),l=e,a=!1}if(this.#i){s?.("Closed after invokeSend");return}s?.("Request done",{duration:Date.now()-o,ok:a}),e.push({duration:Date.now()-o,ok:a}),e.length>1&&!e[e.length-2].ok&&e[e.length-1].ok&&(t.resolve(),t=f()),n--,this.#c();let u=this.#r;this.#r=f(),l?u.resolve({error:l}):u.resolve(void 0),a||this.#e.resolve()})()}}#l=void 0;#c(){if(this.#l){let e=this.#l;this.#l=void 0,e()}}#u(){let{promise:e,resolve:t}=f();return this.#l=t,e}};function n3(){return Error("Closed")}function n7(e){return e.length>0&&!e[e.length-1].ok}var n6=class{#e=new m;#t=new Map;#r;#n;#i;t=new Map;n;h=new Map;m=new Map;constructor(e,t,r,n,i=rM){this.n=new ir(t,i,this.h,this.m),this.#r=e,this.#n=r,this.#i=n}async read(){let e=await this.#e.read();return new ie(this.#t,this.t,this.n,this.#r,e,this.#i)}async write(){let e=await this.#e.write();return new it(this.#t,this.t,this.n,this.#r,this.h,this.m,e,this.#n,this.#i)}close(){return e3}isCached(e){return void 0!==this.n.getWithoutUpdatingLRU(e)}withSuspendedSourceCacheEvictsAndDeletes(e){return this.n.withSuspendedEvictsAndDeletes(e)}},ie=class{u;t;n;f;#e=void 0;#t;#r=!1;assertValidHash;constructor(e,t,r,n,i,s){this.u=e,this.t=t,this.n=r,this.f=n,this.#t=i,this.assertValidHash=s}isMemOnlyChunkHash(e){return this.t.has(e)}async hasChunk(e){return await this.getChunk(e)!==void 0}async getChunk(e){let t=this.t.get(e);if(void 0!==t)return t;let r=this.n.get(e);return void 0===r&&void 0!==(r=await (await this.y()).getChunk(e))&&this.n.put(r),r}mustGetChunk(e){return tB(this,e)}getHead(e){return Promise.resolve(this.u.get(e))}release(){this.#r||(this.#t(),this.#e?.then(e=>e.release()).catch(e=>{}),this.#r=!0)}get closed(){return this.#r}y(){return this.#e||(this.#e=this.f.read()),this.#e}},it=class extends ie{#e;#t;#r;i=new Map;r=new Map;s=new Map;#n=new Set;constructor(e,t,r,n,i,s,o,a,l){super(e,t,r,n,o,l),this.#e=i,this.#t=s,this.#r=a}createChunk=(e,t)=>{let r=new tN((0,this.#r)(),e,t);return this.#n.add(r.hash),r};putChunk(e,t){let{hash:r,meta:n}=e;if(this.assertValidHash(r),n.length>0)for(let e of n)this.assertValidHash(e);return this.#n.has(r)||this.isMemOnlyChunkHash(r)?this.r.set(r,e):this.s.set(r,{chunk:e,size:t??-1}),e3}async setHead(e,t){await this.#i(e,t)}async removeHead(e){await this.#i(e,void 0)}async #i(e,t){let r=await this.getHead(e),n=this.i.get(e);void 0===n?this.i.set(e,{new:t,old:r}):n.new=t}isMemOnlyChunkHash(e){return this.r.has(e)||super.isMemOnlyChunkHash(e)}async getChunk(e){let t=this.r.get(e);if(void 0!==t)return t;let r=this.t.get(e);if(void 0!==r)return r;let n=this.s.get(e);if(void 0!==n)return n.chunk;let i=this.n.get(e);return void 0===i&&void 0!==(i=await (await this.y()).getChunk(e))&&this.s.set(i.hash,{chunk:i,size:-1}),i}getHead(e){let t=this.i.get(e);return t?Promise.resolve(t.new):super.getHead(e)}async commit(){let e=new Set(rf(this.r.keys(),this.s.keys())),t=await tH(this.i.values(),e,this);for(let[e,r]of t)if(this.isMemOnlyChunkHash(e)){if(0===r)this.#e.delete(e),this.t.delete(e),this.#t.delete(e);else{this.#e.set(e,r);let t=this.r.get(e);t&&(this.#t.set(e,t.meta),this.t.set(e,t))}t.delete(e)}for(let[e,r]of(this.n.updateForCommit(this.s,t),this.i))r.new?this.u.set(e,r.new):this.u.delete(e);this.r.clear(),this.s.clear(),this.i.clear(),this.release()}getRefCount(e){return this.#e.get(e)}getRefs(e){let t=this.r.get(e);if(t)return t.meta;let r=this.t.get(e);if(r)return r.meta;let n=this.s.get(e);return void 0!==n?n.chunk.meta:this.#t.get(e)}areRefsCounted(e){return this.#t.has(e)}chunksPersisted(e){let t=[];for(let r of e){let e=this.t.get(r);e&&(this.t.delete(r),t.push(e))}this.n.persisted(t)}},ir=class{#e;#t;#r;#n;#i=0;#s=!1;#o=[];cacheEntries=new Map;constructor(e,t,r,n){this.#e=e,this.#t=t,this.#r=r,this.#n=n}get(e){let t=this.cacheEntries.get(e);return t&&(this.cacheEntries.delete(e),this.cacheEntries.set(e,t)),t?.chunk}getWithoutUpdatingLRU(e){return this.cacheEntries.get(e)?.chunk}put(e){let{hash:t}=e,r=this.cacheEntries.get(t);if(r){this.cacheEntries.delete(t),this.cacheEntries.set(t,r);return}let n=this.#r.get(t);if(!(void 0===n||n<1)&&this.#l(e)){if(!this.#n.has(t)){for(let t of e.meta)this.#r.set(t,(this.#r.get(t)||0)+1);this.#n.set(t,e.meta)}this.#a()}}#a(){if(!this.#s)for(let e of this.cacheEntries.values()){if(this.#i<=this.#e)break;this.#c(e)}}#l(e,t){let r=t??this.#t(e);return!(r>this.#e)&&(this.#i+=r,this.cacheEntries.set(e.hash,{chunk:e,size:r}),!0)}#c(e){let{hash:t}=e.chunk;this.#i-=e.size,this.cacheEntries.delete(t)}#u(e){this.#r.delete(e),this.#n.delete(e);let t=this.cacheEntries.get(e);t&&(this.#i-=t.size,this.cacheEntries.delete(e))}updateForCommit(e,t){for(let[r,n]of t)if(0===n)this.#s?(this.#r.set(r,0),this.#o.push(r)):this.#u(r);else{this.#r.set(r,n);let t=e.get(r);if(t){let{chunk:e,size:n}=t,i=this.cacheEntries.get(r);i?(this.cacheEntries.delete(r),this.cacheEntries.set(r,i)):(this.#l(e,-1!==n?n:void 0),this.#n.set(r,e.meta))}}this.#a()}persisted(e){for(let t of e)this.#l(t);this.#a()}async withSuspendedEvictsAndDeletes(e){this.#s=!0;try{return await e()}finally{for(let e of(this.#s=!1,this.#o))0===this.#r.get(e)&&this.#u(e);this.#a()}}};function ii(e){return void 0!==e.indexName}function is(e){return"string"==typeof e?[e]:e}var io=class extends Error{constructor(){super("Transaction is closed")}};function ia(e){if(e.closed)throw new io}function il(e){return e.closed?Promise.reject(new io):void 0}var iu=class{#e;#t;#r;#n;constructor(e,t,r,n){this.#e=e,this.#t=t,this.#r=r,this.#n=n}[Symbol.asyncIterator](){return this.values()}values(){return new ic(this.#i(e=>e[1]))}keys(){return new ic(this.#i(e=>e[0]))}entries(){return new ic(this.#i(e=>[e[0],e[1]]))}toArray(){return this.values().toArray()}#i(e){return ih(e,this.#e,this.#t,this.#r,this.#n)}},ic=class{#e;constructor(e){this.#e=e}next(){return this.#e.next()}[Symbol.asyncIterator](){return this.#e[Symbol.asyncIterator]()}toArray(){return r3(this.#e)}};async function*ih(e,t,r,n,i){ia(n);let{limit:s=1/0}=r,{prefix:o=""}=r,a=r.start?.exclusive,l=ii(r);for await(let n of t){let t=n[0];if(!(l?t[0]:t).startsWith(o))return;if(a){if(a=!0,l){if(function(e,t){let[r,n]=is(t),[i,s]=is(e);return i===r&&(void 0===n||s===n)}(t,r.start.key))continue}else if(t===r.start.key)continue}if(yield e(n),0==--s&&!l){i(t);return}}}var id=0,ip=class{clientID;dbtx;d;location;environment;constructor(e,t,r,n="openReadTransaction"){this.clientID=e,this.dbtx=t,this.d=r.withContext(n).withContext("txid",id++),this.environment="client",this.location="client"}get(e){return il(this.dbtx)||this.dbtx.get(e)}async has(e){return ia(this.dbtx),this.dbtx.has(e)}async isEmpty(){return ia(this.dbtx),this.dbtx.isEmpty()}scan(e){return ig(e,this.dbtx,im)}};function im(e){}function ig(e,t,r){return new iu(e&&ii(e)?iw(t,e):t.map.scan(function(e){if(!e)return"";let{prefix:t="",start:r}=e;return r&&ra(r.key,t)>0?r.key:t}(e)),e??{},t,r)}var iv=class{#e=new Set;#t=[];#r;constructor(e){this.#r=e}get environment(){return this.#r.location}get location(){return this.#r.location}get clientID(){return this.#r.clientID}isEmpty(){return this.#t.push({options:{}}),this.#r.isEmpty()}get(e){return this.#e.add(e),this.#r.get(e)}has(e){return this.#e.add(e),this.#r.has(e)}scan(e){let t,r,n,i;let s={options:e?(e.start&&({key:t,exclusive:r}=e.start,e.indexName?"string"==typeof t?i=t:(i=t[0],n=t[1]):n=t),{prefix:e.prefix,startSecondaryKey:i,startKey:n,startExclusive:r,limit:e.limit,indexName:e.indexName}):{},inclusiveLimitKey:void 0};return this.#t.push(s),ig(e,this.#r.dbtx,e=>{s.inclusiveLimitKey=e})}get keys(){return this.#e}get scans(){return this.#t}},iy=class extends ip{reason;mutationID;constructor(e,t,r,n,i,s="openWriteTransaction"){super(e,n,i,s),this.mutationID=t,this.reason=r}put(e,t){return this.set(e,t)}async set(e,t){ia(this.dbtx),await this.dbtx.put(this.d,e,t)}del(e){return il(this.dbtx)??this.dbtx.del(this.d,e)}};async function*iw(e,t){for await(let r of e.getMapForIndex(t.indexName).scan(function(e){let{prefix:t,start:r}=e,n="";if(void 0!==t&&(n=ns(t,void 0)),!r)return n;let{key:i}=r,[s,o]=is(i),a=ns(s,o);return ra(a,n)>0?a:n}(t)))yield[no(r[0]),r[1]]}async function ib(e,t,r,n,i,s,o){let a=e.meta,l=a.mutatorName;rY(a)&&eL(a.clientID===s,"mutationClientID must match clientID of LocalMeta");let u=n[l];u||i.error?.(`Cannot rebase unknown mutator ${l}`);let c=a.mutatorArgsJSON,h=await (await rX(r,t)).getNextMutationID(s,t);if(h!==a.mutationID)throw Error(`Inconsistent mutation ID: original: ${a.mutationID}, next: ${h} - mutationClientID: ${s} mutatorName: ${l}`);o>=5&&(eN(a.clientID),function(e){if(e$(e.mutationID),eN(e.mutatorName),!e.mutatorName)throw Error("Missing mutator name");e.mutatorArgsJSON,null!==e.originalHash&&tA(e.originalHash),e$(e.timestamp)}(a));let d=await np(r,l,c,e.chunk.hash,t,a.timestamp,s,o),f=new iy(s,await d.getMutationID(),"rebase",d,i);return await (u||(async()=>{}))(f,c),d}async function i_(e,t,r,n,i,s,o){return(await ib(e,t,r,n,i,s,o)).putCommit()}async function iE(e,t,r,n,i,s,o,a){return(await ib(e,t,r,i,s,o,a)).commit(n)}var ix=new WeakSet;function iS(e){return e instanceof Error?e:Error(String(e))}async function ik(e,t,r){for(let n of r)switch(n.op){case"put":await t.put(e,n.key,n.value);break;case"del":await t.del(e,n.key);break;case"clear":await t.clear()}}var iC=class extends Error{name="PullError";causedBy;constructor(e){super("Failed to pull"),this.causedBy=e}},iR="sync";async function iI(e,t,r,n,i,s,o,a,l=!0){let[u,c]=await tY(s,async e=>{let r=await e.getHead(rN);if(!r)throw Error("Internal no main head found");let n=await rz(r,e),i=n.meta.cookieJSON;return[await n.getMutationID(t,e),i]}),{response:h,httpRequestInfo:d}=await iM(a,n,{profileID:e,clientID:t,cookie:c,lastMutationID:u,pullVersion:0,schemaVersion:r},i);if(!h)return{httpRequestInfo:d,syncHead:tP};if(!l||eJ(h))return{httpRequestInfo:d,pullResponse:h,syncHead:tP};let f=await t0(s,async e=>{let r;eL(o<=4);let n=await e.getHead(rN);if(void 0===n)throw Error("Main head disappeared");let i=await rz(n,e),[s,l]=rZ(i,t);if(!ez(c,l))return{type:2};if(h.lastMutationID<s)throw Error(iO("lastMutationID",h.lastMutationID,s));let u=h.cookie??null;if(0===h.patch.length&&h.lastMutationID===s&&ez(u,l))return{type:1};for(let i of(await rK(n,e)))if(await i.getMutationID(t,e)<=h.lastMutationID){r=i;break}if(!r)throw Error("Internal invalid chain");let d=await nm(i.chunk.hash,h.lastMutationID,u,e,ny(r,e,o),t,o);await ik(a,d,h.patch);let f=new rP(e,o,r.valueHash);for await(let e of d.map.diff(f))await nv(a,d.indexes,e.key,()=>Promise.resolve(e.oldValue),e.newValue);return{type:0,syncHead:await d.commit(iR)}});if(2===f.type)throw Error("Overlapping sync");return{httpRequestInfo:d,pullResponse:h,syncHead:0===f.type?f.syncHead:tP}}async function iT(e,t,r,n,i,s,o,a,l,u=!0){let c=await tY(o,async e=>{let t=await e.getHead(rN);if(!t)throw Error("Internal no main head found");let r=(await rz(t,e)).meta;return r1(r),r.cookieJSON}),{response:h,httpRequestInfo:d}=await iM(l,i,{profileID:e,clientGroupID:r,cookie:c,pullVersion:1,schemaVersion:n},s);if(!h)return{httpRequestInfo:d,syncHead:tP};if(!u||eJ(h))return{httpRequestInfo:d,pullResponse:h,syncHead:tP};let f=await iP(l,o,c,h,t,a);return{httpRequestInfo:d,pullResponse:h,syncHead:0===f.type?f.syncHead:tP}}async function iM(e,t,r,n){e.debug?.("Starting pull...");let i=Date.now();try{var s,o;let a=await t(r,n);return e.debug?.(`...Pull ${a.response?"complete":"failed"} in `,Date.now()-i,"ms"),1===r.pullVersion?(eH(a),e1(a.httpRequestInfo),void 0!==a.response&&(s=a.response,eH(s),eY(s)||e0(s)||(void 0!==s.cookie&&function(e){if(!(null===e||"string"==typeof e||"number"==typeof e)&&(eH(e),function(e){for(let t in e)eB(e,t)&&e[t]}(e),!("string"==typeof e.order||"number"==typeof e.order)))throw Error("Invalid cookie")}(s.cookie),function(e){for(let[t,r]of(eH(e),Object.entries(e)))eN(t),e$(r)}(s.lastMutationIDChanges),e2(s.patch)))):(eH(a),e1(a.httpRequestInfo),void 0!==a.response&&(o=a.response,eH(o),eY(o)||e0(o)||(void 0!==o.cookie&&o.cookie,e$(o.lastMutationID),e2(o.patch)))),a}catch(e){throw new iC(iS(e))}}function iO(e,t,r){return`Received ${e} ${t} is < than last snapshot ${e} ${r}; ignoring client view`}function iP(e,t,r,n,i,s){return t0(t,async t=>{let o=await t.getHead(rN);if(void 0===o)throw Error("Main head disappeared");let a=await rz(o,t),l=a.meta;r1(l);let u=l.cookieJSON;if(!ez(r,u))return e.debug?.("handlePullResponse: cookie mismatch, pull response is not applicable"),{type:2};for(let[e,t]of Object.entries(n.lastMutationIDChanges)){let r=l.lastMutationIDs[e];if(void 0!==r&&t<r)throw Error(iO(`${e} lastMutationID`,t,r))}let c=n.cookie;if(0>eQ(c,u))throw Error(iO("cookie",c,u));if(0===n.patch.length&&ez(c,u)&&!function(e,t){for(let[r,n]of Object.entries(e))if(n!==t[r])return!0;return!1}(n.lastMutationIDChanges,l.lastMutationIDs))return{type:1};let h=await ng(a.chunk.hash,{...l.lastMutationIDs,...n.lastMutationIDChanges},c,t,i,s);return await ik(e,h,n.patch),{type:0,syncHead:await h.commit(iR)}})}var iD=tv.unknown().chain(e=>k(e)),iA=class extends Error{name="PushError";causedBy;constructor(e){super("Failed to push"),this.causedBy=e}},iL=ef({id:tv.number(),name:tv.string(),args:iD,timestamp:tv.number()}),iN=ef({id:tv.number(),name:tv.string(),args:iD,timestamp:tv.number(),clientID:n_});async function i$(e,t,r,n,i,s,o,a,l){var u,c;let h,d=await tY(t,async e=>{let t=await e.getHead(rN);if(!t)throw Error("Internal no main head");return rV(t,e)});if(0===d.length)return;if(d.reverse(),1===l){let e=[];for(let t of d)if(r$(t))e.push({id:(u=t.meta).mutationID,name:u.mutatorName,args:u.mutatorArgsJSON,timestamp:u.timestamp,clientID:u.clientID});else throw Error("Internal non local pending commit");eL(i),h={profileID:n,clientGroupID:i,mutations:e,pushVersion:1,schemaVersion:a}}else{eL(0===l);let e=[];for(let t of d){if(2===t.meta.type)e.push({id:(c=t.meta).mutationID,name:c.mutatorName,args:c.mutatorArgsJSON,timestamp:c.timestamp});else throw Error("Internal non local pending commit")}h={profileID:n,clientID:s,mutations:e,pushVersion:0,schemaVersion:a}}r.debug?.("Starting push...");let f=Date.now(),p=await ij(o,h,e);return r.debug?.("...Push complete in ",Date.now()-f,"ms"),p}async function ij(e,t,r){try{var n;let i=await e(t,r);return eH(i),e1(i.httpRequestInfo),void 0!==i.response&&(n=i.response,eY(n)||eL(e0(n))),i}catch(e){throw new iA(iS(e))}}tv.object({pushVersion:tv.literal(0),schemaVersion:tv.string(),profileID:tv.string(),clientID:n_,mutations:tv.array(iL)}),tv.object({pushVersion:tv.literal(1),schemaVersion:tv.string(),profileID:tv.string(),clientGroupID:nb,mutations:tv.array(iN)});var iH=class{#e=!1;#t;constructor(e){this.#t=e}async recoverMutations(e,t,r,n,i,s){let{lc:o,enableMutationRecovery:a,isPushDisabled:l,delegate:u}=this.#t;if(!a||this.#e||!u.online||u.closed||l())return!1;let c="Recovering mutations.";o.debug?.("Start:",c);try{for(let a of(this.#e=!0,await t,await iU(n,this.#t,r,e),Object.values(await i.getDatabases()))){if(u.closed)return o.debug?.("Exiting early due to close:",c),!0;if(a.replicacheName===u.name&&a.name!==u.idbName)switch(a.replicacheFormatVersion){case 4:case 5:case 6:case 7:await iF(a,this.#t,void 0,s)}}}catch(e){iq(e,o,c,u)}finally{o.debug?.("End:",c),this.#e=!1}return!0}};function iq(e,t,r,n){n.closed?t.debug?.(`Mutation recovery error likely due to close during:
${r}
Error:
`,e):t.error?.(`Mutation recovery error during:
${r}
Error:
`,e)}async function iV(e,t,r,n,i,s){eL(4===n.replicacheFormatVersion),nT(e);let{delegate:o,lc:a,wrapInOnlineCheck:l,wrapInReauthRetries:u,isPushDisabled:c,isPullDisabled:h}=i,d=o.clientID;if(d===t||e.lastServerAckdMutationID>=e.mutationID)return;let f=`Recovering mutations for ${t}.`;a.debug?.("Start:",f);let p=new n6(r,10485760,tj,tA);try{if(await t1(p,t=>t.setHead(rN,e.headHash)),c()){a.debug?.(`Cannot recover mutations for client ${t} because push is disabled.`);return}let{pusher:i}=o,f="recoveringMutationsPush";if(!await l(async()=>{let{result:e}=await u(async(e,r)=>{eF(p);let s=await i$(e,p,r,await o.profileID,void 0,t,i,n.schemaVersion,0);return{result:s,httpRequestInfo:s?.httpRequestInfo}},f,a);return!!e&&200===e.httpRequestInfo.httpStatusCode},f)){a.debug?.(`Failed to recover mutations for client ${t} due to a push error.`);return}if(h()){a.debug?.(`Cannot confirm mutations were recovered for client ${t} because pull is disabled.`);return}let{puller:m}=o,g="recoveringMutationsPull",v;if(!await l(async()=>{let{result:e}=await u(async(e,r)=>{let i=await iI(await o.profileID,t,n.schemaVersion,m,e,p,s,r,!1);return{result:i,httpRequestInfo:i.httpRequestInfo}},g,a);return{pullResponse:v}=e,!!v&&200===e.httpRequestInfo.httpStatusCode},g)){a.debug?.(`Failed to recover mutations for client ${t} due to a pull error.`);return}return a.debug&&v&&(eY(v)?a.debug?.(`Client ${d} cannot recover mutations for client ${t}. The client no longer exists on the server.`):e0(v)?a.debug?.(`Version is not supported on the server. versionType: ${v.versionType}. Cannot recover mutations for client ${t}.`):a.debug?.(`Client ${d} recovered mutations for client ${t}.  Details`,{mutationID:e.mutationID,lastServerAckdMutationID:e.lastServerAckdMutationID,lastMutationID:v.lastMutationID})),await t1(r,async e=>{let r=await nO(e),n=r.get(t);if(!n)return r;nT(n);let i=async t=>(await nF(t,e),t);if(eY(v)||e0(v)){let e=new Map(r);return e.delete(t),i(e)}if(eL(v),n.lastServerAckdMutationID>=v.lastMutationID)return r;let s=new Map(r).set(t,{...n,lastServerAckdMutationID:v.lastMutationID});return i(s)})}catch(e){iq(e,a,f,o)}finally{await p.close(),a.debug?.("End:",f)}}async function iF(e,t,r,n){let i=new tG(n(e.name),tD,tA);try{await iU(e,t,i,r)}finally{await i.close()}}function iU(e,t,r,n){return e.replicacheFormatVersion>=5?iB(e,t,r):iW(e,t,r,n)}async function iW(e,t,r,n){let{delegate:i,lc:s}=t,o=`Recovering mutations from db ${e.name}.`;s.debug?.("Start:",o);try{let a=tK(e.replicacheFormatVersion),l=n||await tY(r,e=>nO(e)),u=new Set;for(;l;){let n;for(let[c,h]of l){if(i.closed){s.debug?.("Exiting early due to close:",o);return}if(!u.has(c)&&(u.add(c),n=await iV(h,c,r,e,t,a)))break}l=n}}catch(e){iq(e,s,o,i)}s.debug?.("End:",o)}async function iB(e,t,r){let{delegate:n,lc:i}=t,s=`Recovering mutations from db ${e.name}.`;i.debug?.("Start:",s);try{let o=tK(e.replicacheFormatVersion),a=await tY(r,e=>t7(e)),l=new Set;for(;a;){let u;for(let[c,h]of a){if(n.closed){i.debug?.("Exiting early due to close:",s);return}if(!l.has(c)&&(l.add(c),u=await iG(h,c,r,e,t,o)))break}a=u}}catch(e){iq(e,i,s,n)}i.debug?.("End:",s)}async function iz(e,t,r,n,i){eY(n)?e.debug?.(`Client group ${t} cannot recover mutations for client group ${r}. The client group is unknown on the server. Marking it as disabled.`):e0(n)&&e.debug?.(`Client group ${t} cannot recover mutations for client group ${r}. The client group's version is not supported on the server. versionType: ${n.versionType}. Marking it as disabled.`),await t1(i,e=>ro(r,e))}async function iG(e,t,r,n,i,s){eL(n.replicacheFormatVersion>=5);let{delegate:o,lc:a,wrapInOnlineCheck:l,wrapInReauthRetries:u,isPushDisabled:c,isPullDisabled:h}=i,d=await i.clientGroupIDPromise;if(eF(d),d===t)return;let f,p=!0;for(let[t,r]of Object.entries(e.mutationIDs))if(!e.lastServerAckdMutationIDs[t]||e.lastServerAckdMutationIDs[t]<r){f=t,p=!1;break}if(p)return;if(e.disabled){a.debug?.(`Not recovering mutations for client group ${t} because group is disabled.`);return}let m=`Recovering mutations for client group ${t}.`;a.debug?.("Start:",m);let g=new n6(r,10485760,tj,tA);try{if(await t1(g,t=>t.setHead(rN,e.headHash)),c()){a.debug?.(`Cannot recover mutations for client group ${t} because push is disabled.`);return}let{pusher:i}=o,p="recoveringMutationsPush";if(!await l(async()=>{let{result:e}=await u(async(e,r)=>{eL(f),eL(g);let s=await i$(e,g,r,await o.profileID,t,f,i,n.schemaVersion,1);return{result:s,httpRequestInfo:s?.httpRequestInfo}},p,a);if(!e)return!1;let s=e.response;return eY(s)||e0(s)?(await iz(a,d,t,s,r),!1):200===e.httpRequestInfo.httpStatusCode},p)){a.debug?.(`Failed to recover mutations for client ${t} due to a push error.`);return}if(h()){a.debug?.(`Cannot confirm mutations were recovered for client ${t} because pull is disabled.`);return}let{puller:m}=o,v="recoveringMutationsPull",y;if(!await l(async()=>{let{result:e}=await u(async(e,r)=>{eL(f);let i=await iT(await o.profileID,f,t,n.schemaVersion,m,e,g,s,r,!1);return{result:i,httpRequestInfo:i.httpRequestInfo}},v,a),{pullResponse:i}=e;return eY(i)||e0(i)?(await iz(a,d,t,i,r),!1):!!i&&200===e.httpRequestInfo.httpStatusCode&&(y=i,!0)},v)){a.debug?.(`Failed to recover mutations for client ${t} due to a pull error.`);return}return eL(y),a.debug?.(`Client group ${d} recovered mutations for client group ${t}.  Details`,{mutationIDs:e.mutationIDs,lastServerAckdMutationIDs:e.lastServerAckdMutationIDs,lastMutationIDChanges:y.lastMutationIDChanges}),await t1(r,async e=>{let r=await t7(e),n=r.get(t);if(!n)return r;eL(y);let i={},s=!1;for(let[e,t]of Object.entries(y.lastMutationIDChanges))(n.lastServerAckdMutationIDs[e]??0)<t&&(i[e]=t,s=!0);if(!s)return r;let o=new Map(r).set(t,{...n,lastServerAckdMutationIDs:{...n.lastServerAckdMutationIDs,...i}});return await t6(o,e),o})}catch(e){iq(e,a,m,o)}finally{await g.close(),a.debug?.("End:",m)}}var iZ=typeof BroadcastChannel>"u"?class{name;onmessage=null;onmessageerror=null;constructor(e){this.name=e}addEventListener(){}removeEventListener(){}dispatchEvent(){return!1}close(){}postMessage(){}}:BroadcastChannel;async function iQ(e){let t=await tz(rN,e);return(await rF(t,e)).map(e=>({id:e.meta.mutationID,name:e.meta.mutatorName,args:e.meta.mutatorArgsJSON,clientID:e.meta.clientID})).reverse()}var iK=class{#e=new Set;#t;constructor(e){this.#t=e}async visit(e){if(this.#e.has(e))return;this.#e.add(e);let t=await this.#t.mustGetChunk(e);await this.visitChunk(t)}async visitChunk(e){await Promise.all(e.meta.map(e=>this.visit(e)))}},iX=class extends iK{#e=new Map;#t;constructor(e){super(e),this.#t=e}get gatheredChunks(){return this.#e}visit(e){return this.#t.isMemOnlyChunkHash(e)?super.visit(e):e3}visitChunk(e){return this.#e.set(e.hash,e),super.visitChunk(e)}};async function iJ(e,t,r,n,i,s,o,a=()=>Promise.resolve()){if(s())return;let[l,u,c]=await tY(n,async e=>{await nA(t,e);let r=await nq(t,e);eL(r,`No main client group for clientID: ${t}`);let[,n]=await iY(e,r),i=await n.getMutationID(t,e),s=await rG(n,e);return r2(s),[i,s,r]});if(s())return;let[h,d,f]=await tY(r,async e=>{let r,n=await rJ(rN,e),i=await rU(n,{[t]:l||0},e),s=await rG(n,e);if(r2(s),rQ(s,u)>0){await a();let t=s.chunk.hash,n=new iX(e);await n.visit(t),r=n.gatheredChunks}return[i,s,r]});if(s())return;let p=!1;await t1(n,async r=>{let[n,s]=await iY(r,c),a=s.chunk.hash,l={...n.mutationIDs},{lastServerAckdMutationIDs:u}=n;if(f){let c=await n$(t,r);nM(c);let h=await rG(s,r);if(r2(h),rQ(d,h)>0){p=!0,await Promise.all(Array.from(f.values(),e=>r.putChunk(e))),await nV(t,{...c,persistHash:d.chunk.hash},r),a=d.chunk.hash;let s=await rF(n.headHash,r);l={...u=d.meta.lastMutationIDs},a=await i0(s,a,r,i,l,e,o)}}a=await i0(h,a,r,i,l,e,o);let m={...n,headHash:a,mutationIDs:l,lastServerAckdMutationIDs:u};await re(c,m,r)}),f&&p&&await t1(r,e=>e.chunksPersisted([...f.keys()]))}async function iY(e,t){let r=await ri(t,e);return eL(r,`No client group for clientGroupID: ${t}`),[r,await rX(r.headHash,e)]}async function i0(e,t,r,n,i,s,o){for(let a=e.length-1;a>=0;a--){let l=e[a],{meta:u}=l,c=await rX(t,r);await l.getMutationID(u.clientID,r)>await c.getMutationID(u.clientID,r)&&(i[u.clientID]=u.mutationID,t=(await i_(l,r,t,n,s,u.clientID,o)).chunk.hash)}return t}var i1=class extends iK{#e=new Map;#t=0;#r;#n;#i;constructor(e,t,r,n=rM){super(e),this.#r=t,this.#n=r,this.#i=n}get gatheredChunks(){return this.#e}visit(e){return this.#t>=this.#n||this.#r.isCached(e)?e3:super.visit(e)}visitChunk(e){if(this.#t<this.#n){let t=this.#i(e);this.#e.set(e.hash,{chunk:e,size:t}),this.#t+=t}return super.visitChunk(e)}};async function i2(e,t,r,n,i,s,o,a){if(o())return;let l=await tY(t,e=>rW(rN,e));r2(l);let u=await t.withSuspendedSourceCacheEvictsAndDeletes(async()=>{let u=await t1(r,async e=>{let r=await nH(n,e);if(!r)throw new nD(n);let i=r.headHash,s=await (await rX(i,e)).getMutationID(n,e),o=await n$(n,e);nM(o);let a=await rz(i,e);if(r2(a),i9(l,a,i))return;let u=new i1(e,t,5242880);await u.visit(i);let{gatheredChunks:c}=u,h=new Set(o.refreshHashes);h.add(i);let d={...o,refreshHashes:[...h]};return await nV(n,d,e),[i,a,s,c,o.refreshHashes]});if(o()||!u||(await tm(300),o()))return{type:"aborted"};let[c,h,d,f,p]=u;return t1(t,async t=>{let r=await rJ(rN,t),o=await rG(r,t);if(r2(o),i9(o,h,c))return{type:"aborted",refreshHashesForRevert:p};let l=await rU(r,{[n]:d},t),u=[];for(let{chunk:e,size:r}of f.values())u.push(t.putChunk(e,r));await Promise.all(u);let m=c;for(let r=l.length-1;r>=0;r--)m=(await i_(l[r],t,m,i,e,l[r].meta.clientID,a)).chunk.hash;let g=await rX(m,t),v=await nh(r,g,t,s,a);return await t.setHead(rN,m),{type:"complete",newMemdagHeadHash:m,diffs:v,newPerdagClientHeadHash:c}})});if(o())return;let c=e=>t1(r,async t=>{let r={...await n$(n,t),refreshHashes:e};await nV(n,r,t)});if("aborted"===u.type){u.refreshHashesForRevert&&await c(u.refreshHashesForRevert);return}return await c([u.newPerdagClientHeadHash]),[u.newMemdagHeadHash,u.diffs]}function i9(e,t,r){let n=rQ(e,t);return n>0||0===n&&r===t.chunk.hash}function i8(e){return new Promise(t=>{"function"==typeof requestIdleCallback?requestIdleCallback(()=>t(),{timeout:e}):setTimeout(()=>t(),e)})}var i4=class{#e;#t;#r;#n;#i;#s=void 0;#o=void 0;#a=Promise.resolve();#l=Promise.resolve();constructor(e,t,r,n,i=i8){this.#e=e,this.#t=t,this.#r=r,this.#n=n,this.#i=i,this.#n.addEventListener("abort",()=>{let e=new tf("Aborted");this.#o?.reject(e),this.#s?.reject(e),this.#o=void 0,this.#s=void 0})}schedule(){return this.#n.aborted?Promise.reject(new tf("Aborted")):(this.#s||(this.#s=f(),this.#c()),this.#s.promise)}async #c(){try{await this.#a}catch{}if(await this.#l,this.#s&&(await this.#i(this.#t),this.#s)){this.#l=i5(this.#r,this.#n),this.#o=this.#s,this.#s=void 0;try{this.#a=this.#e(),await this.#a,this.#o?.resolve()}catch(e){this.#o?.reject(e)}this.#o=void 0}}};async function i5(e,t){try{await tm(e,t)}catch(e){eL(e instanceof tf)}}async function i3(e,t,r,n){let i=await fetch(t,{method:e,body:r,headers:n});if(!i.ok)throw Error(`Got ${i.status} fetching ${t}: ${await i.text()}`);return i}var i7=new Set,i6=Symbol(),se=class{#e;#t;#r=i6;#n=i7;#i=[];onError;onDone;#s;constructor(e,t,r,n,i=ez){this.#e=e,this.#t=t,this.onError=r,this.onDone=n,this.#s=i}hasIndexSubscription(e){for(let t of this.#i)if(t.options.indexName===e)return!0;return!1}invoke(e,t,r){return this.#e(e)}matches(e){for(let[t,r]of e)if(function(e,t,r,n){if(""===r){for(let t of n)if(e.has(t.key))return!0}for(let e of t)if(function(e,t,r){for(let n of r)if(function(e,t,r){let{indexName:n="",limit:i,prefix:s,startKey:o,startExclusive:a,startSecondaryKey:l}=e.options;if(t!==n)return!1;if(!n)return(void 0===i||!(i<=0))&&(!s&&!o||!(s&&(!r.startsWith(s)||si(e,r))||o&&(a&&0>=ra(r,o)||0>ra(r,o)||si(e,r))));if(!s&&!o&&!l)return!0;let[u,c]=no(r);return!(s&&!u.startsWith(s)||l&&(a&&0>=ra(u,l)||0>ra(u,l))||o&&(a&&0>=ra(c,o)||0>ra(c,o)))}(e,t,n.key))return!0;return!1}(e,r,n))return!0;return!1}(this.#n,this.#i,t,r))return!0;return!1}updateDeps(e,t){this.#n=e,this.#i=t}onData(e){this.#r!==i6&&this.#s(this.#r,e)||(this.#r=e,this.#t(e))}},st=class{#e;#t;#r;#n;onError=void 0;onDone=void 0;constructor(e,t){this.#e=e,this.#t=t.prefix??"",this.#r=t.indexName,this.#n=t.initialValuesInFirstDiff??!1}hasIndexSubscription(e){return this.#r===e}onData(e){void 0!==e&&this.#e(e)}invoke(e,t,r){let n=async(n,i,s,o)=>{let a;if(0===t){if(!this.#n)return;eL(void 0===r);let t=[];for await(let r of e.scan({prefix:i,indexName:n}).entries())t.push({op:"add",key:r[0],newValue:r[1]});a=t}else eL(r),a=o(r.get(n??"")??[]);let l=[],{length:u}=a;for(let e=ss(a,i,s);e<u&&s(a[e]).startsWith(i);e++)l.push(a[e]);return 0===t||l.length>0?l:void 0};return this.#r?n(this.#r,this.#t,e=>e.key[0],e=>sr(e,no)):n(void 0,this.#t,e=>e.key,e=>sr(e,e=>e))}matches(e){let t=e.get(this.#r??"");return void 0!==t&&function(e,t,r){if(""===t)return!0;let n=r?e=>no(e.key)[0]:e=>e.key,i=ss(e,t,n);return i<e.length&&n(e[i]).startsWith(t)}(t,this.#t,this.#r)}updateDeps(e,t){}};function sr(e,t){return e.map(e=>{let r=t(e.key);switch(e.op){case"add":return{op:"add",key:r,newValue:e.newValue};case"change":return{op:"change",key:r,oldValue:e.oldValue,newValue:e.newValue};case"del":return{op:"del",key:r,oldValue:e.oldValue}}})}var sn=class{#e=new Set;#t=new Set;#r;#n;hasPendingSubscriptionRuns=!1;constructor(e,t){this.#r=e,this.#n=t}#i(e){return this.#e.add(e),this.#o(e),()=>this.#e.delete(e)}addSubscription(e,{onData:t,onError:r,onDone:n,isEqual:i}){let s=new se(e,t,r,n,i);return this.#i(s)}addWatch(e,t){let r=new st(e,t??{});return this.#i(r)}clear(){for(let e of this.#e)e.onDone?.();this.#e.clear()}async fire(e){let t=function*(e,t){for(let r of e)r.matches(t)&&(yield r)}(this.#e,e);await this.#s(t,1,e)}async #s(e,t,r){let n=[...e];if(0===n.length)return;let i=await this.#r(e=>Promise.allSettled(n.map(async n=>{let i=new iv(e);try{return await n.invoke(i,t,r)}finally{n.updateDeps(i.keys,i.scans)}})));for(let e=0;e<n.length;e++){let t=n[e],r=i[e];"fulfilled"===r.status?t.onData(r.value):t.onError?t.onError(r.reason):this.#n.error?.("Error in subscription body:",r.reason)}}async #o(e){if(this.#t.add(e),!this.hasPendingSubscriptionRuns){this.hasPendingSubscriptionRuns=!0,await Promise.resolve(),this.hasPendingSubscriptionRuns=!1;let e=[...this.#t];this.#t.clear(),await this.#s(e,0,void 0)}}shouldComputeDiffs(){return this.#e.size>0}shouldComputeDiffsForIndex(e){for(let t of this.#e)if(t.hasIndexSubscription(e))return!0;return!1}};function si(e,t){let{inclusiveLimitKey:r}=e;return void 0!==e.options.limit&&void 0!==r&&ra(t,r)>0}function ss(e,t,r){return rd(e.length,n=>ra(t,r(e[n])))}var so="",sa=new Map;function sl(e){let t=sa.get(e);return t?(t++,sa.set(e,t)):(sa.set(e,0),t=0),`${e}-${function(){if(""===so){let e=new Uint8Array(4);crypto.getRandomValues(e),so=Array.from(e,e=>e.toString(16)).join("")}return so}()}-${t}`}var su=()=>{},sc={type:"NewClientGroup"},sh=class{pullURL;pushURL;auth;name;#e;#t;#r=!1;#n;#i=0;get idbName(){var e,t;let r;return e=this.name,t=this.schemaVersion,r=`rep:${e}:7`,t?`${r}:${t}`:r}schemaVersion;get #s(){return{name:this.idbName,replicacheName:this.name,replicacheFormatVersion:7,schemaVersion:this.schemaVersion}}#o=!1;#a=!0;#l=tT();#c;#u;#h;#d;#f;#p;#m=null;#g={};mutate;#v=0;#y=0;#w;#b;pullInterval;pushDelay;#_;puller;pusher;#E;#x;#S;#k;#C;#R=new AbortController;#I=!1;#T;#M;#O;#P=new i4(()=>this.#D(),1e3,500,this.#R.signal);#A;#L=new i4(()=>this.#N(),1e3,500,this.#R.signal);#$;get requestOptions(){return this.#_}onSync=null;onClientStateNotFound=sf;onUpdateNeeded=sf;getAuth=null;constructor(e){let{name:t,logLevel:r="info",logSinks:n=[u],pullURL:i="",auth:s,pushDelay:o=10,pushURL:l="",schemaVersion:h="",pullInterval:d=6e4,mutators:p={},requestOptions:m={},puller:g,pusher:v,licenseKey:y,experimentalCreateKVStore:w,indexes:b={}}=e;if(this.auth=s??"",this.pullURL=i,this.pushURL=l,"string"!=typeof t||!t)throw TypeError("name is required and must be non-empty");this.name=t,this.schemaVersion=h,this.pullInterval=d,this.pushDelay=o,this.puller=g??function(e){async function t(t,r){let[n,i]=await eZ(e.pullURL,e.auth,r,t);return n?{response:await n.json(),httpRequestInfo:i}:{httpRequestInfo:i}}return e9.add(t),t}(this),this.pusher=v??function(e){async function t(t,r){let[n,i]=await eZ(e.pushURL,e.auth,r,t);if(!n)return{httpRequestInfo:i};let s={httpRequestInfo:i},o;try{o=await n.json()}catch{return s}return(eY(o)||e0(o))&&(s.response=o),s}return ix.add(t),t}(this);let _=e.enableMutationRecovery??!0;this.#$=e.enableLicensing??!0,this.#T=e.enableScheduledPersist??!0,this.#M=e.enableScheduledRefresh??!0,this.#O=e.enablePullAndPushInOpen??!0,e.exposeInternalAPI&&e.exposeInternalAPI({persist:()=>this.#D(),refresh:()=>this.#N(),lastMutationID:()=>this.#i});let E=1===n.length?n[0]:new a(n);this.#C=new c(r,{name:t},E),this.#C.debug?.("Constructing Replicache",{name:t,"replicache version":"14.2.2"}),this.#e=new sn(this.#j,this.#C);let x=e=>(function(e,t){return tJ()?new tX(e,t):new tr(t)})(this.#C,e),S;S=w?(x=w)(this.idbName):x(this.idbName),this.#n=x,this.#k=new nW(x),this.#S=new tG(S,tD,tA),this.#x=new n6(this.#S,104857600,tD,tA);let k=f();this.#u=k.promise,this.#E=y;let C=f();this.#f=C.promise;let R=f();this.#p=R.promise;let{minDelayMs:I=30,maxDelayMs:T=6e4}=m;this.#_={maxDelayMs:T,minDelayMs:I};let M=function(e,t,r){return e?new nJ(e,0,r):new n1}(n2(),0,this.#R.signal);this.#w=new n5(this.#C.withContext("PULL"),new n8(this,()=>this.#H()),M),this.#b=new n5(this.#C.withContext("PUSH"),new n4(this,()=>this.#q())),this.mutate=this.#V(p);let O=f();this.#h=O.promise;let P=f();this.#d=P.promise,this.#t=new iH({delegate:this,lc:this.#C,enableMutationRecovery:_,wrapInOnlineCheck:this.#F.bind(this),wrapInReauthRetries:this.#U.bind(this),isPullDisabled:this.#W.bind(this),isPushDisabled:this.#B.bind(this),clientGroupIDPromise:this.#d}),this.#A=function(e,t,r){if(t.aborted)return()=>{};let n=new iZ(`replicache-on-persist:${e}`);return n.onmessage=e=>{let{data:t}=e;eH(t),eN(t.clientGroupID),eN(t.clientID),r({clientGroupID:t.clientGroupID,clientID:t.clientID})},t.addEventListener("abort",()=>{n.close()}),e=>{t.aborted||(n.postMessage(e),r(e))}}(this.name,this.#R.signal,e=>{this.#z(e)}),this.#G(b,O.resolve,P.resolve,k.resolve,C.resolve,R.resolve)}async #G(e,t,r,n,i,o){var a,l,u,c,h,d,f,p,m;let g;let{clientID:v}=this;await sd.get(this.name),await this.#k.getProfileID().then(t),await this.#k.putDatabase(this.#s);let[y,w,b,_]=await (a=this.#C,l=this.#S,u=Object.keys(this.#g),t0(l,async t=>{async function r(r,i,s,o){let a=r9(r,{},i,s,o),l=t.createChunk(a,r4(a)),c=tT(),h={heartbeatTimestampMs:Date.now(),refreshHashes:[l.hash],persistHash:null,clientGroupID:c},d=new Map(n).set(v,h),f={headHash:l.hash,mutatorNames:u,indexes:e,mutationIDs:{},lastServerAckdMutationIDs:{},disabled:!1};return await Promise.all([t.putChunk(l),nF(d,t),re(c,f,t)]),await t.commit(),[h,l.hash,d,!0]}let n=await nO(t),i=await nj(t,u,e);if(2===i.type){let{clientGroupID:e,headHash:r}=i,s={clientGroupID:e,refreshHashes:[r],heartbeatTimestampMs:Date.now(),persistHash:null},o=new Map(n).set(v,s);return await nF(o,t),await t.commit(),[s,r,o,!1]}if(0===i.type){let n=t.createChunk(rR,[]);await t.putChunk(n);let i=[];for(let[t,r]of Object.entries(e)){let e={name:t,keyPrefix:r.prefix??"",jsonPointer:r.jsonPointer,allowEmpty:r.allowEmpty??!1};i.push({definition:e,valueHash:n.hash})}return r(null,null,n.hash,i)}eL(1===i.type);let{snapshot:s}=i,o=[],{valueHash:l,indexes:c}=s,h=new rP(t,7,l);for(let[r,n]of Object.entries(e)){let{prefix:e="",jsonPointer:i,allowEmpty:s=!1}=n,l={name:r,keyPrefix:e,jsonPointer:i,allowEmpty:s},u=function(e,t){return e.find(e=>{var r;return(r=e.definition).jsonPointer===t.jsonPointer&&(r.allowEmpty??!1)===(t.allowEmpty??!1)&&r.keyPrefix===t.keyPrefix})}(c,l);if(u)o.push({definition:l,valueHash:u.valueHash});else{let r=await nw(a,t,h,e,i,s,7);o.push({definition:l,valueHash:await r.flush()})}}return r(s.meta.basisHash,s.meta.cookieJSON,s.valueHash,o)}));r(y.clientGroupID),await t1(this.#x,e=>e.setHead(rN,w)),this.#c=await tY(this.#x,async e=>{let t=await e.getHead(rN);if(void 0===t)throw Error(`No head found for ${rN}`);return t}),n(),await this.#Z(i),this.#O&&(this.pull().catch(su),this.push().catch(su));let{signal:E}=this.#R;c=this.#S,h=()=>{this.#Q(v)},tg("Heartbeat",async()=>{s=t1(c,async e=>{let t=await nO(e),r=t.get(v);if(!r)throw new nD(v);let n={...r,heartbeatTimestampMs:Date.now()},i=new Map(t).set(v,n);return await nF(i,e),i});try{return await s}catch(e){if(e instanceof nD){h();return}throw e}},()=>6e4,this.#C,E),d=this.#S,tg("ClientGC",()=>t1(d,async e=>{let t=Date.now(),r=await nO(e),n=Array.from(r).filter(([e,r])=>e===v||t-r.heartbeatTimestampMs<=6048e5);if(n.length===r.size)return r;let i=new Map(n);return await nF(i,e),i}),()=>3e5,this.#C,E),f=this.#k,p=this.#C,g=!0,tg("CollectIDBDatabases",async()=>{await nz(f,Date.now(),2592e6,12096e5)},()=>g?(g=!1,3e5):432e5,p,E),m=this.#S,tg("ClientGroupGC",()=>t1(m,async e=>{let t=await nO(e),r=new Set;for(let e of t.values())nM(e),r.add(e.clientGroupID);let n=new Map;for(let[t,i]of(await t7(e)))(r.has(t)||rs(i))&&n.set(t,i);return await t6(n,e),n}),()=>3e5,this.#C,E),function(e,t,r,n,i,s,o){if(r.aborted)return;let a=new iZ(`replicache-new-client-group-v1:${e}`);if(i){a.postMessage({clientGroupID:n,idbName:t});let r=new iZ(`replicache-new-client-group:${e}`);r.postMessage([n]),r.close()}a.onmessage=async e=>{let{data:r}=e;if("object"==typeof r&&"string"==typeof r.clientGroupID&&"string"==typeof r.idbName){let{clientGroupID:e,idbName:i}=r;if(e!==n){if(i===t)await tY(o,async t=>await ri(e,t)!==void 0)&&s();else{s();return}}}},r.addEventListener("abort",()=>a.close())}(this.name,this.idbName,E,y.clientGroupID,_,()=>{this.#K(sc)},this.#S),function(e,t,r){let n=setInterval(e,3e5);r.addEventListener("abort",()=>{clearInterval(n)})}(()=>this.#X(),0,E),this.#X(b),n2()?.addEventListener("visibilitychange",this.#J),await this.#Y(o,this.#C,E)}#J=async()=>{this.#o||n2()?.visibilityState==="visible"&&await this.#ee()};async #ee(){let{clientID:e}=this,t=await tY(this.#S,t=>nL(e,t));return t||this.#Q(e),!t}async #Z(e){if(!this.#$){e(!0);return}if(!this.#E){await this.#et(this.#C,"license key ReplicacheOptions.licenseKey is not set",!0,e);return}if(this.#C.debug?.(`Replicache license key: ${this.#E}`),this.#E===eD){this.#C.info?.("Skipping license check for TEST_LICENSE_KEY. You may ONLY use this key for automated (e.g., unit/CI) testing. See https://replicache.dev for more information."),e(!0),this.#m=setTimeout(async()=>{await this.#et(this.#C,"Test key expired",!0,e)},3e5);return}try{let t=await eP(i3,eA,this.#E,this.#C);if(t.pleaseUpdate&&this.#C.error?.("You are using an old version of Replicache that uses deprecated licensing features. Please update Replicache else it may stop working."),"VALID"===t.status)this.#C.debug?.("License is valid.");else{await this.#et(this.#C,`status: ${t.status}`,t.disable,e);return}}catch(e){this.#C.error?.(`Error checking license: ${e}`)}e(!0)}async #et(e,t,r,n){e.error?.(`** REPLICACHE LICENSE NOT VALID ** Replicache license key '${this.#E}' is not valid (${t}). Please run 'npx replicache get-license' to get a license key or contact hello@replicache.dev for help.`),r&&(await this.close(),e.error?.("** REPLICACHE DISABLED **")),n(!1)}async #Y(e,t,r){if(!this.#$||!this.#E||this.#E===eD){e(!1);return}let n=async()=>{try{await eO(i3,eA,this.#E,await this.profileID,t)}catch(e){this.#C.info?.(`Error sending license active ping: ${e}`)}};await n(),e(!0),tg("LicenseActive",n,()=>864e5,t,r)}get profileID(){return this.#h}get clientID(){return this.#l}get clientGroupID(){return this.#d}onOnlineChange=null;get online(){return this.#a}get closed(){return this.#o}async close(){this.#o=!0;let{promise:e,resolve:t}=f();sd.set(this.name,e),this.#R.abort(),n2()?.removeEventListener("visibilitychange",this.#J),await this.#u;let r=[this.#x.close(),this.#S.close(),this.#k.close()];this.#w.close(),this.#b.close(),this.#e.clear(),this.#m&&clearTimeout(this.#m),await Promise.all(r),sd.delete(this.name),t()}async #er(e,t){let r=this.#c;eF(r),e!==r&&(this.#c=e,await this.#e.fire(t))}async #en(e,t){for(;;){if(this.#o)return;await this.#u;let{clientID:r}=this,n=this.#C.withContext("maybeEndPull").withContext("requestID",t),{replayMutations:i,diffs:s}=await function(e,t,r,n,i,s){return t0(e,async e=>{let o=await e.getHead(iR);if(void 0===o)throw Error("Missing sync head");if(o!==r)throw t.error?.("maybeEndPull, Wrong sync head. Expecting:",r,"got:",o),Error("Wrong sync head");let a=await rz(o,e),l=await e.getHead(rN);if(void 0===l)throw Error("Missing main head");let u=await rz(l,e),{meta:c}=a,h=c.basisHash;if(null===a)throw Error("Sync snapshot with no basis");if(h!==u.chunk.hash)throw Error("Overlapping syncs");let d=await rX(o,e),f=[];for(let t of(await rV(l,e))){let r=n;r$(t)&&(r=t.meta.clientID),await t.getMutationID(r,e)>await d.getMutationID(r,e)&&f.push(t)}f.reverse();let p=new nc;if(f.length>0)return{syncHead:o,replayMutations:f,diffs:p};let m=await rX(l,e);if(i.shouldComputeDiffs()){let t=new rP(e,s,m.valueHash),r=new rP(e,s,d.valueHash),n=await r7(t,r);p.set("",n),await nd(m,d,e,p,i,s)}if(await Promise.all([e.setHead(rN,o),e.removeHead(iR)]),await e.commit(),t.debug){let[e,r]=rZ(u,n),[i,s]=rZ(a,n);t.debug("Successfully pulled new snapshot with lastMutationID:",i,"(prev:",e,"), cookie: ",s,"(prev:",r,"), sync head hash:",o,", main head hash:",l,", valueHash:",d.valueHash,"(prev:",u.valueHash)}return{syncHead:o,replayMutations:[],diffs:p}})}(this.#x,n,e,r,this.#e,7);if(!i||0===i.length){await this.#er(e,s),this.#ei();return}for(let t of i){this.#e.hasPendingSubscriptionRuns&&await Promise.resolve();let{meta:i}=t;e=await t0(this.#x,s=>iE(t,s,e,iR,this.#g,n,rY(i)?i.clientID:r,7))}}}#H(){return this.#W()?Promise.resolve(!0):this.#F(async()=>{try{this.#es(0,1);let{syncHead:e,requestID:t,ok:r}=await this.#eo();if(!r)return!1;e!==tP&&await this.#en(e,t)}catch(e){throw await this.#ea(e)}finally{this.#es(0,-1)}return!0},"Pull")}#W(){var e;return this.#r||""===this.pullURL&&(e=this.puller,e9.has(e))}async #F(e,t){let r=!0;try{return await e()}catch(e){return e instanceof iA||e instanceof iC?(r=!1,this.#C.debug?.(`${t} threw:
`,e,`
with cause:
`,e.causedBy)):e instanceof sp?this.#C.error?.(e):this.#C.info?.(`${t} threw:
`,e),!1}finally{this.#a!==r&&(this.#a=r,this.onOnlineChange?.(r),r&&this.#X())}}async #U(e,t,r,n=su,i=su){let{clientID:s}=this,o=0,a;r=r.withContext(t);do{let l,u=sl(s),c=r.withContext("requestID",u),{httpRequestInfo:h,result:d}=await e(u,c);if(a=d,!h)return{result:d,authFailure:!1};let{errorMessage:f,httpStatusCode:p}=h;if((f||p>=400)&&c.error?.(`Got error response doing ${t}: ${p}`+(f?`: ${f}`:"")),401!==p)return{result:d,authFailure:!1};if(!this.getAuth)return{result:d,authFailure:!0};try{await n(),l=await this.getAuth()}finally{await i()}if(null==l)return{result:d,authFailure:!0};this.auth=l,o++}while(o<8);return r.info?.("Tried to reauthenticate too many times"),{result:a,authFailure:!0}}#B(){var e;return this.#r||""===this.pushURL&&(e=this.pusher,ix.has(e))}async #q(){if(this.#B())return!0;await this.#u;let e=await this.#h,{clientID:t}=this,r=await this.#d;return this.#F(async()=>{let{result:n}=await this.#U(async(n,i)=>{try{this.#es(1,0);let s=await i$(n,this.#x,i,e,r,t,this.pusher,this.schemaVersion,1);return{result:s,httpRequestInfo:s?.httpRequestInfo}}finally{this.#es(-1,0)}},"push",this.#C);if(void 0===n)return!0;let{response:i,httpRequestInfo:s}=n;return e0(i)?this.#el(i):eY(i)&&await this.#eu(),200===s.httpStatusCode},"Push")}#el(e){let t={type:e.error};e.versionType&&(t.versionType=e.versionType),this.#K(t)}push({now:e=!1}={}){return sm(this.#b.send(e))}pull({now:e=!1}={}){return sm(this.#w.send(e))}async poke(e){await this.#u;let{clientID:t}=this,r=sl(t),n=this.#C.withContext("handlePullResponse").withContext("requestID",r),{pullResponse:i}=e;if(e0(i)){this.#el(i);return}if(eY(i)){await this.#eu();return}let s=await iP(n,this.#x,e.baseCookie,i,t,7);switch(s.type){case 0:await this.#en(s.syncHead,r);break;case 2:throw Error("unexpected base cookie for poke: "+JSON.stringify(e))}}async #eo(){await this.#u;let e=await this.profileID,{clientID:t}=this,r=await this.#d,{result:{beginPullResponse:n,requestID:i}}=await this.#U(async(n,i)=>{let s=await iT(e,t,r,this.schemaVersion,this.puller,n,this.#x,7,i);return{result:{beginPullResponse:s,requestID:n},httpRequestInfo:s.httpRequestInfo}},"pull",this.#C,()=>this.#es(0,-1),()=>this.#es(0,1)),{pullResponse:s}=n;e0(s)?this.#el(s):eY(n.pullResponse)&&await this.#eu();let{syncHead:o,httpRequestInfo:a}=n;return{requestID:i,syncHead:o,ok:200===a.httpStatusCode}}async #D(){eL(!this.#I),this.#I=!0;try{let{clientID:e}=this;if(await this.#u,this.#o)return;try{await iJ(this.#C,e,this.#x,this.#S,this.#g,()=>this.closed,7)}catch(t){if(t instanceof nD)this.#Q(e);else if(this.#o)this.#C.debug?.("Exception persisting during close",t);else throw t}}finally{this.#I=!1}let{clientID:e}=this,t=await this.#d;eL(t),this.#A({clientID:e,clientGroupID:t})}async #N(){let e;await this.#u;let{clientID:t}=this;if(!this.#o){try{e=await i2(this.#C,this.#x,this.#S,t,this.#g,this.#e,()=>this.closed,7)}catch(e){if(e instanceof nD)this.#Q(t);else if(this.#o)this.#C.debug?.("Exception refreshing during close",e);else throw e}void 0!==e&&await this.#er(e[0],e[1])}}#ec(){this.onClientStateNotFound?.()}#Q(e){this.#C.error?.(`Client state not found on client, clientID: ${e}`),this.#ec()}async #eu(){let e=await this.#d;eL(e),this.#r=!0,await t1(this.#S,t=>ro(e,t)),this.#C.error?.(`Client state not found on server, clientGroupID: ${e}`),this.#ec()}#K(e){this.#C.debug?.(`Update needed, reason: ${e}`),this.onUpdateNeeded?.(e)}async #ei(){this.#T&&await this.#eh("persist",this.#P)}async #z(e){this.#C.debug?.("Handling persist",e);let t=await this.#d;e.clientGroupID===t&&this.#ed()}async #ed(){this.#M&&await this.#eh("refresh from storage",this.#L)}async #eh(e,t){try{await t.schedule()}catch(t){t instanceof tf?this.#C.debug?.(`Scheduled ${e} did not complete before close.`):this.#C.error?.(`Error during ${e}`,t)}}#es(e,t){this.#v+=e,this.#y+=t;let r=this.#v+this.#y;if(1===e+t&&1===r||0===r){let e=r>0;Promise.resolve().then(()=>this.onSync?.(e))}}subscribe(e,t){return"function"==typeof t&&(t={onData:t}),this.#e.addSubscription(e,t)}experimentalWatch(e,t){return this.#e.addWatch(e,t)}query(e){return this.#j(e)}#j=async e=>{await this.#u;let{clientID:t}=this;return tY(this.#x,async r=>{try{let n=await nl(rN,r,7),i=new ip(t,n,this.#C);return await e(i)}catch(e){throw await this.#ea(e)}})};#ef(e,t){return this.#g[e]=t,async r=>(await this.#ep(e,t,r,performance.now())).result}#V(e){let t=Object.create(null);for(let r in e)t[r]=this.#ef(r,e[r]);return t}async #ep(e,t,r,n){let i=r??null;this.#e.hasPendingSubscriptionRuns&&await Promise.resolve(),await this.#u;let{clientID:s}=this;return t0(this.#x,async o=>{try{let a=await tz(rN,o),l=await np(a,e,i,null,o,n,s,7),u=new iy(s,await l.getMutationID(),"initial",l,this.#C),c=await t(u,r);ia(l);let h=await l.getMutationID(),[d,f]=await l.commitWithDiffs(rN,this.#e);return this.#i=h,this.#b.send(!1),await this.#er(d,f),this.#ei(),{result:c,ref:d}}catch(e){throw await this.#ea(e)}})}async #ea(e){return e instanceof tW&&await this.#ee()?new nD(this.clientID):e}#X(e){return this.#t.recoverMutations(e,this.#u,this.#S,this.#s,this.#k,this.#n)}experimentalPendingMutations(){return tY(this.#x,iQ)}},sd=new Map;function sf(){"u">typeof location&&location.reload()}var sp=class extends Error{};async function sm(e){let t=await e;if(t)throw t.error}},2005:(e,t,r)=>{r.d(t,{Ue:()=>d});let n=e=>{let t;let r=new Set,n=(e,n)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,s={setState:n,getState:i,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(n,i,s);return s},i=e=>e?n(e):n;var s=r(1789),o=r(2382);let{useDebugValue:a}=s,{useSyncExternalStoreWithSelector:l}=o,u=!1,c=e=>e,h=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?i(e):e,r=(e,r)=>(function(e,t=c,r){r&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let n=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return a(n),n})(t,e,r);return Object.assign(r,t),r},d=e=>e?h(e):h}};